{
  "success": true,
  "data": [
    {
      "id": "5cbfd9aca86ae80ce64b3175",
      "author_id": "4f447c2f0a8abae26e01b27d",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><h2>å‰è¨€</h2>\n<p>æ—¶éš”ä¸€å¹´ï¼ŒNode.js 12 å¦‚çº¦è€Œè‡³ï¼Œæ­£å¼å‘å¸ƒç¬¬ä¸€ä¸ª <a href=\"https://github.com/nodejs/Release\">Current</a>Â ç‰ˆæœ¬ã€‚</p>\n<p>è¯¥ç‰ˆæœ¬å¸¦æ¥äº†è¯¸å¦‚ï¼š</p>\n<ul>\n<li>V8 æ›´æ–°å¸¦æ¥å¥½å¤šä¸é”™çš„ç‰¹æ€§ã€‚</li>\n<li>HTTP è§£æé€Ÿåº¦æå‡ã€‚</li>\n<li>å¯åŠ¨é€Ÿåº¦å¤§å¹…æå‡ã€‚</li>\n<li>æ›´å¥½çš„è¯Šæ–­æŠ¥å‘Šå’Œå †åˆ†æå·¥å…·ã€‚</li>\n<li>ESM æ¨¡å—æ›´æ–°ã€‚</li>\n</ul>\n<p>åŸæ–‡åœ°å€ï¼š<a href=\"https://medium.com/@nodejs/introducing-node-js-12-76c41a1b3f3f\">https://medium.com/@nodejs/introducing-node-js-12-76c41a1b3f3f</a>\nè¯­é›€åœ°å€ï¼š<a href=\"https://www.yuque.com/egg/nodejs/nodejs-12\">https://www.yuque.com/egg/nodejs/nodejs-12</a></p>\n<h2>LTS vs Current</h2>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2019/png/84182/1556074709431-35af45b8-ec7a-4a81-83d8-155eb519f04a.png#align=left&amp;display=inline&amp;height=389&amp;name=image.png&amp;originHeight=500&amp;originWidth=960&amp;size=58313&amp;status=done&amp;width=746\" alt=\"image.png\"></p>\n<p>å¦‚æœä½ ä¸äº†è§£ Node.js çš„ Â Long Term Support å‘å¸ƒç­–ç•¥çš„è¯ï¼Œä¸€å®šè¦çœ‹çœ‹Â <a href=\"https://github.com/nodejs/Release\">https://github.com/nodejs/Release</a>Â ã€‚</p>\n<p>å°±ç›®å‰è€Œè¨€ï¼ŒNode.js 6.x å’Œ 8.x å°†åœ¨ 2019 å¹´æœ«ç»“æŸ LTS çš„æ”¯æŒï¼Œå¤§å®¶å°½å¿«å‡çº§åˆ° 10.x å§ã€‚</p>\n<h2>å¿«é€Ÿä½“éªŒ</h2>\n<pre class=\"prettyprint language-bash\"><code>$ nvs add node&#x2F;12\n$ nvs use 12\n$ node -v\nv12.0.0\n</code></pre><p>å…·ä½“å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼š<a href=\"https://zhuanlan.zhihu.com/p/63403762\">ç§‘æ™®æ–‡ï¼šä½¿ç”¨ nvs ç®¡ç†æœ¬åœ° Node.js ç‰ˆæœ¬</a></p>\n<h2>V8 æ›´æ–°åˆ° 7.4</h2>\n<blockquote>\n<p>å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸ç”¨å»è€ƒè™‘æ€§èƒ½é—®é¢˜ï¼Œåç­‰ V8 ç‰ˆæœ¬æ›´æ–°å°±å¥½äº†ã€‚ï¼ˆå¤§é›¾ï¼‰</p>\n</blockquote>\n<p>æœ¬æ¬¡ç‰ˆæœ¬æ›´æ–°ï¼Œä¹Ÿå¸¦æ¥äº†å¥½å‡ ä¸ªä¸é”™çš„ç‰¹æ€§ï¼š</p>\n<ul>\n<li><a href=\"https://v8.dev/blog/v8-release-72#async-stack-traces\">å¼‚æ­¥å †æ ˆè·Ÿè¸ª</a></li>\n<li><a href=\"https://v8.dev/blog/v8-release-74#faster-calls-with-arguments-mismatch\">å‚æ•°è°ƒç”¨ä¸åŒ¹é…æ—¶çš„è°ƒç”¨é€Ÿåº¦ä¼˜åŒ–</a></li>\n<li><a href=\"https://v8.dev/blog/v8-release-73#faster-await\">æ›´å¿«çš„ await</a></li>\n<li><a href=\"https://v8.dev/blog/v8-release-72#javascript-parsing\">æ›´å¿«çš„ JavaScript è§£æé€Ÿåº¦</a></li>\n</ul>\n<p><strong>åŒæ—¶ï¼Œè·‘äº†ä¸‹æˆ‘ä»¬ Egg çš„ä¸€äº›å†…éƒ¨æµ‹è¯•ï¼Œå‘ç°åºåˆ—åŒ–æœ‰ 10~20% çš„æ€§èƒ½æå‡ï¼Œææ€–å¦‚æ–¯ï¼</strong></p>\n<p>å¦ï¼Œå¥‡ä¸‘æ— æ¯”çš„ <a href=\"https://github.com/tc39/proposal-class-fields\">Private Class Fields</a> ä¹Ÿèƒ½ç”¨äº†ï¼š</p>\n<pre class=\"prettyprint language-javascript\"><code>class IncreasingCounter {\n  #count = 0;\n  \n  get value() {\n    console.log(&#x27;Getting the current value!&#x27;);\n    return this.#count;\n  }\n  increment() {\n    this.#count++;\n  }\n}\n</code></pre><h2>HTTP è§£æé€Ÿåº¦æå‡</h2>\n<p>é»˜è®¤çš„ HTTP è§£æå™¨åˆ‡æ¢ä¸ºÂ <a href=\"https://github.com/nodejs/llhttp\">llhttp</a>Â ï¼Œæ€§èƒ½æå‡ææ€–å¦‚æ–¯ï¼š</p>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2019/png/84182/1556072499637-686bb0e3-c75c-424c-851f-ad88aff183a2.png#align=left&amp;display=inline&amp;height=231&amp;name=image.png&amp;originHeight=404&amp;originWidth=1302&amp;size=88775&amp;status=done&amp;width=746\" alt=\"image.png\"></p>\n<blockquote>\n<p>ç‚¹è¯„ï¼šææ€–å¦‚æ–¯ã€‚</p>\n</blockquote>\n<h2>å¯åŠ¨é€Ÿåº¦æå‡</h2>\n<p>é€šè¿‡ <a href=\"https://v8.dev/blog/code-caching\">v8 code cache</a>Â çš„æ”¯æŒï¼Œ<a href=\"https://github.com/nodejs/node/pull/27161\">åœ¨æ„å»ºæ—¶æå‰ä¸ºå†…ç½®åº“ç”Ÿæˆä»£ç ç¼“å­˜</a>ï¼Œä»è€Œæå‡ 30% çš„å¯åŠ¨è€—æ—¶ã€‚\nåŒæ—¶ï¼Œé€šè¿‡<a href=\"https://github.com/nodejs/node/pull/24950\">é‡ç”¨ä¸»è¿›ç¨‹ç¼“å­˜</a>ï¼ŒWorkers Threads çš„å¯åŠ¨é€Ÿåº¦æå‡äº† 60% ã€‚</p>\n<blockquote>\n<p>ç‚¹è¯„ï¼šææ€–å¦‚æ–¯ã€‚</p>\n</blockquote>\n<h2>Workers Threads</h2>\n<p>åœ¨ 10.x å·²ç»å¼•å…¥çš„Â <a href=\"https://nodejs.org/api/worker_threads.html\">Workers Threads</a> ç‰¹æ€§ï¼Œåœ¨ 12.x é‡Œé¢é»˜è®¤å¯ç”¨ï¼Œæ— éœ€ä½¿ç”¨ <code>--experimental-worker</code>Â å¼€å¯ã€‚åŒæ—¶åŸºäºä¸Šä¸€æ¡çš„ä»‹ç»ï¼Œå¯åŠ¨çš„é€Ÿåº¦ä¹Ÿå¾—åˆ°å¤§å¹…æå‡ã€‚</p>\n<p>ç›¸å…³ä»‹ç»ï¼š<a href=\"https://medium.com/@Trott/using-worker-threads-in-node-js-80494136dbb6\">https://medium.com/@Trott/using-worker-threads-in-node-js-80494136dbb6</a></p>\n<h2>è¯Šæ–­æŠ¥å‘Š</h2>\n<p>æä¾›äº†æ–°çš„å®éªŒæ€§åŠŸèƒ½ã€è¯Šæ–­æŠ¥å‘Šã€ï¼Œä¸€ä¸ªéå¸¸æœ‰ç”¨çš„ç‰¹æ€§ã€‚\nå¯ç”¨äºå¸®åŠ©åˆ†æè¯¸å¦‚ï¼šå´©æºƒï¼Œæ€§èƒ½é—®é¢˜ï¼Œå†…å­˜æ³„æ¼ï¼Œé«˜ CPU å ç”¨ç­‰ç­‰é—®é¢˜ã€‚è¯¦è§Â <a href=\"https://medium.com/the-node-js-collection/easily-identify-problems-in-node-js-applications-with-diagnostic-report-dc82370d8029\">è¿™ç¯‡æ–‡ç« </a>ã€‚</p>\n<blockquote>\n<p>ç‚¹è¯„ï¼šè¿™ä¹Ÿæ˜¯ <a href=\"https://www.aliyun.com/product/nodejs\">AliNode</a> ä¹‹å‰çš„ä¸€ä¸ªå–ç‚¹ä¹‹ä¸€ã€‚</p>\n</blockquote>\n<h2>Heap Dump</h2>\n<p>ä»¥å‰æˆ‘ä»¬åˆ†æé—®é¢˜çš„æ—¶å€™ï¼Œéœ€è¦æ‰‹åŠ¨å®‰è£…å¯¹åº”çš„ç±»åº“æˆ–è€…ä½¿ç”¨ AliNodeã€‚</p>\n<p>åœ¨ 12.x é‡Œé¢å†…ç½®äº†è¯¥åŠŸèƒ½ï¼Œè¯¦è§ï¼š</p>\n<ul>\n<li><a href=\"https://github.com/nodejs/node/pull/27133\">https://github.com/nodejs/node/pull/27133</a></li>\n<li><a href=\"https://github.com/nodejs/node/pull/26501\">https://github.com/nodejs/node/pull/26501</a></li>\n</ul>\n<blockquote>\n<p>ç‚¹è¯„ï¼šåˆä¸€ä¸ª <a href=\"https://www.aliyun.com/product/nodejs\">AliNode</a> çš„åŠŸèƒ½è¢«å†…ç½®äº†ã€‚ä½†å…¶å®å½±å“ä¸å¤§ï¼ŒAliNode çš„æ ¸å¿ƒåœ¨äºåˆ†æå¹³å°ï¼Œè¿™å—çš„é‡‡é›†èƒ½åŠ›ï¼Œæœ¬æ¥ä»–ä»¬å°±æ‰“ç®—å¼€æºå›é¦ˆå‡ºå»çš„ã€‚</p>\n</blockquote>\n<p>åŒæ—¶ï¼Œç”±äºä¸Šè¿°æåˆ°çš„ V8 å‡çº§ï¼Œç°åœ¨å¯ä»¥æŒ‰ç…§å¯ç”¨å†…å­˜åŠ¨æ€è°ƒæ•´å †å¤§å°äº†ã€‚</p>\n<h2>ESM æ¨¡å—æ–¹æ¡ˆæ›´æ–°</h2>\n<p>ES6 æ¨¡å—ä»ç„¶è¿˜åœ¨å®éªŒé˜¶æ®µï¼Œä¸è¿‡æœ‰äº†æ–°çš„æ–¹å¼ï¼Œå…·ä½“å‚è§<a href=\"https://medium.com/@nodejs/announcing-a-new-experimental-modules-1be8d2d6c2ff\">è¿™ç¯‡æ–‡ç« </a>ã€‚</p>\n<blockquote>\n<p>ç‚¹è¯„ï¼šè®©å­å¼¹å†é£ä¸€ä¼šï¼Œè¯¥ç‰¹æ€§çœŸçš„ä¸æ˜¯ç—›ç‚¹ï¼Œä¸æ€¥ã€‚</p>\n</blockquote>\n<h2>å…¶ä»–æ›´æ–°</h2>\n<ul>\n<li>æ›´å¥½çš„åŸç”Ÿæ¨¡å—æ”¯æŒï¼Œ<a href=\"https://nodejs.org/api/n-api.html#n_api_n_api\">N-API</a>Â å‡çº§ä¸ºç‰ˆæœ¬ 4ï¼Œå¹¶ backport åˆ° Node.js 8.x å’Œ 10.xã€‚è¯¦ç»†å‚è§<a href=\"https://medium.com/the-node-js-collection/new-features-bring-native-add-ons-close-to-being-on-par-with-js-modules-cd4f9b8e4b4\">è¿™ç¯‡æ–‡ç« </a>ã€‚</li>\n<li>TLS å‡çº§ä¸º 1.3ï¼Œ <a href=\"https://developer.ibm.com/blogs/openssl-111-has-landed-in-nodejs-master-and-why-its-important-for-nodejs-lts-releases/\">å¢å¼ºå®‰å…¨åŠŸèƒ½</a>ã€‚</li>\n<li>éšç€ C++ ç¼–è¯‘å™¨çš„æ›´æ–°ï¼Œç°åœ¨è¦æ±‚ <code>GCC 6</code>Â å’Œ <code>glibc 2.17</code>Â ï¼Œå¯¹åº”çš„æ“ä½œç³»ç»Ÿ Win7 å’Œ macOS 10ï¼Œè¯¦ç»†å‚è§<a href=\"https://github.com/nodejs/node/blob/v12.x/BUILDING.md#platform-list\">è¿™ç¯‡æ–‡ç« </a>ã€‚</li>\n</ul>\n<p>ä¸è¿‡ç›®å‰ node-gyp çš„ä¸€äº›åŸç”Ÿæ¨¡å—ä¼šç¼–è¯‘å¤±è´¥ï¼š</p>\n<pre class=\"prettyprint language-bash\"><code>nunjucks@3.2.0 â€º chokidar@2.1.5 â€º fsevents@^1.2.7 optional error: Error: Run &quot;sh -c node install&quot; error, exit code 1\n    at ChildProcess.&lt;anonymous&gt; (&#x2F;Users&#x2F;tz&#x2F;.npm-global&#x2F;lib&#x2F;node_modules&#x2F;tnpm&#x2F;node_modules&#x2F;_runscript@1.3.0@runscript&#x2F;index.js:74:21)\n    at ChildProcess.emit (events.js:196:13)\n    at maybeClose (internal&#x2F;child_process.js:1000:16)\n    at Process.ChildProcess._handle.onexit (internal&#x2F;child_process.js:267:5)\n</code></pre></div>",
      "title": "Node 12 å€¼å¾—å…³æ³¨çš„æ–°ç‰¹æ€§",
      "last_reply_at": "2019-07-12T04:34:56.342Z",
      "good": false,
      "top": true,
      "reply_count": 53,
      "visit_count": 71973,
      "create_at": "2019-04-24T03:36:12.582Z",
      "author": {
        "loginname": "atian25",
        "avatar_url": "https://avatars2.githubusercontent.com/u/227713?v=4&s=120"
      }
    },
    {
      "id": "5bd4772a14e994202cd5bdb7",
      "author_id": "504c28a2e2b845157708cb61",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><p>2018å¹´10æœˆ27æ—¥æ™šä¸Šï¼Œçªç„¶æ”¶åˆ°æœåŠ¡å™¨ä¸èƒ½è®¿é—®çš„å‘Šè­¦é€šçŸ¥ï¼Œæ‹œæ‰˜äº†ç‹¼å” <a href=\"/user/i5ting\">@i5ting</a> å¸®å¿™çœ‹çœ‹ï¼Œç»“æœç™»ä¸ä¸Šä¹Ÿpingä¸é€šã€‚\nåæ¥æ”¶åˆ°çŸ­ä¿¡ï¼Œå‘ç°æ˜¯è¢«ucloudå°äº†ï¼ŒçŸ­ä¿¡å†…å®¹å¦‚ä¸‹ï¼š</p>\n<blockquote>\n<p>ã€UCloudã€‘å°Šæ•¬çš„UCloudç”¨æˆ·ï¼Œæ‚¨çš„IPï¼š123.59.77.142  å­˜åœ¨URL ï¼š<a href=\"https://cnodejs.org/topic/57239bce5a26c4a841ecbf01\">https://cnodejs.org/topic/57239bce5a26c4a841ecbf01</a> ï¼ˆè¯¦ç»†ä¿¡æ¯è¯·æŸ¥çœ‹é‚®ç®±ï¼‰åŒ…å«è¿ç¦å†…å®¹ï¼ˆåŒ…æ‹¬ä½†ä¸é™äºç¿»å¢™ç­‰ï¼‰ï¼Œè¿åäº†å›½å®¶æœ‰å…³æ³•å¾‹æ³•è§„ã€‚ç›®å‰ä¾ä¸»ç®¡å•ä½è¦æ±‚ï¼Œå¯¹æ‚¨çš„IPäºˆä»¥å°åœï¼Œè¯·æ‚¨å°½å¿«å¤„ç†è¿è§„å†…å®¹ã€‚å¾…å¤„ç†å®Œæˆåè¯·è”ç³»æŠ€æœ¯æ”¯æŒé‡æ–°å¼€å¯ä¸šåŠ¡ã€‚[4000188113]</p>\n</blockquote>\n<p>ç„¶åè”ç³»äº†ucloudçš„å®¢æœï¼Œä¸€ä¸‹å°±æ‰“é€šäº†ï¼Œå¯¹æ–¹æ€åº¦æŒºå¥½å¤„ç†é—®é¢˜ä¹Ÿå¿«ã€‚ucloudè¯´æ˜¯è¿è¥å•†é‚£è¾¹å°çš„ï¼Œä¸æ˜¯ä»–ä»¬çš„æ£€æµ‹æœºåˆ¶ã€‚æ‰€ä»¥éœ€è¦è”ç³»è¿è¥å•†è§£å†³ã€‚\nè€ƒè™‘åˆ°å„ä½äº²çˆ±çš„ç½‘å‹ä»¬çš„è¡Œä¸ºæˆ‘æ— æ³•æ§åˆ¶ï¼Œé‚£ä¹ˆä¸€ç›´è·Ÿè¶Šæ¥è¶Šä¸¥æ ¼çš„å®¡æŸ¥ç³»ç»Ÿå¯¹æŠ—åªä¼šè®©è‡ªå·±ç–²æƒ«ï¼Œæ‰€ä»¥æˆ‘å°±ç«™ç‚¹è¿åˆ°å›½å¤–ã€‚æ¥åˆ°äº†aws jpã€‚</p>\n<p>æˆ‘å¤§è‡´æµ‹äº†æµ‹ï¼Œç”µä¿¡å’Œç§»åŠ¨çš„è®¿é—®é€Ÿåº¦éå¸¸å¿«ï¼Œ100msä»¥å†…ï¼Œè”é€šä¼šæ…¢ä¸€ç‚¹ï¼Œ400msä»¥å†…å§ã€‚</p>\n<p>å»ºè®®ç¿»å¢™è®¿é—®ã€‚</p>\n</div>",
      "title": "æœåŠ¡å™¨è¿ç§»è‡³ aws æ—¥æœ¬æœºæˆ¿",
      "last_reply_at": "2019-07-12T02:24:33.508Z",
      "good": false,
      "top": true,
      "reply_count": 200,
      "visit_count": 84139,
      "create_at": "2018-10-27T14:33:14.694Z",
      "author": {
        "loginname": "alsotang",
        "avatar_url": "https://avatars1.githubusercontent.com/u/1147375?v=4&s=120"
      }
    },
    {
      "id": "5d39823d9969a529571d72da",
      "author_id": "5d3980dd9969a529571d72c9",
      "tab": "ask",
      "content": "<div class=\"markdown-text\"><p>blog.js</p>\n<pre class=\"prettyprint language-nodejs\"><code>const mongoose = require(&#x27;mongoose&#x27;)\n\nconst Schema = mongoose.Schema\nconst Category = require(&#x27;.&#x2F;category&#x27;)\nconst User = require(&#x27;.&#x2F;user&#x27;)\n\n\n&#x2F;&#x2F; ä»comment.jså¼•å…¥Comment==========================\nconst Comment = require(&#x27;.&#x2F;comment&#x27;)\n\n\nconst blogSchema = new Schema({\n    category: {\n        type: mongoose.Schema.Types.ObjectId,\n        ref: Category\n    },\n    title: {\n        type: String,\n        require: true\n    },\n    desc: {\n        type: String,\n        require: true\n    },\n    content: {\n        type: String,\n        require: true\n    },\n    add_time: {\n        type: Date,\n        default: new Date()\n    },\n    author: {\n        type: mongoose.Schema.Types.ObjectId,\n        ref: User\n    },\n    view_count: {\n        type: Number,\n        default: 0\n    },\n    comment: {\n        type: mongoose.Schema.Types.ObjectId,\n        ref: Comment\n    }\n})\n\nmodule.exports = Blog = mongoose.model(&#x27;blogs&#x27;, blogSchema)\n</code></pre><p>comment.js</p>\n<pre class=\"prettyprint language-nodejs\"><code>const mongoose = require(&#x27;mongoose&#x27;)\n\n&#x2F;&#x2F; ä»blog.jså¼•å…¥Blog===============================\nconst Blog = require(&#x27;.&#x2F;blog&#x27;)\nconst User = require(&#x27;.&#x2F;user&#x27;)\n\nconst commentSchema = new mongoose.Schema({\n    blog: {\n        type: mongoose.Schema.Types.ObjectId,\n        ref: Blog\n    },\n    content: {\n        type: String,\n        require: true\n    },\n    add_time: {\n        type: Date,\n        default: Date.now\n    },\n    author: {\n        type: mongoose.Schema.Types.ObjectId,\n        ref: User\n    }\n})\n\n\nmodule.exports = Comment = mongoose.model(&#x27;comments&#x27;, commentSchema)\n</code></pre><p>æŠ¥é”™ä¿¡æ¯ï¼šInvalid ref at path â€œblogâ€. Got {}</p>\n</div>",
      "title": "nodejsæ¨¡å—å¾ªç¯å¼•å…¥çš„é—®é¢˜",
      "last_reply_at": "2019-07-27T05:19:43.614Z",
      "good": false,
      "top": false,
      "reply_count": 5,
      "visit_count": 757,
      "create_at": "2019-07-25T10:19:41.464Z",
      "author": {
        "loginname": "123123hgj",
        "avatar_url": "https://avatars0.githubusercontent.com/u/43122596?v=4&s=120"
      }
    },
    {
      "id": "5d3bdd3cb4725a628e269109",
      "author_id": "5307b7865a67a3aa09249b26",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><p>ç³»åˆ—æ–‡ç« ï¼š</p>\n<ul>\n<li><a href=\"https://f-e-d.club/topic/using-certbot-deployment-let-s-encrypt-free-ssl-certificate-implementation-https.article\">ã€Šä½¿ç”¨ Certbot éƒ¨ç½² Letâ€™s Encrypt å…è´¹ SSL è¯ä¹¦å®ç° HTTPSã€‹</a></li>\n<li><a href=\"https://f-e-d.club/topic/use-acme-sh-deployment-let-s-encrypt-by-ali-cloud-dns-generic-domain-https-authentication.article\">ã€Šä½¿ç”¨ acme.sh éƒ¨ç½² Letâ€™s Encrypt é€šè¿‡é˜¿é‡Œäº‘ DNS éªŒè¯æ–¹å¼å®ç°æ³›åŸŸå HTTPSã€‹</a></li>\n</ul>\n<p>æœ¬ç¯‡æ˜¯ç¬¬ä¸‰ç§æ–¹æ³•æ¥è¿›è¡Œ Letâ€™s Encrypt è¯ä¹¦å®šæ—¶ç­¾ç½²ã€‚</p>\n<h1>ä»‹ç» elev</h1>\n<p><a href=\"https://clis.ydr.me/bin/elev\">elev å®˜ç½‘</a>ã€‚</p>\n<p>elev æ˜¯ Easy Letâ€™s Encrypt Visaï¼ˆç®€æ´çš„ Letâ€™s Encrypt ç­¾è¯ï¼‰çš„é¦–å­—æ¯ã€‚</p>\n<p>elev æ˜¯åŸºäºå¼€æºæ¨¡å—è€Œè¿›è¡Œå°è£…çš„ nodejs å‘½ä»¤è¡Œå·¥å…·ï¼Œä¸»è¦å®ç° Letâ€™s Encrypt çš„ æ³›åŸŸå DNS è®°å½•éªŒè¯æ–¹å¼ï¼ˆç›®å‰ä»…æ”¯æŒé˜¿é‡Œäº‘ DNS æœåŠ¡å•†ï¼‰çš„ SSL è¯ä¹¦çš„ç­¾å‘å’Œè‡ªåŠ¨ç»­æœŸã€‚</p>\n<h1>å®‰è£… elev</h1>\n<p>å› ä¸º elev æ˜¯ Node.js å…¨å±€å‘½ä»¤ï¼Œå› æ­¤ä½¿ç”¨ npm å®‰è£…å³å¯ã€‚</p>\n<pre class=\"prettyprint language-bash\"><code>npm install elev --global\n</code></pre><h1>å…¥é—¨ elev</h1>\n<pre class=\"prettyprint language-bash\"><code>âœ  ~ elev\n\n  &#96;7MM&quot;&quot;&quot;YMM  &#96;7MMF&#x27;      &#96;7MM&quot;&quot;&quot;YMM  &#96;7MMF&#x27;   &#96;7MF&#x27;\n    MM    &#96;7    MM          MM    &#96;7    &#96;MA     ,V\n    MM   d      MM          MM   d       VM:   ,V\n    MMmmMM      MM          MMmmMM        MM.  M&#x27;\n    MM   Y  ,   MM      ,   MM   Y  ,     &#96;MM A&#x27;\n    MM     ,M   MM     ,M   MM     ,M      :MM;\n  .JMMmmmmMMM .JMMmmmmMMM .JMMmmmmMMM       VF\n\n  Usages:\n  elev domain                     åˆ—å‡ºå½“å‰å·²é…ç½®çš„åŸŸå\n  elev domain &lt;domain&gt;            æ–°å»ºæˆ–ç¼–è¾‘åŸŸåé…ç½®æ–‡ä»¶\n  elev domain &lt;domain&gt; -r &lt;reference&gt;\n                                  å‚è€ƒæŒ‡å®šåŸŸåè¿›è¡Œæ–°å»ºæˆ–ç¼–è¾‘é…ç½®æ–‡ä»¶\n  elev worker &lt;ID&gt;                æŸ¥çœ‹æŒ‡å®š ID çš„å·¥ä½œè®°å½•\n\n  Commands:\n  domain                          åŸŸåé…ç½®ç›¸å…³\n  visa                            ç­¾å‘ä¸€å¼  Letâ€™s Encrypt æ³›åŸŸåè¯ä¹¦\n  cron                            å®šæ—¶ä»»åŠ¡ç›¸å…³\n  schedule                        å®šæ—¶è®¡åˆ’ç›¸å…³\n  worker                          å®šæ—¶ä»»åŠ¡å·¥ä½œ\n  smtp                            SMTP ç›¸å…³\n  version                         è¾“å‡ºç‰ˆæœ¬å·å¹¶æ£€æŸ¥æ›´æ–°\n\n  Options:\n  --version, -v, -V               print version information\n  --help, -h, -H                  print help information\n</code></pre><p>åŸæ–‡çœ‹è¿™é‡Œ <a href=\"https://f-e-d.club/topic/using-elev-timing-deployment-let's-encrypt-by-ali-cloud-dns-generic-domain-https-ssl-certificate-verification.article\">https://f-e-d.club/topic/using-elev-timing-deployment-letâ€™s-encrypt-by-ali-cloud-dns-generic-domain-https-ssl-certificate-verification.article</a></p>\n</div>",
      "title": "ä½¿ç”¨ elev å®šæ—¶éƒ¨ç½² Let's Encrypt é€šè¿‡é˜¿é‡Œäº‘ DNS éªŒè¯æ–¹å¼å®ç°æ³›åŸŸå HTTPS/SSL è¯ä¹¦",
      "last_reply_at": "2019-07-27T05:12:28.862Z",
      "good": false,
      "top": false,
      "reply_count": 0,
      "visit_count": 170,
      "create_at": "2019-07-27T05:12:28.862Z",
      "author": {
        "loginname": "cloudcome",
        "avatar_url": "https://avatars0.githubusercontent.com/u/3362033?v=4&s=120"
      }
    },
    {
      "id": "5746cdcf991011691ef17b88",
      "author_id": "57329f1c2e11c7a80c33f87a",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><p>expressä½œä¸ºnodejså¹³å°ä¸‹éå¸¸æµè¡Œçš„webæ¡†æ¶ï¼Œç›¸ä¿¡å¤§å®¶éƒ½å¯¹å…¶å·²ç»å¾ˆç†Ÿæ‚‰äº†ï¼Œå¯¹äºexpressçš„ä½¿ç”¨è¿™é‡Œä¸å†å¤šè¯´ï¼Œå¦‚æœ‰éœ€è¦å¯ä»¥ç§»æ­¥åˆ°<a href>www.expressjs.com</a>è‡ªè¡ŒæŸ¥çœ‹expressçš„å®˜æ–¹æ–‡æ¡£ï¼Œä»Šå¤©ä¸»è¦æ˜¯æƒ³è¯´ä¸‹expressçš„è·¯ç”±æœºåˆ¶ã€‚</p>\n<p>æœ€è¿‘æŠ½æ—¶é—´çœ‹äº†ä¸‹expressçš„æºç ï¼Œçœ‹å®Œæºç ä½“ä¼šæœ€æ·±åˆ»çš„è¿˜æ˜¯expressçš„è·¯ç”±æœºåˆ¶ï¼Œæ„Ÿè§‰ææ‡‚äº†expressçš„è·¯ç”±å°±ç®—æ˜¯åŸºæœ¬ææ‡‚äº†expressï¼Œè€Œexpressçš„è·¯ç”±æœºåˆ¶éƒ½æ˜¯routeræ¨¡å—æ¥å®ç°ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œå¯¹expressçš„routeræ¨¡å—å®ç°è¿›è¡Œä¸€ä¸‹ç®€å•çš„æ•´ç†ï¼Œæ‰€æœ‰ç†è§£éƒ½æ¥è‡ªè‡ªå·±å¯¹æºç çš„ç†è§£ï¼Œå¦‚æœ‰ä¸å¯¹çš„åœ°æ–¹ï¼Œè¿˜è¯·å„ä½å¤šå¤šæ‹ç –ã€‚</p>\n<p>å¥½äº†ï¼ŒåºŸè¯ä¸å¤šè¯´äº†ï¼Œè¿›å…¥æ­£é¢˜ï¼Œé¦–å…ˆå…ˆäº†è§£ä¸€ä¸‹expressæºç çš„ç›®å½•ç»“æ„ï¼Œå¦‚ä¸‹å›¾ï¼š\n<img src=\"//static.cnodejs.org/FnuptVMv5TZchESOT0JRT0re7KZ0\" alt=\"express.jpg\">\napplication.jsä¸ºexpressçš„ä¸»æ–‡ä»¶ï¼Œexpress.jså¯¹application.jsè¿›è¡Œäº†åŒ…è£…ï¼Œå¯¹å¤–æä¾›å„ç§APIï¼Œè¿™é‡Œæˆ‘ä»¬ä¸å¤šåšè¯´æ˜ï¼Œæˆ‘ä»¬ä»Šå¤©è¦è¯´çš„å°±æ˜¯routerç›®å½•ä¸‹çš„å†…å®¹ï¼Œexpresså…³äºè·¯ç”±çš„å…·ä½“å®ç°éƒ½æ˜¯ç”±è¿™ä¸ªç›®å½•å®Œæˆã€‚æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸ªç®€å•çš„expressè·¯ç”±çš„ä¾‹å­ï¼š</p>\n<pre class=\"prettyprint\"><code>var app = express();\napp.get(&#x27;&#x2F;hello&#x27;, function(req,res){\n    res.send(&#x27;hello everyone!!!&#x27;); \n}); \n</code></pre><p>ä¸Šè¾¹å°±æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„expressè·¯ç”±çš„ä¾‹å­ï¼Œå°†pathä¸º â€˜/helloâ€™ çš„è¯·æ±‚è·¯ç”±åˆ°å½“å‰çš„å¤„ç†å‡½æ•°ï¼Œå¹¶è¿”å› â€˜hello everyone!!!â€™ ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¥ä¸€èµ·çœ‹çœ‹ï¼Œapp.get()ä½•å®ç°çš„ï¼Œé€šè¿‡æŸ¥çœ‹ä»£ç æˆ‘ä»¬å‘ç°æºç é‡Œå¹¶æ²¡æœ‰app.get()çš„å®ç°ï¼Œä½†ä»”ç»†æ‰¾æ‰¾ä½ ä¼šåœ¨application.jsä¸­å‘ç°å¦‚ä¸‹çš„ä»£ç ï¼š</p>\n<pre class=\"prettyprint\"><code>methods.forEach(function(method){\n  app[method] = function(path){\n    if (method === &#x27;get&#x27; &amp;&amp; arguments.length === 1) {\n      &#x2F;&#x2F; app.get(setting)\n      return this.set(path);\n    }\n\n    this.lazyrouter();\n\n    var route = this._router.route(path);\n    route[method].apply(route, slice.call(arguments, 1));\n    return this;\n  };\n});\n</code></pre><p>(âŠ™oâŠ™)å“¦ï¼Œéšè—çš„å¥½æ·±ï¼ŒåŸæ¥expresså¯¹getï¼Œpostç­‰æ–¹æ³•çš„æ·»åŠ éƒ½æ˜¯åŠ¨æ€çš„ï¼Œmethodsæ¥è‡ª<a href=\"https://www.npmjs.com/package/methods\">methods</a>è¿™ä¸ªæ¨¡å—ï¼Œä»–æä¾›äº†å’Œnodejs  http.METHODS ç›¸ä¼¼çš„ä¸œè¥¿ï¼Œè¿”å›äº†httpåè®®çš„æ‰€æœ‰methodï¼Œè¿™æ ·ä¸€ä¸ªå¾ªç¯æå®šäº†æ‰€æœ‰methodå‡½æ•°çš„å®šä¹‰ï¼Œèµä¸€ä¸ªã€‚</p>\n<p>æ¥ä¸‹æ¥æˆ‘ä»¬ä¸»è¦åˆ†æä¸‹å‡½æ•°å†…éƒ¨çš„å®ç°ï¼Œé¦–å…ˆåˆ¤æ–­å¦‚æœmethodç­‰äºgetï¼Œå¹¶ä¸”å‚æ•°çš„é•¿åº¦æ˜¯1ï¼Œåˆ™ç›´æ¥è¿”å›this.set(path)ï¼Œå¤§å®¶æŸ¥çœ‹expresså®˜ç½‘çš„APIå°±å¯ä»¥å‘ç°ï¼Œapp.get()å‡½æ•°å…¶å®å®ç°äº†ä¸¤ç§åŠŸèƒ½ï¼Œå¦‚æœå‚æ•°é•¿åº¦æ˜¯1ï¼Œåˆ™è¿”å›app.set()å®šä¹‰çš„å˜é‡ï¼Œå¦‚æœå‚æ•°é•¿åº¦å¤§äº1ï¼Œåˆ™è¿›è¡Œè·¯ç”±å¤„ç†ã€‚</p>\n<p>ç»§ç»­å¾€ä¸‹çœ‹ï¼Œ<strong>this.lazyrouter()</strong>ï¼Œä»åå­—æ¥çœ‹ï¼Œå¥½åƒæ˜¯æ‡’åŠ è½½routerï¼Œé‚£æˆ‘ä»¬çœ‹çœ‹æºç ï¼š</p>\n<pre class=\"prettyprint\"><code>app.lazyrouter = function lazyrouter() {\n  if (!this._router) {\n    this._router = new Router({\n      caseSensitive: this.enabled(&#x27;case sensitive routing&#x27;),\n      strict: this.enabled(&#x27;strict routing&#x27;)\n    });\n\n    this._router.use(query(this.get(&#x27;query parser fn&#x27;)));\n    this._router.use(middleware.init(this));\n  }\n};\n</code></pre><p>æœç„¶æ˜¯ï¼Œå¦‚æœ_routerä¸å­˜åœ¨ï¼Œå°±newä¸€ä¸ªRouterå‡ºæ¥ï¼Œè€Œè¿™ä¸ªRouterå°±æ˜¯æˆ‘ä»¬åˆšæ‰åœ¨ç›®å½•ç»“æ„ä¸­çœ‹åˆ°çš„routerç›®å½•ï¼Œä¹Ÿå°±æ˜¯ä»Šå¤©çš„ä¸»è§’Routeræ¨¡å—ã€‚ç»§ç»­ä¸Šè¾¹çš„ä»£ç ï¼ŒåŠ è½½å®Œ_routerä¹‹åï¼Œæ‰§è¡Œäº†**this._router.route(path)**è¿™æ ·ä¸€è¡Œä»£ç ï¼Œé‚£è¿™è¡Œä»£ç æœ‰åšäº†ä»€ä¹ˆå‘¢ï¼Œæˆ‘ä»¬å†ç»§ç»­å¾€ä¸‹æŒ–ï¼Œæˆ‘ä»¬åœ¨routerç›®å½•ä¸‹çš„index.jsä¸­æ‰¾åˆ°äº†å®ƒçš„å®ç°ï¼š</p>\n<pre class=\"prettyprint\"><code>proto.route = function route(path) {\n  var route = new Route(path);\n\n  var layer = new Layer(path, {\n    sensitive: this.caseSensitive,\n    strict: this.strict,\n    end: true\n  }, route.dispatch.bind(route));\n\n  layer.route = route;\n\n  this.stack.push(layer);\n  return route;\n};\n</code></pre><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œnewäº†ä¸€ä¸ªRouteå¯¹è±¡ï¼Œå¹¶ä¸”newäº†ä¸€ä¸ªLayerå¯¹è±¡ï¼Œç„¶åå°†Routeå¯¹è±¡èµ‹å€¼ç»™layer.routeï¼Œæœ€åå°†è¿™ä¸ªLayeræ·»åŠ åˆ°stackæ•°ç»„ä¸­ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬å…ˆä¸å¯¹Layerè¿›è¡Œè¯´æ˜ï¼Œåè¾¹ä¼šæœ‰ä¸“é—¨çš„ä»‹ç»ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹Routeï¼Œé‚£è¿™ä¸ªRouteåˆæ˜¯ä»€ä¹ˆå‘¢ï¼Œå®ƒå’ŒRouteræ¨¡å—æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Œæˆ‘æ¥è¯´ä¸‹æˆ‘çš„ç†è§£ï¼š</p>\n<blockquote>\n<p>Routeæ¨¡å—å¯¹åº”çš„æ˜¯route.jsï¼Œä¸»è¦æ˜¯æ¥å¤„ç†è·¯ç”±ä¿¡æ¯çš„ï¼Œæ¯æ¡è·¯ç”±éƒ½ä¼šç”Ÿæˆä¸€ä¸ªRouteå®ä¾‹ã€‚è€ŒRouteræ¨¡å—å¯¹åº”çš„æ˜¯index.jsï¼ŒRouteræ˜¯ä¸€ä¸ªè·¯ç”±çš„é›†åˆï¼Œåœ¨Routeræ¨¡å—ä¸‹å¯ä»¥å®šä¹‰å¤šä¸ªè·¯ç”±ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªRouteræ¨¡å—ä¼šåŒ…å«å¤šä¸ªRouteæ¨¡å—ã€‚é€šè¿‡ä¸Šè¾¹çš„ä»£ç æˆ‘ä»¬å·²ç»çŸ¥é“ï¼Œæ¯ä¸ªexpressåˆ›å»ºçš„å®ä¾‹éƒ½ä¼šæ‡’åŠ è½½ä¸€ä¸ª_routeræ¥è¿›è¡Œè·¯ç”±å¤„ç†ï¼Œè¿™ä¸ª_routerå°±æ˜¯ä¸€ä¸ªRouteræ¨¡å—ã€‚</p>\n</blockquote>\n<p>ç†è§£äº†Routeå’ŒRouterçš„å…³ç³»ï¼Œæ„Ÿè§‰ä¸€ä¸‹å­æ¸…çˆ½äº†æœ‰æœ¨æœ‰ï¼ŒO(âˆ©_âˆ©)Oå“ˆå“ˆ~~~</p>\n<p>å¥½äº†ï¼Œæˆ‘ä»¬æ¥ç€çœ‹ä»£ç ï¼Œæ‹¿åˆ°routeå¯¹è±¡ä¹‹åï¼Œé€šè¿‡applyçš„æ–¹å¼è°ƒç”¨äº†routeçš„å¯¹åº”methodå‡½æ•°ï¼Œå‡å¦‚æˆ‘ä»¬ç°åœ¨ä½¿ç”¨çš„æ˜¯getå‡½æ•°ï¼Œé‚£ç°åœ¨methodå°±ç­‰äºgetã€‚çœ‹åˆ°è¿™é‡Œå¤§å®¶å°±ä¼šå‘ç°ï¼Œexpresså®ä¾‹åœ¨å¤„ç†è·¯ç”±çš„æ—¶å€™ï¼Œä¼šå…ˆåˆ›å»ºä¸€ä¸ªRouterå¯¹è±¡ï¼Œç„¶åç”¨Routerå¯¹è±¡å’Œå¯¹åº”çš„pathæ¥ç”Ÿæˆä¸€ä¸ªRouteå¯¹è±¡ï¼Œæœ€åç”±Routeå¯¹è±¡æ¥å¤„ç†å…·ä½“çš„è·¯ç”±å®ç°ã€‚</p>\n<p>å¥½äº†ï¼Œé‚£æ¥ä¸‹æ¥æˆ‘ä»¬ç»§ç»­æ·±å…¥ç ”ç©¶ï¼Œçœ‹çœ‹route.methodç©¶ç«Ÿåšäº†ä»€ä¹ˆï¼Œæˆ‘ä»¬æ‰¾åˆ°route.jsæ–‡ä»¶ï¼Œå‘ç°å¦‚ä¸‹çš„ä»£ç ï¼š</p>\n<pre class=\"prettyprint\"><code>methods.forEach(function(method){\n  Route.prototype[method] = function(){\n    var handles = flatten(slice.call(arguments));\n\n    for (var i = 0; i &lt; handles.length; i++) {\n      var handle = handles[i];\n\n      if (typeof handle !== &#x27;function&#x27;) {\n        var type = toString.call(handle);\n        var msg = &#x27;Route.&#x27; + method + &#x27;() requires callback functions but got a &#x27; + type;\n        throw new Error(msg);\n      }\n\n      debug(&#x27;%s %s&#x27;, method, this.path);\n\n      var layer = Layer(&#x27;&#x2F;&#x27;, {}, handle);\n      layer.method = method;\n\n      this.methods[method] = true;\n      this.stack.push(layer);\n    }\n\n    return this;\n  };\n});\n</code></pre><p>å•Šå•Šå•Šï¼ŒåŸæ¥routeå’Œapplicationè¿ç”¨äº†åŒæ ·çš„æŠ€å·§ï¼Œé€šè¿‡å¾ªç¯methodsæ¥åŠ¨æ€æ·»åŠ methodå‡½æ•°ï¼Œæˆ‘ä»¬ç›´æ¥çœ‹å‡½æ•°å†…éƒ¨å®ç°ï¼Œé¦–å…ˆé€šè¿‡å…¥å‚è·å–åˆ°handlesï¼Œè¿™é‡Œçš„handleså°±æ˜¯æˆ‘ä»¬å®šä¹‰çš„è·¯ç”±ä¸­é—´ä»¶å‡½æ•°ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç»™ä¸€ä¸ªè·¯ç”±æ·»åŠ å¤šä¸ªä¸­é—´ä»¶å‡½æ•°ã€‚æ¥ä¸‹æ¥å¾ªç¯handlesï¼Œåœ¨æ¯ä¸ªå¾ªç¯ä¸­åˆ©ç”¨handleæ¥åˆ›å»ºä¸€ä¸ªLayerå¯¹è±¡ï¼Œç„¶åå°†Layerå¯¹è±¡pushåˆ°stackä¸­å»ï¼Œè¿™ä¸ªstackå…¶å®æ˜¯Routeå†…éƒ¨ç»´æŠ¤çš„ä¸€ä¸ªæ•°ç»„ï¼Œç”¨æ¥å­˜æ”¾æ‰€æœ‰çš„Layerå¯¹è±¡ã€‚ç°åœ¨ä½ ä¸€å®šæƒ³è¿™é“è¿™ä¸ªLayeråˆ°åº•æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Œé‚£æˆ‘ä»¬ç»§ç»­å¾€ä¸‹çœ‹ï¼Œçœ‹çœ‹layer.jsçš„æºä»£ç ï¼š</p>\n<pre class=\"prettyprint\"><code>function Layer(path, options, fn) {\n  if (!(this instanceof Layer)) {\n    return new Layer(path, options, fn);\n  }\n\n  debug(&#x27;new %s&#x27;, path);\n  var opts = options || {};\n\n  this.handle = fn;\n  this.name = fn.name || &#x27;&lt;anonymous&gt;&#x27;;\n  this.params = undefined;\n  this.path = undefined;\n  this.regexp = pathRegexp(path, this.keys = [], opts);\n\n  if (path === &#x27;&#x2F;&#x27; &amp;&amp; opts.end === false) {\n    this.regexp.fast_slash = true;\n  }\n}\n</code></pre><p>ä¸Šè¾¹æ˜¯Layerçš„æ„é€ å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™é‡Œå®šä¹‰handleï¼Œparamsï¼Œpathå’Œregexpç­‰å‡ ä¸ªä¸»è¦çš„å±æ€§ï¼š</p>\n<ol>\n<li>å…¶ä¸­æœ€é‡è¦çš„å°±æ˜¯handleï¼Œå®ƒå°±æ˜¯æˆ‘ä»¬åˆšåˆšåœ¨routeä¸­åˆ›å»ºLayerå¯¹è±¡ä¼ å…¥çš„ä¸­é—´ä»¶å‡½æ•°ã€‚</li>\n<li>paramså…¶å®å°±æ˜¯req.paramsï¼Œè‡³äºå¦‚ä½•å®ç°çš„æˆ‘ä»¬å¯ä»¥ä»¥åå†åšæ¢è®¨ï¼Œä»Šå¤©å…ˆä¸åšè¯´æ˜ã€‚</li>\n<li>pathå°±æ˜¯æˆ‘ä»¬å®šä¹‰è·¯ç”±æ—¶ä¼ å…¥çš„pathã€‚</li>\n<li>regexpå¯¹äºLayeræ¥è¯´æ˜¯æ¯”è¾ƒé‡è¦çš„ä¸€ä¸ªå±æ€§ï¼Œå› ä¸ºä¸‹è¾¹è¿›è¡Œè·¯ç”±åŒ¹é…çš„æ—¶å€™å°±æ˜¯é å®ƒæ¥æå®šçš„ï¼Œè€Œå®ƒçš„å€¼æ˜¯ç”±pathRegexpå¾—æ¥çš„ï¼Œå…¶å®è¿™ä¸ªpathRegexpå¯¹åº”çš„æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹æ¨¡å—<a href=\"https://www.npmjs.com/package/path-to-regexp\">path-to-regexp</a>ï¼Œå®ƒçš„åŠŸèƒ½æ˜¯å°†pathè½¬æ¢æˆregexpï¼Œå…·ä½“ç”¨æ³•å¤§å®¶å¯ä»¥è‡ªè¡ŒæŸ¥çœ‹ã€‚</li>\n</ol>\n<p>çœ‹å®Œå±æ€§ï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹Layeræœ‰ä»€ä¹ˆæ–¹æ³•ï¼š</p>\n<pre class=\"prettyprint\"><code>Layer.prototype.match = function match(path) {\n  if (path == null) {\n    &#x2F;&#x2F; no path, nothing matches\n    this.params = undefined;\n    this.path = undefined;\n    return false;\n  }\n\n  if (this.regexp.fast_slash) {\n    &#x2F;&#x2F; fast path non-ending match for &#x2F; (everything matches)\n    this.params = {};\n    this.path = &#x27;&#x27;;\n    return true;\n  }\n\n  var m = this.regexp.exec(path);\n\n  if (!m) {\n    this.params = undefined;\n    this.path = undefined;\n    return false;\n  }\n\n  &#x2F;&#x2F; store values\n  this.params = {};\n  this.path = m[0];\n\n  var keys = this.keys;\n  var params = this.params;\n\n  for (var i = 1; i &lt; m.length; i++) {\n    var key = keys[i - 1];\n    var prop = key.name;\n    var val = decode_param(m[i]);\n\n    if (val !== undefined || !(hasOwnProperty.call(params, prop))) {\n      params[prop] = val;\n    }\n  }\n\n  return true;\n};\n</code></pre><p>matchå‡½æ•°ä¸»è¦ç”¨æ¥åŒ¹é…pathçš„ï¼Œå½“æˆ‘ä»¬å‘expresså‘é€ä¸€ä¸ªhttpè¯·æ±‚æ—¶ï¼Œå½“å‰è¯·æ±‚å¯¹åº”çš„æ˜¯å“ªä¸ªè·¯ç”±ï¼Œå°±æ˜¯é€šè¿‡è¿™ä¸ªmatchå‡½æ•°æ¥åˆ¤æ–­çš„ï¼Œå¦‚æœpathä¸­å¸¦æœ‰å‚æ•°ï¼Œmatchè¿˜ä¼šæŠŠå‚æ•°æå–å‡ºæ¥èµ‹å€¼ç»™paramsï¼Œæ‰€ä»¥è¯´matchæ˜¯æ•´ä¸ªè·¯ç”±ä¸­å¾ˆé‡è¦çš„ä¸€ç‚¹ã€‚</p>\n<pre class=\"prettyprint\"><code>Layer.prototype.handle_error = function handle_error(error, req, res, next) {\n  var fn = this.handle;\n\n  if (fn.length !== 4) {\n    &#x2F;&#x2F; not a standard error handler\n    return next(error);\n  }\n\n  try {\n    fn(error, req, res, next);\n  } catch (err) {\n    next(err);\n  }\n};\n</code></pre><p>è¿™ä¸ªæ˜¯é”™è¯¯å¤„ç†å‡½æ•°ï¼Œä¸“é—¨ç”¨æ¥å¤„ç†é”™è¯¯çš„ã€‚</p>\n<pre class=\"prettyprint\"><code>Layer.prototype.handle_request = function handle(req, res, next) {\n  var fn = this.handle;\n\n  if (fn.length &gt; 3) {\n    &#x2F;&#x2F; not a standard request handler\n    return next();\n  }\n\n  try {\n    fn(req, res, next);\n  } catch (err) {\n    next(err);\n  }\n};\n</code></pre><p>ä»ä¸Šè¾¹çš„ä»£ç æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è°ƒç”¨äº†fnï¼Œè€Œè¿™ä¸ªfnå°±æ˜¯layerçš„handleå±æ€§ï¼Œå°±æ˜¯æˆ‘ä»¬å®šä¹‰è·¯ç”±æ—¶ä¼ å…¥çš„è·¯ç”±ä¸­é—´ä»¶ï¼Œåˆ°è¿™é‡Œæˆ‘ä»¬æ€»ç®—æ‰¾åˆ°äº†æˆ‘ä»¬çš„è·¯ç”±ä¸­é—´ä»¶è¢«æ‰§è¡Œçš„åœ°æ–¹ï¼Œæ˜¯ä¸æ˜¯å¾ˆå…´å¥‹ã€‚å¥½äº†ï¼Œåˆ°è¿™é‡Œæˆ‘ä»¬å·²ç»çœ‹å®Œäº†Layerçš„ä»£ç ï¼Œä½†Layeråˆ°åº•æ˜¯åšä»€ä¹ˆçš„å‘¢ï¼Œå®ƒå’ŒRouteä¹‹é—´åˆæœ‰ä»€ä¹ˆåƒä¸ä¸‡ç¼•çš„è”ç³»å‘¢ï¼Œè¯´è¯´æˆ‘çš„ç†è§£ï¼š</p>\n<blockquote>\n<p>æ¯ä¸€ä¸ªLayerå¯¹åº”ä¸€ä¸ªä¸­é—´ä»¶å‡½æ•°ï¼ŒLayerå­˜å‚¨äº†æ¯ä¸ªè·¯ç”±çš„pathå’Œhandleç­‰ä¿¡æ¯ï¼Œå¹¶ä¸”å®ç°äº†matchå’Œhandleçš„åŠŸèƒ½ã€‚è€Œä»å‰è¾¹æˆ‘ä»¬å·²ç»çŸ¥é“ï¼Œæ¯ä¸ªRouteéƒ½ä¼šç»´æŠ¤ä¸€ä¸ªLayeræ•°ç»„ï¼Œæ‰€æœ‰å¯ä»¥å‘ç°Routeå’ŒLayeræ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ï¼Œæ¯ä¸ªRouteä»£è¡¨ä¸€ä¸ªè·¯ç”±ï¼Œè€Œæ¯ä¸ªLayerå¯¹åº”çš„æ˜¯è·¯ç”±çš„æ¯ä¸€ä¸ªä¸­é—´ä»¶å‡½æ•°ã€‚</p>\n</blockquote>\n<p>è®²å®Œäº†Routeå’ŒLayerçš„å…³ç³»ï¼Œæˆ‘ä»¬å†æ¥å›å¤´çœ‹çœ‹Routerå’ŒLayerçš„å…³ç³»ï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹index.jsä¸­prop.routeçš„ä»£ç ï¼š</p>\n<pre class=\"prettyprint\"><code>proto.route = function route(path) {\n  var route = new Route(path);\n\n  var layer = new Layer(path, {\n    sensitive: this.caseSensitive,\n    strict: this.strict,\n    end: true\n  }, route.dispatch.bind(route));\n\n  layer.route = route;\n\n  this.stack.push(layer);\n  return route;\n};\n</code></pre><p>ä»ä»£ç æˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ¥Routeræ¯æ¬¡æ·»åŠ ä¸€ä¸ªrouteï¼Œéƒ½ä¼šæŠŠrouteåŒ…è£…åˆ°layerä¸­ï¼Œå¹¶ä¸”å°†layeræ·»åŠ åˆ°è‡ªå·±çš„stackä¸­ï¼Œé‚£ä¸ºä»€ä¹ˆè¦æŠŠrouteåŒ…è£…åˆ°layerä¸­å‘¢ï¼Œå‰è¾¹æˆ‘ä»¬å·²ç»ä»”ç»†ç ”ç©¶äº†Layeræ¨¡å—çš„ä»£ç ï¼Œæˆ‘ä»¬å‘ç°Layerå…·æœ‰matchå’Œhandleçš„åŠŸèƒ½ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡Layerçš„matchæ¥è¿›è¡Œrouteçš„åŒ¹é…äº†ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªå…³é”®ç‚¹æˆ‘ä»¬éœ€è¦ç‰¹åˆ«è®²è§£ä¸‹ï¼Œä¸Šè¾¹çš„ä»£ç ä¸­åœ¨åˆ›å»ºLayerå¯¹è±¡çš„æ—¶å€™ä¼ å…¥çš„handleå‡½æ•°ä¸º<strong>route.dispatch.bind(route)</strong>ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹route.jsä¸­çš„route.dispatchï¼š</p>\n<pre class=\"prettyprint\"><code>Route.prototype.dispatch = function dispatch(req, res, done) {\n  var idx = 0;\n  var stack = this.stack;\n  if (stack.length === 0) {\n    return done();\n  }\n\n  var method = req.method.toLowerCase();\n  if (method === &#x27;head&#x27; &amp;&amp; !this.methods[&#x27;head&#x27;]) {\n    method = &#x27;get&#x27;;\n  }\n\n  req.route = this;\n\n  next();\n\n  function next(err) {\n    if (err &amp;&amp; err === &#x27;route&#x27;) {\n      return done();\n    }\n\n    var layer = stack[idx++];\n    if (!layer) {\n      return done(err);\n    }\n\n    if (layer.method &amp;&amp; layer.method !== method) {\n      return next(err);\n    }\n\n    if (err) {\n      layer.handle_error(err, req, res, next);\n    } else {\n      layer.handle_request(req, res, next);\n    }\n  }\n};\n</code></pre><p>æˆ‘ä»¬å‘ç°dispatchä¸­é€šè¿‡next()è·å–stackä¸­çš„æ¯ä¸€ä¸ªlayeræ¥æ‰§è¡Œç›¸åº”çš„è·¯ç”±ä¸­é—´ä»¶ï¼Œè¿™æ ·å°±ä¿è¯äº†æˆ‘ä»¬å®šä¹‰åœ¨è·¯ç”±ä¸Šçš„å¤šä¸ªä¸­é—´ä»¶å‡½æ•°è¢«æŒ‰ç…§å®šä¹‰çš„é¡ºåºä¾æ¬¡æ‰§è¡Œã€‚åˆ°è¿™é‡Œæˆ‘ä»¬å·²ç»çŸ¥é“äº†å•ä¸ªè·¯ç”±æ˜¯è¢«å¦‚ä½•æ‰§è¡Œçš„ï¼Œé‚£æˆ‘ä»¬å®šä¹‰çš„å¤šä¸ªè·¯ç”±ä¹‹é—´åˆæ˜¯å¦‚ä½•è¢«ä¾æ¬¡æ‰§è¡Œçš„å‘¢ï¼Œç°åœ¨æˆ‘ä»¬æ¥çœ‹çœ‹index.jsä¸­çš„handleå‡½æ•°ï¼š</p>\n<pre class=\"prettyprint\"><code>proto.handle = function handle(req, res, out) {\n\n  &#x2F;&#x2F; middleware and routes\n  var stack = self.stack;\n\n  next();\n\n  function next(err) {\n\n    &#x2F;&#x2F; find next matching layer\n    var layer;\n    var match;\n    var route;\n\n    while (match !== true &amp;&amp; idx &lt; stack.length) {\n      layer = stack[idx++];\n      match = matchLayer(layer, path);\n      route = layer.route;\n      \n      if (match !== true) {\n        continue;\n      }\n\n      if (!route) {\n        &#x2F;&#x2F; process non-route handlers normally\n        continue;\n      }\n    }\n\n    &#x2F;&#x2F; no match\n    if (match !== true) {\n      return done(layerError);\n    }\n\n    &#x2F;&#x2F; this should be done for the layer\n    self.process_params(layer, paramcalled, req, res, function (err) {\n      if (err) {\n        return next(layerError || err);\n      }\n\n      if (route) {\n        return layer.handle_request(req, res, next);\n      }\n\n      trim_prefix(layer, layerError, layerPath, path);\n    });\n  }\n};\n</code></pre><p>ä¸Šè¾¹çš„ä»£ç æˆ‘è¿›è¡Œäº†å¤„ç†ï¼Œåˆ é™¤äº†ä¸€äº›é€»è¾‘ï¼Œåªç•™ä¸‹å…³é”®éƒ¨åˆ†ã€‚ä»ä¸Šè¾¹çš„ä»£ç æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œè¿™é‡Œä¹Ÿæ˜¯åˆ©ç”¨next()ï¼Œæ¥å¤„ç†stackä¸­çš„æ¯ä¸€ä¸ªLayerï¼Œè¿™é‡Œçš„stackæ˜¯Routerçš„stackï¼Œstackä¸­å­˜è´®äº†å¤šä¸ªrouteå¯¹åº”çš„layerï¼Œè·å–åˆ°æ¯ä¸ªlayerå¯¹è±¡ä¹‹åï¼Œç”¨è¯·æ±‚çš„pathä¸layerè¿›è¡ŒåŒ¹é…ï¼Œæ­¤å¤„åŒ¹é…ç”¨çš„æ˜¯layer.matchï¼Œå¦‚æœèƒ½åŒ¹é…åˆ°å¯¹åº”çš„layerï¼Œåˆ™è·å¾—layer.routeï¼Œå¦‚æœrouteä¸ä¸ºç©ºåˆ™æ‰§è¡Œå¯¹åº”çš„<strong>layer.handle_request()</strong>ï¼Œå¦‚æœrouteä¸ºç©ºè¯´æ˜è¿™ä¸ªlayeræ˜¯é€šè¿‡use()æ·»åŠ çš„éè·¯ç”±ä¸­é—´ä»¶ï¼Œéœ€è¦ç‰¹åˆ«è¯´æ˜çš„æ˜¯ï¼Œå¦‚æœé€šè¿‡use()æ·»åŠ çš„éè·¯ç”±ä¸­é—´ä»¶æ²¡æœ‰æŒ‡å®špathï¼Œåˆ™ä¼šåœ¨layer.matchä¸­é»˜è®¤è¿”å›trueï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ²¡æœ‰æŒ‡å®špathçš„éè·¯ç”±ä¸­é—´ä»¶ä¼šåŒ¹é…æ‰€æœ‰çš„httpè¯·æ±‚ã€‚</p>\n<p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬åŸºæœ¬å·²ç»è¯´æ˜äº†routerç›¸å…³çš„æ‰€æœ‰å†…å®¹ï¼Œæƒ³å¿…çœ‹åˆ°è¿™é‡Œä½ ä¸€å®šä¼šæœ‰ç‚¹æ™•ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥æ¥é‡æ–°æ¢³ç†ä¸€ä¸‹ã€‚çœ‹çœ‹expressç©¶ç«Ÿæ˜¯å¦‚ä½•å¯¹httpè¯·æ±‚è¿›è¡Œè·¯ç”±çš„ã€‚</p>\n<p>å½“å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªhttpè¯·æ±‚åï¼Œä¼šå…ˆè¿›å…¥expresså®ä¾‹å¯¹è±¡å¯¹åº”çš„router.handleå‡½æ•°ä¸­ï¼Œrouter.handleå‡½æ•°ä¼šé€šè¿‡next()éå†stackä¸­çš„æ¯ä¸€ä¸ªlayerè¿›è¡Œmatchï¼Œå¦‚æœmatchè¿”å›trueï¼Œåˆ™è·å–layer.routeï¼Œæ‰§è¡Œroute.dispatchå‡½æ•°ï¼Œroute.dispatchåŒæ ·æ˜¯é€šè¿‡next()éå†stackä¸­çš„æ¯ä¸€ä¸ªlayerï¼Œç„¶åæ‰§è¡Œlayer.handle_requestï¼Œä¹Ÿå°±æ˜¯è°ƒç”¨ä¸­é—´ä»¶å‡½æ•°ã€‚ç›´åˆ°æ‰€æœ‰çš„ä¸­é—´ä»¶å‡½æ•°è¢«æ‰§è¡Œå®Œæ¯•ï¼Œæ•´ä¸ªè·¯ç”±å¤„ç†ç»“æŸã€‚</p>\n</div>",
      "title": "expressæºç åˆ†æä¹‹Router",
      "last_reply_at": "2019-07-27T04:44:16.459Z",
      "good": true,
      "top": false,
      "reply_count": 17,
      "visit_count": 17767,
      "create_at": "2016-05-26T10:19:59.631Z",
      "author": {
        "loginname": "leijianning",
        "avatar_url": "https://avatars2.githubusercontent.com/u/14830812?v=4&s=120"
      }
    },
    {
      "id": "5d3ac164b4725a628e268eff",
      "author_id": "5ad86092a7d228c16b987042",
      "tab": "ask",
      "content": "<div class=\"markdown-text\"><p>ä½¿ç”¨NodeåšæœåŠ¡ç«¯å¼€å‘ä¹Ÿä¸¤å¹´å¤šäº†ï¼Œæœ€è¿‘æœ‰äº›ç–‘æƒ‘ğŸ¤”\n1ã€å¤§å®¶éƒ½è¯´Nodeçš„å‘å±•å‰æ™¯ä¸é”™ï¼Œä½†æ˜¯çœ‹åˆ°å¤§å¤šæ‹›è˜Nodeçš„éƒ½åªæ˜¯æŒ‚ä¸ªNodeçš„titleï¼Œå®é™…æ‹›è˜çš„æ˜¯å‰ç«¯æˆ–è€…å…¨æ ˆï¼Œæ‹›NodeæœåŠ¡ç«¯çš„åå°‘ï¼Œå¦‚æœæƒ³ä½¿ç”¨NodeåšæœåŠ¡ç«¯å¼€å‘ï¼Œå…·ä½“è¯¥æ€æ ·è§„åˆ’ä¸€ä¸‹åç»­çš„å­¦ä¹ è·¯å¾„ï¼Ÿ\n2ã€æœ€è¿‘çœ‹äº†ä¸‹å¤§å‚çš„æ‹›è˜ï¼ŒåŸºæœ¬è¿˜æ˜¯c++ã€javaï¼Œæœ‰å¤§å‚æ‹›NodeæœåŠ¡ç«¯å¼€å‘å—ï¼Ÿ\n3ã€Nodeçš„å®šä½åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</p>\n</div>",
      "title": "NodeæœåŠ¡ç«¯è¯¥æ€æ ·è§„åˆ’æœªæ¥çš„èŒä¸šæ–¹å‘ï¼Ÿ",
      "last_reply_at": "2019-07-27T03:26:54.997Z",
      "good": false,
      "top": false,
      "reply_count": 4,
      "visit_count": 474,
      "create_at": "2019-07-26T09:01:24.618Z",
      "author": {
        "loginname": "dingyuanwu",
        "avatar_url": "https://avatars0.githubusercontent.com/u/27721756?v=4&s=120"
      }
    },
    {
      "id": "5d351747b2b9222961dacd54",
      "author_id": "5c05dd981c62d8334935059c",
      "tab": "ask",
      "content": "<div class=\"markdown-text\"><p>æœ¬äººæƒ³è¯•ç€ç”¨ Nest.js + MongoDB æ¥å†™ä¸€äº›é¡¹ç›®ï¼Œä½†æ˜¯ç™¾åº¦å’ŒGoogleäº†ä¸€ä¸‹ï¼Œå…³äºè¿™ä¸ªæ¡†æ¶çš„ä¸­æ–‡æ–‡ç« æœ‰ç‚¹å°‘ã€‚</p>\n</div>",
      "title": "Nest.js å›½å†…ç”¨çš„äººå¤šå—ï¼Ÿ",
      "last_reply_at": "2019-07-27T02:08:47.495Z",
      "good": false,
      "top": false,
      "reply_count": 18,
      "visit_count": 1665,
      "create_at": "2019-07-22T01:54:15.965Z",
      "author": {
        "loginname": "WuYinMan",
        "avatar_url": "https://avatars2.githubusercontent.com/u/28140607?v=4&s=120"
      }
    },
    {
      "id": "5d2bdca68a8bf909209ce406",
      "author_id": "5b0eaaf38a4f51e140d9437d",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><p>æœ¬ç¯‡ä¸»è¦ä»‹ç»äº† Node.js å¦‚ä½•ä¸ Consul è¿›è¡Œé›†æˆï¼ŒConsul åªæ˜¯æœåŠ¡æ³¨å†Œçš„ä¸€ç§å®ç°ï¼Œè¿˜æœ‰å…¶å®ƒçš„ä¾‹å¦‚ Zookeeperã€Etcd ç­‰ï¼ŒæœåŠ¡æ³¨å†Œå‘ç°åœ¨å¾®æœåŠ¡æ¶æ„ä¸­æ‰®æ¼”è¿™ä¸€ä¸ªé‡è¦çš„è§’è‰²ï¼Œä¼´éšç€æœåŠ¡çš„å¤§é‡å‡ºç°ï¼ŒæœåŠ¡ä¸æœåŠ¡ä¹‹é—´çš„é…ç½®ç®¡ç†ã€è¿ç»´ç®¡ç†ä¹Ÿå˜çš„éš¾ä»¥ç»´æŠ¤ï¼Œé€šè¿‡ Consul å¯ä»¥è§£å†³è¿™äº›é—®é¢˜ï¼Œå®ç°æœåŠ¡æ²»ç†ã€æœåŠ¡ç›‘æ§ã€‚</p>\n<p>å…³äº Consul çš„æ›´å¤šçŸ¥è¯†ç‚¹ä¸åœ¨è¿™é‡Œèµ˜è¿°ï¼Œä½†æ˜¯åœ¨å­¦ä¹ æœ¬èŠ‚ä¹‹å‰è¿˜æ˜¯å¸Œæœ›æ‚¨èƒ½å…ˆäº†è§£ä¸‹ï¼Œè¯·ç§»æ­¥æˆ‘ä¹‹å‰å†™çš„ <a href=\"https://www.nodejs.red/#/microservice/consul\">å¾®æœåŠ¡æœåŠ¡æ³¨å†Œå‘ç°ä¹‹ Consul ç³»åˆ—æ–‡ç« </a>ã€‚</p>\n<h2>åˆå§‹åŒ– Consul å®¢æˆ·ç«¯</h2>\n<blockquote>\n<p>åˆå§‹åŒ–ä¸€ä¸ª Consul å®¢æˆ·ç«¯ï¼Œå…³äº Node.js ä¸­çš„ Consul å®¢æˆ·ç«¯ä»¥ä¸‹é¡¹ç›®ä½¿ç”¨ node-consul æ¨¡å—ã€‚</p>\n</blockquote>\n<p><strong>æ ¸å¿ƒé…ç½®è¯´æ˜</strong></p>\n<ul>\n<li>host (String, default: 127.0.0.1): é…ç½® Consul åœ°å€</li>\n<li>port (Integer, default: 8500): é…ç½® Consul ç«¯å£</li>\n<li>secure (Boolean, default: false): å¯ç”¨ HTTPS</li>\n<li>promisify (Boolean|Function, optional): å¯åŠ¨ Promise é£æ ¼ï¼Œé»˜è®¤ä¸º Callback</li>\n</ul>\n<p><strong>ç¤ºä¾‹</strong></p>\n<pre class=\"prettyprint language-js\"><code>const Consul = require(&#x27;consul&#x27;);\n\nconst consul = new Consul({\n    host: &#x27;192.168.6.128&#x27;,\n    port: 8500,\n    promisify: true,\n});\n</code></pre><h2>æœåŠ¡æ³¨å†Œä¸å¥åº·æ£€æŸ¥</h2>\n<blockquote>\n<p>æ³¨å†Œä¸€ä¸ªæœåŠ¡å¹¶å¯åŠ¨å¥åº·æ£€æŸ¥</p>\n</blockquote>\n<p><strong>æ ¸å¿ƒé…ç½®è¯´æ˜</strong></p>\n<ul>\n<li>name (String): æ³¨å†Œçš„æœåŠ¡åç§°</li>\n<li>id (String, optional): æœåŠ¡æ³¨å†Œæ ‡è¯†</li>\n<li>tags (String[], optional): æœåŠ¡æ ‡ç­¾</li>\n<li>address (String, optional): éœ€è¦æ³¨å†Œçš„æœåŠ¡åœ°å€ï¼ˆå®¢æˆ·ç«¯ï¼‰</li>\n<li>port (Integer, optional): éœ€è¦æ³¨å†Œçš„æœåŠ¡ç«¯å£ï¼ˆå®¢æˆ·ç«¯ï¼‰</li>\n<li>check (Object, optional): æœåŠ¡çš„å¥åº·æ£€æŸ¥æ ¸å¿ƒå‚æ•°å¦‚ä¸‹\n<ul>\n<li>http (String): å¥åº·æ£€æŸ¥è·¯å¾„, interval å‚æ•°ä¸ºå¿…é¡»è®¾ç½®</li>\n<li>interval (String): å¥åº·æ£€æŸ¥é¢‘ç‡</li>\n<li>timeout (String, optional): å¥åº·æ£€æŸ¥è¶…æ—¶æ—¶é—´</li>\n</ul>\n</li>\n<li>checks (Object[], optional): å¦‚æœæœ‰å¤šä¸ªæ£€æŸ¥çš„è·¯å¾„ï¼Œå¯é‡‡ç”¨å¯¹è±¡æ•°ç»„å½¢å¼ï¼Œå‚æ•°å‚ç…§ä¸Šé¢çš„ check</li>\n</ul>\n<p><strong>ç®€å•ç¤ºä¾‹</strong></p>\n<pre class=\"prettyprint language-js\"><code>consul.agent.service.register({\n    name: serviceName,\n    address: &#x27;192.168.20.193&#x27;,\n    port: 3000,\n    check: {\n        http: &#x27;http:&#x2F;&#x2F;192.168.20.193:3000&#x2F;health&#x27;,\n        interval: &#x27;10s&#x27;,\n        timeout: &#x27;5s&#x27;,\n    }\n}, function(err, result) {\n    if (err) {\n        console.error(err);\n        throw err;\n    }\n\n    console.log(serviceName + &#x27; æ³¨å†ŒæˆåŠŸï¼&#x27;);\n})\n</code></pre><h2>é…ç½®Consulç®¡ç†æ§åˆ¶å°</h2>\n<p>Consul æä¾›äº† Key/Value å­˜å‚¨ï¼Œå¯ä»¥åšä¸ºæœåŠ¡çš„é…ç½®ä¸­å¿ƒï¼Œå¹¶ä¸”æä¾›äº† JSONã€YAMLã€HCL ä¸‰ç§æ ¼å¼ï¼Œåœ¨æœ€æ—©çš„ Consul ç‰ˆæœ¬ä¸­åªæœ‰ä¸€ç§ JSON æ ¼å¼ã€‚</p>\n<p>ä»¥ä¸‹æ˜¯æˆ‘ä¸º Consul ç®¡æ§å°é…ç½®çš„æ•°æ®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>\n<p><img src=\"//img.mukewang.com/5d273c1800011efc23081138.png\" alt=\"å›¾ç‰‡æè¿°\"></p>\n<h2>æœåŠ¡é…ç½®ä¸­å¿ƒå®ç°</h2>\n<p>Consul çš„ Key/Value åŠŸèƒ½å¯ä»¥åšä¸ºæœåŠ¡çš„é…ç½®ä¸­å¿ƒï¼Œå¯¹äºé¡¹ç›®ä¸­ä¸€äº›å¯å˜åŒ–çš„å‚æ•°ä¿¡æ¯ï¼Œå¯é…ç½®åœ¨ Consul ä¸­ï¼Œè¿™æ ·å½“æ•°æ®æ”¹å˜æ—¶å€™ä¸ç”¨å› ä¸ºé…ç½®çš„æ›´æ”¹è€Œå¯¼è‡´é¡¹ç›®è¿˜è¦é‡æ–°å‘å¸ƒ</p>\n<p><strong>è·å–é…ç½®ä¿¡æ¯</strong></p>\n<p>è¿™ä¸ª Key ä¸ºæˆ‘ä»¬é…ç½®çš„è·¯å¾„ï¼Œä¾‹å¦‚æˆ‘è¦è·å–ä¸Šé¢é…ç½®çš„ User æ•°æ®ï¼ŒKey å°±ä¸º â€˜develop/userâ€™</p>\n<pre class=\"prettyprint language-js\"><code>consul.kv.get(key)\n</code></pre><p><strong>æ›´æ–°é…ç½®ä¿¡æ¯</strong></p>\n<ul>\n<li>key (String): æ›´æ–°çš„è·¯å¾„ï¼Œä¾‹å¦‚ â€˜develop/userâ€™</li>\n<li>value (String|Buffer): æ›´æ–°çš„æ•°æ®ä¿¡æ¯</li>\n</ul>\n<p>æ³¨æ„ï¼šå¦‚æœæˆ‘ä»¬è¦æ›´æ–° JSON ä¸­çš„æŸä¸ªå­—æ®µï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦å…ˆé€šè¿‡ consul.kv.get è¯»å–åˆ° JSON å¯¹è±¡ï¼Œç¨‹åºå¤„ç†ä¹‹åï¼Œåšä¸º set çš„ç¬¬äºŒä¸ªå‚æ•°è¿›è¡Œä¼ é€’æ›´æ–°ã€‚</p>\n<pre class=\"prettyprint language-js\"><code>consul.kv.set(&#x27;develop&#x2F;user&#x27;, JSON.stringify(user))\n</code></pre><p><strong>HTTP API è°ƒç”¨</strong></p>\n<p>è¿˜å¯ä»¥ç›´æ¥é€šè¿‡ HTTP API æ¥å£ç›´æ¥è°ƒç”¨ï¼Œä¾‹å¦‚ï¼š<a href=\"http://192.168.6.128:8500/v1/kv/develop/user?raw%EF%BC%8C%E5%A6%82%E6%9E%9C%E4%BD%A0%E5%8F%AA%E6%83%B3%E7%94%A8\">http://192.168.6.128:8500/v1/kv/develop/user?rawï¼Œå¦‚æœä½ åªæƒ³ç”¨</a> Consul åšä¸ºé…ç½®ä¸­å¿ƒï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç®€å•çš„ HTTP API è°ƒç”¨å°†æ•°æ®å­˜å…¥æœ¬åœ°å®šæ—¶æ›´æ–°æœ¬åœ°é…ç½®ï¼Œä½†è¿™è¦ä½ è‡ªå·±å»å®ç°ã€‚</p>\n<p><img src=\"//img.mukewang.com/5d273c270001462510960310.png\" alt=\"å›¾ç‰‡æè¿°\"></p>\n<h2>åœ¨Nodejsä¸­è¿›è¡Œæµ‹è¯•</h2>\n<p>ä»¥ä¸‹ä¸ºä¸€ä¸ªç®€å•çš„ Demo å±•ç¤ºäº†åœ¨ Node.js å¦‚ä½•ä¸ Consul ä¹‹é—´è¿›è¡ŒæœåŠ¡æ³¨å†Œã€å¥åº·æ£€æŸ¥åŠé…ç½®ä¸­å¿ƒçš„åº”ç”¨ï¼Œå¯ä»¥å¾ˆå¥½çš„å°†ä¸Šé¢è®²è§£çš„ç†è®ºçŸ¥è¯†è¿›è¡Œå®è·µã€‚</p>\n<p><strong>å°è£… Consul</strong></p>\n<pre class=\"prettyprint language-js\"><code>&#x2F;&#x2F; consul.js\nconst Consul = require(&#x27;consul&#x27;);\n\nclass ConsulConfig {\n    constructor () {\n        const serviceName = &#x27;consul-demo&#x27;;\n        \n        &#x2F;&#x2F; åˆå§‹åŒ– consul\n        this.consul = new Consul({\n            host: &#x27;192.168.6.128&#x27;,\n            port: 8500,\n            promisify: true,\n        });\n        \n        &#x2F;&#x2F; æœåŠ¡æ³¨å†Œä¸å¥åº·æ£€æŸ¥é…ç½®\n        this.consul.agent.service.register({\n            name: serviceName,\n            address: &#x27;192.168.20.193&#x27;, &#x2F;&#x2F; æ³¨æ„ï¼š192.168.20.193 ä¸ºæˆ‘æœ¬åœ°çš„å†…ç½‘ ipï¼Œé€šè¿‡ ifconfig æŸ¥çœ‹\n            port: 3000,\n            check: {\n                http: &#x27;http:&#x2F;&#x2F;192.168.20.193:3000&#x2F;health&#x27;,\n                interval: &#x27;10s&#x27;,\n                timeout: &#x27;5s&#x27;,\n            }\n        }, function(err, result) {\n            if (err) {\n                console.error(err);\n                throw err;\n            }\n\n            console.log(serviceName + &#x27; æ³¨å†ŒæˆåŠŸï¼&#x27;);\n        })\n    }\n    \n    async getConfig(key) {\n        const result = await this.consul.kv.get(key);\n\n        if (!result) {\n            return Promise.reject(key + &#x27;ä¸å­˜åœ¨&#x27;);\n        }\n\n        return JSON.parse(result.Value);\n    }\n    \n    &#x2F;&#x2F; è¯»å– user é…ç½®ç®€å•å°è£…\n    async getUserConfig(key) {\n        const result = await this.getConfig(&#x27;develop&#x2F;user&#x27;);\n\n        if (!key) {\n            return result;\n        }\n\n        return result[key];\n    }\n\n\t&#x2F;&#x2F; æ›´æ–° user é…ç½®ç®€å•å°è£…\n    async setUserConfig(key, val) {\n        const user = await this.getConfig(&#x27;develop&#x2F;user&#x27;);\n\n        user[key] = val;\n\n        return this.consul.kv.set(&#x27;develop&#x2F;user&#x27;, JSON.stringify(user))\n    }\n}\n\nmodule.exports = ConsulConfig;\n</code></pre><p><strong>ç¼–å†™å¯åŠ¨æ–‡ä»¶</strong></p>\n<pre class=\"prettyprint language-js\"><code>&#x2F;&#x2F; app.js\nconst http = require(&#x27;http&#x27;);\nconst ConsulConfig = require(&#x27;.&#x2F;consul&#x27;);\nconst consul = new ConsulConfig();\n\nhttp.createServer(async (req, res) =&gt; {\n    const {url, method} = req;\n\n    &#x2F;&#x2F; æµ‹è¯•å¥åº·æ£€æŸ¥\n    if (url === &#x27;&#x2F;health&#x27;) {\n        res.end(&#x27;OK!&#x27;);\n    }\n\n    &#x2F;&#x2F; æµ‹è¯•åŠ¨æ€è¯»å–æ•°æ®\n    if (method === &#x27;GET&#x27; &amp;&amp; url === &#x27;&#x2F;user&#x2F;info&#x27;) {\n        const user = await consul.getUserConfig();\n        res.end(&#96;ä½ å¥½ï¼Œæˆ‘æ˜¯ ${user.name} ä»Šå¹´ ${user.age}&#96;);\n    }\n\n    &#x2F;&#x2F; æµ‹è¯•æ•°æ®æ›´æ–°\n    if (method === &#x27;POST&#x27; &amp;&amp; url === &#x27;&#x2F;user&#x27;) {\n        try {\n            await consul.setUserConfig(&#x27;age&#x27;, 18) &#x2F;&#x2F; å°† age æ›´æ”¹ä¸º 18\n            res.end(&#x27;OK!&#x27;);\n        } catch (err) {\n            console.error(err);\n            res.end(&#x27;ERROR!&#x27;);\n        }\n    }\n}).listen(3000, &#x27;192.168.20.193&#x27;); &#x2F;&#x2F; 192.168.20.193 ä¸ºæˆ‘æœ¬åœ°çš„å†…ç½‘ ipï¼Œé€šè¿‡ ifconfig æŸ¥çœ‹\n</code></pre><h3>æ¥å£æµ‹è¯•</h3>\n<p><strong>å¥åº·æ£€æŸ¥æ¥å£</strong></p>\n<p>è¯¥æ¥å£åœ¨æœåŠ¡å¯åŠ¨åä¸”å‘ Consul é…ç½®ä¸­å¿ƒæ³¨å†Œåï¼Œæ ¹æ® consul.js æ–‡ä»¶é…ç½®çš„æœåŠ¡æ³¨å†Œå’Œå¥åº·æ£€æŸ¥ä¿¡æ¯è¿›è¡Œè‡ªåŠ¨è°ƒç”¨ã€‚</p>\n<pre class=\"prettyprint\"><code>$ curl http:&#x2F;&#x2F;192.168.20.193:3000&#x2F;health\nOK!\n</code></pre><p>æ³¨å†ŒæˆåŠŸåå±•ç¤ºæˆ‘ä»¬æœåŠ¡çš„åç§°åŠå¥åº·æ£€æŸ¥ç»“æœå¦‚ä¸‹ï¼š</p>\n<p><img src=\"//img.mukewang.com/5d273c4d000119c919360726.png\" alt=\"å›¾ç‰‡æè¿°\">\n<img src=\"//img.mukewang.com/5d273c5d0001616719460332.png\" alt=\"å›¾ç‰‡æè¿°\">\n<strong>è·å–é…ç½®ä¿¡æ¯æ¥å£</strong></p>\n<pre class=\"prettyprint\"><code>$ curl http:&#x2F;&#x2F;192.168.20.193:3000&#x2F;user&#x2F;info\nä½ å¥½ï¼Œæˆ‘æ˜¯ Jack ä»Šå¹´ 20\n</code></pre><p><strong>æ›´æ–°é…ç½®ä¿¡æ¯æ¥å£</strong></p>\n<pre class=\"prettyprint\"><code>$ curl -X POST http:&#x2F;&#x2F;192.168.20.193:3000&#x2F;user\nOK!\n</code></pre><p><strong>æ›´æ–°ä¹‹åé‡æ–°è·å–é…ç½®</strong></p>\n<p>å¯ä»¥çœ‹åˆ°ä½¿ç”¨ Consul åšä¸ºé…ç½®ä¸­å¿ƒä¹‹åï¼Œåœ¨æˆ‘çš„é¡¹ç›®æ²¡æœ‰é‡å¯çš„æƒ…å†µä¸‹ä¹Ÿæ˜¯å¯ä»¥å®ç°æ•°æ®åŠ¨æ€å˜æ›´çš„ã€‚</p>\n<pre class=\"prettyprint\"><code>$ curl http:&#x2F;&#x2F;192.168.20.193:3000&#x2F;user&#x2F;info\nä½ å¥½ï¼Œæˆ‘æ˜¯ Jack ä»Šå¹´ 18\n</code></pre><p>æœ¬èŠ‚æºç  Github åœ°å€ï¼š<a href=\"https://github.com/Q-Angelo/project-training/tree/master/nodejs/consul-demo\">Node.js + Consul å®ç°æœåŠ¡æ³¨å†Œã€å¥åº·æ£€æŸ¥ã€é…ç½®ä¸­å¿ƒ Demo</a></p>\n<h2>æ€»ç»“</h2>\n<p>æ€»ç»“èµ·æ¥æœ¬æ–‡ä¸»è¦è®²è§£äº† Consul çš„ä¸‰ä¸ªåŠŸèƒ½ç‚¹åœ¨ Node.js ä¸­çš„åº”ç”¨ï¼Œå®¢æˆ·ç«¯è¿›è¡ŒæœåŠ¡æ³¨å†ŒæˆåŠŸä¹‹åï¼Œåˆ™å¯ä»¥åœ¨ Consul ç®¡æ§å°çœ‹åˆ°å½“å‰çš„æœåŠ¡åˆ—è¡¨ã€‚å¥åº·æ£€æŸ¥åŠŸèƒ½ï¼Œå¯ä»¥æ£€æŸ¥æ¥å£çš„å¯ç”¨æ€§ï¼Œè¿›ä¸€æ­¥è¿˜å¯ä»¥åšè¿ç»´ç›‘æ§æŠ¥è­¦ï¼Œé…ç½®ä¸­å¿ƒè¿™ä¸ªå¯¹äºæˆ‘ä»¬å¼€å‘è€…æ˜¯å¾ˆå®ç”¨çš„ï¼Œæœ‰äº†å®ƒå¯ä»¥åšä¸€äº›è¿è¡Œæ—¶é…ç½®ã€‚</p>\n<p>Consul çš„åº”ç”¨å¹¶éåªæœ‰ä¸Šé¢ä»‹ç»çš„ä¸‰ç‚¹ï¼Œé€šè¿‡ Consul è¿˜å¯ä»¥åšè´Ÿè½½å‡è¡¡ã€åˆ†å¸ƒå¼é”ï¼Œæœ‰æ²¡æœ‰æ„Ÿè§‰å¾ˆå‰å®³ ingï¼Œè¿™ä¸ªåŠŸèƒ½æ˜¯æˆ‘ä¹‹å‰åœ¨çœ‹ Spring Cloud Consul çš„æ—¶å€™äº†è§£åˆ°çš„ï¼Œæ¬¢è¿å…³æ³¨ã€ŒNodejsæŠ€æœ¯æ ˆ ã€å…¬ä¼—å·ï¼Œå…³äºè¿™äº›åç»­å®è·µä¹‹åä¹Ÿä¼šè¿›è¡Œåˆ†äº«ã€‚</p>\n<h2>é˜…è¯»æ¨è</h2>\n<ul>\n<li><a href=\"https://github.com/Q-Angelo/Nodejs-Interview-Questions\">Nodejs-Interview-Questions â€”ä¸“æ³¨äº Node.js é¢è¯•åŠå¸¸è§é—®é¢˜åˆ†äº«</a></li>\n<li><a href=\"https://www.nodejs.red\">Nodejs æŠ€æœ¯æ ˆ â€” ä¸€ä»½ Node.js å¼€å‘ä¸å­¦ä¹ çš„æŠ€æœ¯æ ˆæŒ‡å—</a></li>\n<li>å…³æ³¨å…¬ä¼—å·ã€ŒNodejsæŠ€æœ¯æ ˆã€ä¸ºæ‚¨æ¨èæ›´å¤š Node.js ç›¸å…³å­¦ä¹ æŒ‡å—</li>\n<li>é¦–å‘ <a href=\"https://www.imooc.com/article/289385\">æ…•è¯¾ç½‘</a></li>\n</ul>\n</div>",
      "title": "Node.js + Consul å®ç°æœåŠ¡æ³¨å†Œã€å¥åº·æ£€æŸ¥ã€é…ç½®ä¸­å¿ƒ",
      "last_reply_at": "2019-07-27T02:02:53.947Z",
      "good": false,
      "top": false,
      "reply_count": 14,
      "visit_count": 1510,
      "create_at": "2019-07-15T01:53:42.906Z",
      "author": {
        "loginname": "Q-Angelo",
        "avatar_url": "https://avatars0.githubusercontent.com/u/17956058?v=4&s=120"
      }
    },
    {
      "id": "5d303e32b2b9222961dabe89",
      "author_id": "573ac2cdf610cbba1dc4519b",
      "tab": "ask",
      "content": "<div class=\"markdown-text\"><h2>é—®é¢˜æè¿°</h2>\n<p>ç›®å‰æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œéœ€æ±‚ä¸­æ¶‰åŠä¸€ä¸ªæ¯”è¾ƒè€—æ—¶çš„æ“ä½œï¼Œè¿™æ—¶å€™äº§ç”Ÿäº†ä¸¤ç§æ–¹æ¡ˆï¼Œè¯·å„ä½å¤§ä½¬æŒ‡å¯¼ä¸€ä¸‹ã€‚</p>\n<ol>\n<li>\n<p>è¿™ä¸ªè¯·æ±‚å¤§æ¦‚è€—æ—¶åœ¨20ç§’å·¦å³ï¼Œå‘èµ·è¯·æ±‚åå‰ç«¯ä¸€ç›´è½¬åœˆåœˆç­‰å¾…è¿”å›ã€‚\nè´¨ç–‘ç‚¹ï¼šå½“å¤§é‡ç”¨æˆ·è¿›æ¥åï¼Œhttpçš„è¿æ¥æ•°é™åˆ¶ï¼Œä¼šä¸ä¼šè¢«holdä½ï¼Œåé¢çš„æœåŠ¡å™¨è¯·æ±‚ä¸€ç›´ç­‰å¾…æ’é˜Ÿã€‚</p>\n</li>\n<li>\n<p>è®¾è®¡ä¸¤ä¸ªè¯·æ±‚ï¼Œå¹¶ä¸”åœ¨ç¼“å­˜ä¸­è®¾ç½®ä¸€ä¸ªæ ‡å¿—é‡ï¼Œç¬¬ä¸€ä¸ªè¯·æ±‚è¿›æ¥è§¦å‘è€—æ—¶æ“ä½œï¼Œå¹¶ä¸”ç«‹å³è¿”å›å‰ç«¯â€å¤„ç†ä¸­â€œçŠ¶æ€ï¼Œç„¶ååœ¨å‰ç«¯åŠ æ–°çš„è½®è¯¢è¯·æ±‚ï¼Œè¯·æ±‚ç¼“å­˜ä¸­çš„æ ‡å¿—é‡ï¼Œè¿”å›ç¬¬ä¸€ä¸ªè¯·æ±‚çš„æ“ä½œç»“æœï¼Œè¿™æ ·å¯ä»¥åŠæ—¶é‡Šæ”¾httpè¯·æ±‚ï¼Œ\nè´¨ç–‘ç‚¹ï¼šå‰ç«¯è¦å¤šå¥½å‡ æ¬¡è½®è¯¢å¼€é”€ï¼Œè€Œä¸”å¦‚æœè½®è¯¢é—´éš”æ—¶é—´ä¸åˆé€‚ï¼Œä½“éªŒä¹Ÿä¼šå˜å·®ã€‚</p>\n</li>\n</ol>\n<p>å¤§ä½¬ä»¬ç»™ä¸€ä¸‹æ„è§ï¼Ÿå¸Œæœ›èƒ½ä»nodejså’Œjavaå¯¹æ¯”ä¸€ä¸‹ï¼Œé‚£ç§æ›´åˆé€‚å¤„ç†è¿™ç§åœºæ™¯ã€‚</p>\n</div>",
      "title": "é«˜å¹¶å‘ä¸‹åœºæ™¯ä¸‹ï¼Œä½¿ç”¨nodejsäº§ç”Ÿçš„é—®é¢˜",
      "last_reply_at": "2019-07-27T02:01:13.769Z",
      "good": false,
      "top": false,
      "reply_count": 18,
      "visit_count": 1860,
      "create_at": "2019-07-18T09:38:58.032Z",
      "author": {
        "loginname": "FantasyGao",
        "avatar_url": "https://avatars0.githubusercontent.com/u/17523638?v=4&s=120"
      }
    },
    {
      "id": "5d3ac105b4725a628e268ef5",
      "author_id": "56fbb4a48a612c5559d16a49",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><p><strong>nodejs åœ¨ä¸­é—´å±‚ä¸»è¦æ˜¯åšäº†ä¸¤ä»¶äº‹</strong></p>\n<h5>1.è½¬å‘</h5>\n<p>è½¬å‘çš„è¯æ€§èƒ½å’Œnginxæ¯”è¿˜æ˜¯æœ‰å·®è·çš„ï¼Œå½“åˆæˆ‘ä»¬æµ‹è¯•ä»£ç†ä¸€ä¸ªé™æ€æ–‡ä»¶ï¼Œå¹¶å‘æ•°å’Œnginxæ˜¯æœ‰å·®è·çš„ï¼Œæ‰€ä»¥è¿™ä¸€ç‚¹ä¸æ˜¯æ ¸å¿ƒç«äº‰åŠ›</p>\n<h5>2.ä¸šåŠ¡logicå¤„ç†</h5>\n<p>ç°åœ¨åœ¨åˆ›ä¸šå…¬å¸é‡è›®ç”Ÿé•¿é˜¶æ®µéƒ½æ˜¯nodejsç›´æ¥åšåç«¯ï¼Œåœ¨å…¬å¸æ‰©å¼ ç¨³å®šä¹‹åä¾¿ä¼šå¼•ç”¨goæˆ–åˆ™javaåšåŸºç¡€æœåŠ¡ï¼Œnodejsåšä¸šåŠ¡å±‚å¤„ç†ï¼Œè¿™æ ·åšä¸»è¦æ˜¯è§£å†³ä»¥ä¸‹å‡ ä¸ªç—›ç‚¹</p>\n<h6>1.å¾ˆå¤šåŸºç¡€æœåŠ¡ï¼Œæ¯”å¦‚ç”¨æˆ·æ¨¡å—ï¼Œç»„ç»‡æ¨¡å—çš„ä¸€äº›åŸºç¡€æ–¹æ³•åœ¨å¤šä¸ªé¡¹ç›®ä¸­ç”¨åˆ°ï¼Œå¹¶ä¸”å˜åŠ¨å°ï¼Œæ‰€ä»¥éœ€è¦ç”¨goæˆ–åˆ™javaæ²‰æ·€å‡ºåŸºç¡€å±‚ï¼Œæé«˜å¤ç”¨æ€§.</h6>\n<h6>2.å°½é‡é¿å…å¾ˆå¤šnodeæœåŠ¡å’Œæ•°æ®åº“ç›´è¿ï¼Œä¿è¯æ•°æ®åº“çš„å®‰å…¨æ€§ï¼Œå®‰å…¨æ€§åŒ…æ‹¬æ•°æ®å®‰å…¨å’Œæ€§èƒ½å®‰å…¨ã€‚</h6>\n<h6>3.éƒ¨åˆ†å…¬å¸ç”¨nodeåšæ•°æ®æ¸²æŸ“ï¼Œç¼“å­˜ï¼Œè¿™æ ·å¯ä»¥å¾ˆå¤§ç¨‹åº¦çš„å‰ç«¯ä½“éªŒ</h6>\n<p>3.1  æ¯”å¦‚åç«¯è¿”å›çš„æ˜¯json, ç„¶ånodeæŠŠæ¸²æŸ“å¥½çš„é¡µé¢ç›´æ¥è¿”å›ç»™å‰ç«¯ï¼Œè¿™æ ·èƒ½å¾ˆå¤§ç¨‹åº¦æé«˜å‰ç«¯çš„ä½“éªŒ\n3.2   node ç»“åˆrediså¯ä»¥è¿›è¡ŒæŸäº›apiæ•°æ®çš„ç¼“å­˜ï¼Œè¿™æ ·æé«˜äº†apiå“åº”é€Ÿåº¦</p>\n<h6>4.åœ¨å¤æ‚çš„å•é¡µé¢è¿ç”¨ä¸­å®ç°è·¯ç”±æ¨¡å—ç®¡ç†</h6>\n<p>4.1  æ¯”å¦‚æˆ‘ä¸€ä¸ªé¡¹ç›®æœ‰è®¢å•æ¨¡å—å’Œäº§å“æ¨¡å—ï¼Œå…¶å®æ˜¯ä¸¤ä¸ªå•é¡µï¼Œé€šè¿‡è®¿é—®ä¸åŒçš„nodejsè·¯ç”±å¾—åˆ°ï¼Œè¿™æ ·ä¸ç”¨ä¸€æ¬¡æ€§å…¨éƒ¨åŠ è½½åˆ°å‰ç«¯ï¼Œæé«˜äº†ç”¨æˆ·ä½“éªŒ</p>\n</div>",
      "title": "nodejsçš„è§’è‰²å®šä½",
      "last_reply_at": "2019-07-27T01:48:40.054Z",
      "good": false,
      "top": false,
      "reply_count": 6,
      "visit_count": 424,
      "create_at": "2019-07-26T08:59:49.135Z",
      "author": {
        "loginname": "TimLiu1",
        "avatar_url": "https://avatars0.githubusercontent.com/u/16770736?v=4&s=120"
      }
    },
    {
      "id": "5b8cdb3a71b88cc417ed0846",
      "author_id": "5b74f778a210553a0cde2979",
      "tab": "ask",
      "content": "<div class=\"markdown-text\"><p>æ±‚å‘ŠçŸ¥reactçš„å…¥é—¨ç›¸å…³ä¹¦ç±ï¼ï¼ï¼</p>\n</div>",
      "title": "å¦‚ä½•æ‰èƒ½å­¦å¥½reactï¼Ÿ",
      "last_reply_at": "2019-07-26T15:22:10.921Z",
      "good": false,
      "top": false,
      "reply_count": 53,
      "visit_count": 5710,
      "create_at": "2018-09-03T06:56:58.686Z",
      "author": {
        "loginname": "zhuhaifeng1251pm",
        "avatar_url": "https://avatars1.githubusercontent.com/u/41354007?v=4&s=120"
      }
    },
    {
      "id": "5b7ac9c7c52ad1482eb940bf",
      "author_id": "5b52cbf1fb9e84ec69cc1ca2",
      "tab": "ask",
      "content": "<div class=\"markdown-text\"><p>Egg.jsç°åœ¨ç”¨çš„äººå¤šå—ï¼Ÿé‚£äº›å…¬å¸åœ¨ç”¨æœ‰çŸ¥é“çš„å—ï¼Ÿ</p>\n<p>åŒä¸Šï¼Œè€é“ä»¬å‡ºæ¥å§ã€‚</p>\n</div>",
      "title": "Egg.jsç°åœ¨ç”¨çš„äººå¤šå—ï¼Ÿé‚£äº›å…¬å¸åœ¨ç”¨æœ‰çŸ¥é“çš„å—ï¼Ÿ",
      "last_reply_at": "2019-07-26T11:28:04.439Z",
      "good": false,
      "top": false,
      "reply_count": 133,
      "visit_count": 19289,
      "create_at": "2018-08-20T14:01:43.981Z",
      "author": {
        "loginname": "nodeper",
        "avatar_url": "https://avatars2.githubusercontent.com/u/41500847?v=4&s=120"
      }
    },
    {
      "id": "5d3a81619969a529571d759e",
      "author_id": "5b0eaaf38a4f51e140d9437d",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><blockquote>\n<p>å¤šæ•°äººéƒ½æ‹¥æœ‰è‡ªå·±ä¸äº†è§£çš„èƒ½åŠ›å’Œæœºä¼šï¼Œéƒ½æœ‰å¯èƒ½åšåˆ°æœªæ›¾æ¢¦æƒ³çš„äº‹æƒ…ã€‚ â€”â€”æˆ´å°”Â·å¡è€åŸº</p>\n</blockquote>\n<p>ä»å‰ç«¯è½¬å…¥ Node.js çš„ç«¥é‹å¯¹è¿™ä¸€éƒ¨åˆ†å†…å®¹ä¼šæ¯”è¾ƒé™Œç”Ÿï¼Œå› ä¸ºåœ¨å‰ç«¯ä¸­ä¸€äº›ç®€å•çš„å­—ç¬¦ä¸²æ“ä½œå·²ç»æ»¡è¶³åŸºæœ¬çš„ä¸šåŠ¡éœ€æ±‚ï¼Œæœ‰æ—¶å¯èƒ½ä¹Ÿä¼šè§‰å¾— Bufferã€Stream è¿™äº›ä¼šå¾ˆç¥ç§˜ã€‚å›åˆ°æœåŠ¡ç«¯ï¼Œå¦‚æœä½ ä¸æƒ³åªåšä¸€åæ™®é€šçš„ Node.js å¼€å‘å·¥ç¨‹å¸ˆï¼Œä½ åº”è¯¥æ·±å…¥å»å­¦ä¹ ä¸€ä¸‹ Buffer æ­å¼€è¿™ä¸€å±‚ç¥ç§˜çš„é¢çº±ï¼ŒåŒæ—¶ä¹Ÿä¼šè®©ä½ å¯¹ Node.js çš„ç†è§£æå‡ä¸€ä¸ªæ°´å¹³ã€‚</p>\n<p><strong>ä½œè€…ç®€ä»‹</strong>ï¼šäº”æœˆå›ï¼ŒNodejs Developerï¼Œçƒ­çˆ±æŠ€æœ¯ã€å–œæ¬¢åˆ†äº«çš„ 90 åé’å¹´ï¼Œå…¬ä¼—å· â€œNodejsæŠ€æœ¯æ ˆâ€ï¼ŒGithub å¼€æºé¡¹ç›® <a href=\"https://www.nodejs.red\">https://www.nodejs.red</a></p>\n<h2>Bufferåˆè¯†</h2>\n<p>åœ¨å¼•å…¥ TypedArray ä¹‹å‰ï¼ŒJavaScript è¯­è¨€æ²¡æœ‰ç”¨äºè¯»å–æˆ–æ“ä½œäºŒè¿›åˆ¶æ•°æ®æµçš„æœºåˆ¶ã€‚ Buffer ç±»æ˜¯ä½œä¸º Node.js API çš„ä¸€éƒ¨åˆ†å¼•å…¥çš„ï¼Œç”¨äºåœ¨ TCP æµã€æ–‡ä»¶ç³»ç»Ÿæ“ä½œã€ä»¥åŠå…¶ä»–ä¸Šä¸‹æ–‡ä¸­ä¸å…«ä½å­—èŠ‚æµè¿›è¡Œäº¤äº’ã€‚è¿™æ˜¯æ¥è‡ª Node.js å®˜ç½‘çš„ä¸€æ®µæè¿°ï¼Œæ¯”è¾ƒæ™¦æ¶©éš¾æ‡‚ï¼Œæ€»ç»“èµ·æ¥ä¸€å¥è¯ <strong>Node.js å¯ä»¥ç”¨æ¥å¤„ç†äºŒè¿›åˆ¶æµæ•°æ®æˆ–è€…ä¸ä¹‹è¿›è¡Œäº¤äº’</strong>ã€‚</p>\n<p>Buffer ç”¨äºè¯»å–æˆ–æ“ä½œäºŒè¿›åˆ¶æ•°æ®æµï¼Œåšä¸º Node.js API çš„ä¸€éƒ¨åˆ†ä½¿ç”¨æ—¶æ— éœ€ requireï¼Œç”¨äºæ“ä½œç½‘ç»œåè®®ã€æ•°æ®åº“ã€å›¾ç‰‡å’Œæ–‡ä»¶ I/O ç­‰ä¸€äº›éœ€è¦å¤§é‡äºŒè¿›åˆ¶æ•°æ®çš„åœºæ™¯ã€‚Buffer åœ¨åˆ›å»ºæ—¶å¤§å°å·²ç»è¢«ç¡®å®šä¸”æ˜¯æ— æ³•è°ƒæ•´çš„ï¼Œåœ¨å†…å­˜åˆ†é…è¿™å— Buffer æ˜¯ç”± C++ å±‚é¢æä¾›è€Œä¸æ˜¯ V8 å…·ä½“åé¢ä¼šè®²è§£ã€‚</p>\n<p>åœ¨è¿™é‡Œä¸çŸ¥é“ä½ æ˜¯å¦è®¤ä¸ºè¿™æ˜¯å¾ˆç®€å•çš„ï¼Ÿä½†æ˜¯ä¸Šé¢æåˆ°çš„ä¸€äº›å…³é”®è¯<code>äºŒè¿›åˆ¶</code>ã€<code>æµï¼ˆStreamï¼‰</code>ã€<code>ç¼“å†²åŒºï¼ˆBufferï¼‰</code>ï¼Œè¿™äº›åˆéƒ½æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä¸‹é¢å°è¯•åšä¸€äº›ç®€å•çš„ä»‹ç»ã€‚</p>\n<h3>ä»€ä¹ˆæ˜¯äºŒè¿›åˆ¶æ•°æ®ï¼Ÿ</h3>\n<p>è°ˆåˆ°äºŒè¿›åˆ¶æˆ‘ä»¬å¤§è„‘å¯èƒ½ä¼šæµ®æƒ³åˆ°å°±æ˜¯ 010101 è¿™ç§ä»£ç å‘½ä»¤ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>\n<p><img src=\"//static.cnodejs.org/Fv63GpkB3KcXq8lc1UPpxlsRhBiq\" alt=\"010101.jpg\"></p>\n<p>æ­£å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒäºŒè¿›åˆ¶æ•°æ®ä½¿ç”¨ 0 å’Œ 1 ä¸¤ä¸ªæ•°ç æ¥è¡¨ç¤ºçš„æ•°æ®ï¼Œä¸ºäº†å­˜å‚¨æˆ–å±•ç¤ºä¸€äº›æ•°æ®ï¼Œè®¡ç®—æœºéœ€è¦å…ˆå°†è¿™äº›æ•°æ®è½¬æ¢ä¸ºäºŒè¿›åˆ¶æ¥è¡¨ç¤ºã€‚ä¾‹å¦‚ï¼Œæˆ‘æƒ³å­˜å‚¨ 66 è¿™ä¸ªæ•°å­—ï¼Œè®¡ç®—æœºä¼šå…ˆå°†æ•°å­— 66 è½¬åŒ–ä¸ºäºŒè¿›åˆ¶ 01000010 è¡¨ç¤ºï¼Œå°è±¡ä¸­ç¬¬ä¸€æ¬¡æ¥è§¦è¿™ä¸ªæ˜¯åœ¨å¤§å­¦æœŸé—´ C è¯­è¨€è¯¾ç¨‹ä¸­ï¼Œè½¬æ¢å…¬å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<table>\n<thead>\n<tr>\n<th>128</th>\n<th>64</th>\n<th>32</th>\n<th>16</th>\n<th>8</th>\n<th>4</th>\n<th>2</th>\n<th>1</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>0</td>\n<td>1</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>1</td>\n<td>0</td>\n</tr>\n</tbody>\n</table>\n<p>ä¸Šé¢ç”¨æ•°å­—ä¸¾äº†ä¸€ä¸ªç¤ºä¾‹ï¼Œæˆ‘ä»¬çŸ¥é“æ•°å­—åªæ˜¯æ•°æ®ç±»å‹ä¹‹ä¸€ï¼Œå…¶å®ƒçš„è¿˜æœ‰å­—ç¬¦ä¸²ã€å›¾åƒã€æ–‡ä»¶ç­‰ã€‚ä¾‹å¦‚æˆ‘ä»¬å¯¹ä¸€ä¸ªè‹±æ–‡ M æ“ä½œï¼Œåœ¨ JavaScript é‡Œé€šè¿‡ <code>'M'.charCodeAt()</code> å–åˆ°å¯¹åº”çš„ ASCII ç ä¹‹åï¼ˆé€šè¿‡ä»¥ä¸Šçš„æ­¥éª¤ï¼‰ä¼šè½¬ä¸ºäºŒè¿›åˆ¶è¡¨ç¤ºã€‚</p>\n<h3>ä»€ä¹ˆæ˜¯ Streamï¼Ÿ</h3>\n<p>æµï¼Œè‹±æ–‡ Stream æ˜¯å¯¹è¾“å…¥è¾“å‡ºè®¾å¤‡çš„æŠ½è±¡ï¼Œè¿™é‡Œçš„è®¾å¤‡å¯ä»¥æ˜¯æ–‡ä»¶ã€ç½‘ç»œã€å†…å­˜ç­‰ã€‚</p>\n<p>æµæ˜¯æœ‰æ–¹å‘æ€§çš„ï¼Œå½“ç¨‹åºä»æŸä¸ªæ•°æ®æºè¯»å…¥æ•°æ®ï¼Œä¼šå¼€å¯ä¸€ä¸ªè¾“å…¥æµï¼Œè¿™é‡Œçš„æ•°æ®æºå¯ä»¥æ˜¯æ–‡ä»¶æˆ–è€…ç½‘ç»œç­‰ï¼Œä¾‹å¦‚æˆ‘ä»¬ä» a.txt æ–‡ä»¶è¯»å…¥æ•°æ®ã€‚ç›¸åçš„å½“æˆ‘ä»¬çš„ç¨‹åºéœ€è¦å†™å‡ºæ•°æ®åˆ°æŒ‡å®šæ•°æ®æºï¼ˆæ–‡ä»¶ã€ç½‘ç»œç­‰ï¼‰æ—¶ï¼Œåˆ™å¼€å¯ä¸€ä¸ªè¾“å‡ºæµã€‚å½“æœ‰ä¸€äº›å¤§æ–‡ä»¶æ“ä½œæ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦ Stream åƒç®¡é“ä¸€æ ·ï¼Œä¸€ç‚¹ä¸€ç‚¹çš„å°†æ•°æ®æµå‡ºã€‚</p>\n<p><strong>ä¸¾ä¸ªä¾‹å­</strong></p>\n<p>æˆ‘ä»¬ç°åœ¨æœ‰ä¸€å¤§ç½æ°´éœ€è¦æµ‡ä¸€ç‰‡èœåœ°ï¼Œå¦‚æœæˆ‘ä»¬å°†æ°´ç½çš„æ°´ä¸€ä¸‹å…¨éƒ¨å€’å…¥èœåœ°ï¼Œé¦–å…ˆå¾—éœ€è¦æœ‰å¤šä¹ˆå¤§çš„åŠ›æ°”ï¼ˆè¿™é‡Œçš„åŠ›æ°”å¥½æ¯”è®¡ç®—æœºä¸­çš„ç¡¬ä»¶æ€§èƒ½ï¼‰æ‰å¯æ¬å¾—åŠ¨ã€‚å¦‚æœï¼Œæˆ‘ä»¬æ‹¿æ¥äº†æ°´ç®¡å°†æ°´ä¸€ç‚¹ä¸€ç‚¹æµå…¥æˆ‘ä»¬çš„èœåœ°ï¼Œè¿™ä¸ªæ—¶å€™ä¸è¦è¿™ä¹ˆå¤§åŠ›æ°”å°±å¯å®Œæˆã€‚</p>\n<p><img src=\"//static.cnodejs.org/FtcuoHCLPxdEQgFQIH7xqRmrnfVg\" alt=\"fountain_stream.jpg\"></p>\n<p>é€šè¿‡ä¸Šé¢çš„è®²è§£è¿›ä¸€æ­¥çš„ç†è§£äº† Stream æ˜¯ä»€ä¹ˆï¼Ÿé‚£ä¹ˆ Stream å’Œ Buffer ä¹‹é—´åˆæ˜¯ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿçœ‹ä»¥ä¸‹ä»‹ç»ï¼Œå…³äº Stream æœ¬èº«ä¹Ÿæœ‰å¾ˆå¤šçŸ¥è¯†ç‚¹ï¼Œæ¬¢è¿å…³æ³¨å…¬ä¼—å·ã€ŒNodejsæŠ€æœ¯æ ˆã€ï¼Œä¹‹åä¼šå•ç‹¬è¿›è¡Œä»‹ç»ã€‚</p>\n<h3>ä»€ä¹ˆæ˜¯ Bufferï¼Ÿ</h3>\n<p>é€šè¿‡ä»¥ä¸Š Stream çš„è®²è§£ï¼Œæˆ‘ä»¬å·²ç»çœ‹åˆ°æ•°æ®æ˜¯ä»ä¸€ç«¯æµå‘å¦ä¸€ç«¯ï¼Œé‚£ä¹ˆä»–ä»¬æ˜¯å¦‚ä½•æµåŠ¨çš„å‘¢ï¼Ÿ</p>\n<p>é€šå¸¸ï¼Œæ•°æ®çš„ç§»åŠ¨æ˜¯ä¸ºäº†å¤„ç†æˆ–è€…è¯»å–å®ƒï¼Œå¹¶æ ¹æ®å®ƒè¿›è¡Œå†³ç­–ã€‚ä¼´éšç€æ—¶é—´çš„æ¨ç§»ï¼Œæ¯ä¸€ä¸ªè¿‡ç¨‹éƒ½ä¼šæœ‰ä¸€ä¸ªæœ€å°æˆ–æœ€å¤§æ•°æ®é‡ã€‚å¦‚æœæ•°æ®åˆ°è¾¾çš„é€Ÿåº¦æ¯”è¿›ç¨‹æ¶ˆè€—çš„é€Ÿåº¦å¿«ï¼Œé‚£ä¹ˆå°‘æ•°æ—©åˆ°è¾¾çš„æ•°æ®ä¼šå¤„äºç­‰å¾…åŒºç­‰å€™è¢«å¤„ç†ã€‚åä¹‹ï¼Œå¦‚æœæ•°æ®åˆ°è¾¾çš„é€Ÿåº¦æ¯”è¿›ç¨‹æ¶ˆè€—çš„æ•°æ®æ…¢ï¼Œé‚£ä¹ˆæ—©å…ˆåˆ°è¾¾çš„æ•°æ®éœ€è¦ç­‰å¾…ä¸€å®šé‡çš„æ•°æ®åˆ°è¾¾ä¹‹åæ‰èƒ½è¢«å¤„ç†ã€‚</p>\n<p>è¿™é‡Œçš„ç­‰å¾…åŒºå°±æŒ‡çš„ç¼“å†²åŒºï¼ˆBufferï¼‰ï¼Œå®ƒæ˜¯è®¡ç®—æœºä¸­çš„ä¸€ä¸ªå°ç‰©ç†å•ä½ï¼Œé€šå¸¸ä½äºè®¡ç®—æœºçš„ RAM ä¸­ã€‚è¿™äº›æ¦‚å¿µå¯èƒ½ä¼šå¾ˆéš¾ç†è§£ï¼Œä¸è¦æ‹…å¿ƒä¸‹é¢é€šè¿‡ä¸€ä¸ªä¾‹å­è¿›ä¸€æ­¥è¯´æ˜ã€‚</p>\n<p><strong>å…¬å…±æ±½è½¦ç«™ä¹˜è½¦ä¾‹å­</strong></p>\n<p>ä¸¾ä¸€ä¸ªå…¬å…±æ±½è½¦ç«™ä¹˜è½¦çš„ä¾‹å­ï¼Œé€šå¸¸å…¬å…±æ±½è½¦ä¼šæ¯éš”å‡ ååˆ†é’Ÿä¸€è¶Ÿï¼Œåœ¨è¿™ä¸ªæ—¶é—´åˆ°è¾¾ä¹‹å‰å°±ç®—ä¹˜å®¢å·²ç»æ»¡äº†ï¼Œè½¦è¾†ä¹Ÿä¸ä¼šæå‰å‘è½¦ï¼Œæ—©åˆ°çš„ä¹˜å®¢å°±éœ€è¦å…ˆåœ¨è½¦ç«™è¿›è¡Œç­‰å¾…ã€‚å‡è®¾åˆ°è¾¾çš„ä¹˜å®¢è¿‡å¤šï¼Œååˆ°çš„ä¸€éƒ¨åˆ†åˆ™éœ€è¦åœ¨å…¬å…±æ±½è½¦ç«™ç­‰å¾…ä¸‹ä¸€è¶Ÿè½¦é©¶æ¥ã€‚</p>\n<p><img src=\"//static.cnodejs.org/FltfKl3MZVE8TRwGbxxbI2dtPQYj\" alt=\"bus-stop-1516549_1280.jpg\"></p>\n<p>åœ¨ä¸Šé¢ä¾‹å­ä¸­çš„ç­‰å¾…åŒºå…¬å…±æ±½è½¦ç«™ï¼Œå¯¹åº”åˆ°æˆ‘ä»¬çš„ Node.js ä¸­ä¹Ÿå°±æ˜¯ç¼“å†²åŒºï¼ˆBufferï¼‰ï¼Œå¦å¤–ä¹˜å®¢åˆ°è¾¾çš„é€Ÿåº¦æ˜¯æˆ‘ä»¬ä¸èƒ½æ§åˆ¶çš„ï¼Œæˆ‘ä»¬èƒ½æ§åˆ¶çš„ä¹Ÿåªæœ‰ä½•æ—¶å‘è½¦ï¼Œå¯¹åº”åˆ°æˆ‘ä»¬çš„ç¨‹åºä¸­å°±æ˜¯æˆ‘ä»¬æ— æ³•æ§åˆ¶æ•°æ®æµåˆ°è¾¾çš„æ—¶é—´ï¼Œå¯ä»¥åšçš„æ˜¯èƒ½å†³å®šä½•æ—¶å‘é€æ•°æ®ã€‚</p>\n<h2>BufferåŸºæœ¬ä½¿ç”¨</h2>\n<p>äº†è§£äº† Buffer çš„ä¸€äº›æ¦‚å¿µä¹‹åï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹ Buffer çš„ä¸€äº›åŸºæœ¬ä½¿ç”¨ï¼Œè¿™é‡Œå¹¶ä¸ä¼šåˆ—ä¸¾æ‰€æœ‰çš„ API ä½¿ç”¨ï¼Œä»…åˆ—ä¸¾ä¸€éƒ¨åˆ†å¸¸ç”¨çš„ï¼Œæ›´è¯¦ç»†çš„å¯å‚è€ƒ <a href=\"http://nodejs.cn/api/buffer.html\">Node.js ä¸­æ–‡ç½‘</a>ã€‚</p>\n<h3>åˆ›å»ºBuffer</h3>\n<p>åœ¨ 6.0.0 ä¹‹å‰çš„ Node.js ç‰ˆæœ¬ä¸­ï¼Œ Buffer å®ä¾‹æ˜¯ä½¿ç”¨ Buffer æ„é€ å‡½æ•°åˆ›å»ºçš„ï¼Œè¯¥å‡½æ•°æ ¹æ®æä¾›çš„å‚æ•°ä»¥ä¸åŒæ–¹å¼åˆ†é…è¿”å›çš„ Buffer <code>new Buffer()</code>ã€‚</p>\n<p>ç°åœ¨å¯ä»¥é€šè¿‡ Buffer.from()ã€Buffer.alloc() ä¸ Buffer.allocUnsafe() ä¸‰ç§æ–¹å¼æ¥åˆ›å»º</p>\n<p><strong>Buffer.from()</strong></p>\n<pre class=\"prettyprint language-js\"><code>const b1 = Buffer.from(&#x27;10&#x27;);\nconst b2 = Buffer.from(&#x27;10&#x27;, &#x27;utf8&#x27;);\nconst b3 = Buffer.from([10]);\nconst b4 = Buffer.from(b3);\n\nconsole.log(b1, b2, b3, b4); &#x2F;&#x2F; &lt;Buffer 31 30&gt; &lt;Buffer 31 30&gt; &lt;Buffer 0a&gt; &lt;Buffer 0a&gt;\n</code></pre><p><strong>Buffer.alloc</strong></p>\n<p>è¿”å›ä¸€ä¸ªå·²åˆå§‹åŒ–çš„ Bufferï¼Œå¯ä»¥ä¿è¯æ–°åˆ›å»ºçš„ Buffer æ°¸è¿œä¸ä¼šåŒ…å«æ—§æ•°æ®ã€‚</p>\n<pre class=\"prettyprint language-js\"><code>const bAlloc1 = Buffer.alloc(10); &#x2F;&#x2F; åˆ›å»ºä¸€ä¸ªå¤§å°ä¸º 10 ä¸ªå­—èŠ‚çš„ç¼“å†²åŒº\n\nconsole.log(bAlloc1); &#x2F;&#x2F; &lt;Buffer 00 00 00 00 00 00 00 00 00 00&gt;\n</code></pre><p><strong>Buffer.allocUnsafe</strong></p>\n<p>åˆ›å»ºä¸€ä¸ªå¤§å°ä¸º size å­—èŠ‚çš„æ–°çš„æœªåˆå§‹åŒ–çš„ Bufferï¼Œç”±äº Buffer æ˜¯æœªåˆå§‹åŒ–çš„ï¼Œå› æ­¤åˆ†é…çš„å†…å­˜ç‰‡æ®µå¯èƒ½åŒ…å«æ•æ„Ÿçš„æ—§æ•°æ®ã€‚åœ¨ Buffer å†…å®¹å¯è¯»æƒ…å†µä¸‹ï¼Œåˆ™å¯èƒ½ä¼šæ³„éœ²å®ƒçš„æ—§æ•°æ®ï¼Œè¿™ä¸ªæ˜¯ä¸å®‰å…¨çš„ï¼Œä½¿ç”¨æ—¶è¦è°¨æ…ã€‚</p>\n<pre class=\"prettyprint language-js\"><code>const bAllocUnsafe1 = Buffer.allocUnsafe(10);\n\nconsole.log(bAllocUnsafe1); &#x2F;&#x2F; &lt;Buffer 49 ae c9 cd 49 1d 00 00 11 4f&gt;\n</code></pre><h3>Buffer å­—ç¬¦ç¼–ç </h3>\n<p>é€šè¿‡ä½¿ç”¨å­—ç¬¦ç¼–ç ï¼Œå¯å®ç° Buffer å®ä¾‹ä¸ JavaScript å­—ç¬¦ä¸²ä¹‹é—´çš„ç›¸äº’è½¬æ¢ï¼Œç›®å‰æ‰€æ”¯æŒçš„å­—ç¬¦ç¼–ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<ul>\n<li>â€˜asciiâ€™ - ä»…é€‚ç”¨äº 7 ä½ ASCII æ•°æ®ã€‚æ­¤ç¼–ç é€Ÿåº¦å¾ˆå¿«ï¼Œå¦‚æœè®¾ç½®åˆ™ä¼šå‰¥ç¦»é«˜ä½ã€‚</li>\n<li>â€˜utf8â€™ - å¤šå­—èŠ‚ç¼–ç çš„ Unicode å­—ç¬¦ã€‚è®¸å¤šç½‘é¡µå’Œå…¶ä»–æ–‡æ¡£æ ¼å¼éƒ½ä½¿ç”¨ UTF-8ã€‚</li>\n<li>â€˜utf16leâ€™ - 2 æˆ– 4 ä¸ªå­—èŠ‚ï¼Œå°ç«¯åºç¼–ç çš„ Unicode å­—ç¬¦ã€‚æ”¯æŒä»£ç†å¯¹ï¼ˆU+10000 è‡³ U+10FFFFï¼‰ã€‚</li>\n<li>â€˜ucs2â€™ - â€˜utf16leâ€™ çš„åˆ«åã€‚</li>\n<li>â€˜base64â€™ - Base64 ç¼–ç ã€‚å½“ä»å­—ç¬¦ä¸²åˆ›å»º Buffer æ—¶ï¼Œæ­¤ç¼–ç ä¹Ÿä¼šæ­£ç¡®åœ°æ¥å— RFC 4648 ç¬¬ 5 èŠ‚ä¸­æŒ‡å®šçš„ â€œURL å’Œæ–‡ä»¶åå®‰å…¨å­—æ¯â€ã€‚</li>\n<li>â€˜latin1â€™ - ä¸€ç§å°† Buffer ç¼–ç æˆå•å­—èŠ‚ç¼–ç å­—ç¬¦ä¸²çš„æ–¹æ³•ï¼ˆç”± RFC 1345 ä¸­çš„ IANA å®šä¹‰ï¼Œç¬¬ 63 é¡µï¼Œä½œä¸º Latin-1 çš„è¡¥å……å—å’Œ C0/C1 æ§åˆ¶ç ï¼‰ã€‚</li>\n<li>â€˜binaryâ€™ - â€˜latin1â€™ çš„åˆ«åã€‚</li>\n<li>â€˜hexâ€™ - å°†æ¯ä¸ªå­—èŠ‚ç¼–ç æˆä¸¤ä¸ªåå…­è¿›åˆ¶çš„å­—ç¬¦ã€‚</li>\n</ul>\n<pre class=\"prettyprint language-js\"><code>const buf = Buffer.from(&#x27;hello world&#x27;, &#x27;ascii&#x27;);\nconsole.log(buf.toString(&#x27;hex&#x27;)); &#x2F;&#x2F; 68656c6c6f20776f726c64\n</code></pre><h3>å­—ç¬¦ä¸²ä¸ Buffer ç±»å‹äº’è½¬</h3>\n<p><strong>å­—ç¬¦ä¸²è½¬ Buffer</strong></p>\n<p>è¿™ä¸ªç›¸ä¿¡ä¸ä¼šé™Œç”Ÿäº†ï¼Œé€šè¿‡ä¸Šé¢è®²è§£çš„ Buffer.form() å®ç°ï¼Œå¦‚æœä¸ä¼ é€’ encoding é»˜è®¤æŒ‰ç…§ UTF-8 æ ¼å¼è½¬æ¢å­˜å‚¨</p>\n<pre class=\"prettyprint language-js\"><code>const buf = Buffer.from(&#x27;Node.js æŠ€æœ¯æ ˆ&#x27;, &#x27;UTF-8&#x27;);\n\nconsole.log(buf); &#x2F;&#x2F; &lt;Buffer 4e 6f 64 65 2e 6a 73 20 e6 8a 80 e6 9c af e6 a0 88&gt;\nconsole.log(buf.length); &#x2F;&#x2F; 17\n</code></pre><p><strong>Buffer è½¬æ¢ä¸ºå­—ç¬¦ä¸²</strong></p>\n<p>Buffer è½¬æ¢ä¸ºå­—ç¬¦ä¸²ä¹Ÿå¾ˆç®€å•ï¼Œä½¿ç”¨ toString([encoding], [start], [end]) æ–¹æ³•ï¼Œé»˜è®¤ç¼–ç ä»ä¸º UTF-8ï¼Œå¦‚æœä¸ä¼  startã€end å¯å®ç°å…¨éƒ¨è½¬æ¢ï¼Œä¼ äº† startã€end å¯å®ç°éƒ¨åˆ†è½¬æ¢ï¼ˆè¿™é‡Œè¦å°å¿ƒäº†ï¼‰</p>\n<pre class=\"prettyprint language-js\"><code>const buf = Buffer.from(&#x27;Node.js æŠ€æœ¯æ ˆ&#x27;, &#x27;UTF-8&#x27;);\n\nconsole.log(buf); &#x2F;&#x2F; &lt;Buffer 4e 6f 64 65 2e 6a 73 20 e6 8a 80 e6 9c af e6 a0 88&gt;\nconsole.log(buf.length); &#x2F;&#x2F; 17\nconsole.log(buf.toString(&#x27;UTF-8&#x27;, 0, 9)); &#x2F;&#x2F; Node.js \ufffd\n</code></pre><p>è¿è¡ŒæŸ¥çœ‹ï¼Œå¯ä»¥çœ‹åˆ°ä»¥ä¸Šè¾“å‡ºç»“æœä¸º <code>Node.js \ufffd</code> å‡ºç°äº†ä¹±ç ï¼Œä¸ºä»€ä¹ˆï¼Ÿ</p>\n<p><strong>è½¬æ¢è¿‡ç¨‹ä¸­ä¸ºä»€ä¹ˆå‡ºç°ä¹±ç ï¼Ÿ</strong></p>\n<p>é¦–å…ˆä»¥ä¸Šç¤ºä¾‹ä¸­ä½¿ç”¨çš„é»˜è®¤ç¼–ç æ–¹å¼ UTF-8ï¼Œé—®é¢˜å°±å‡ºåœ¨è¿™é‡Œä¸€ä¸ªä¸­æ–‡åœ¨ UTF-8 ä¸‹å ç”¨ 3 ä¸ªå­—èŠ‚ï¼Œ<code>æŠ€</code> è¿™ä¸ªå­—åœ¨ buf ä¸­å¯¹åº”çš„å­—èŠ‚ä¸º <code>8a 80 e6</code>\nè€Œæˆ‘ä»¬çš„è®¾å®šçš„èŒƒå›´ä¸º 0ï½9 å› æ­¤åªè¾“å‡ºäº† <code>8a</code>ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šé€ æˆå­—ç¬¦è¢«æˆªæ–­å‡ºç°ä¹±ç ã€‚</p>\n<p>ä¸‹é¢æˆ‘ä»¬æ”¹ä¸‹ç¤ºä¾‹çš„æˆªå–èŒƒå›´ï¼š</p>\n<pre class=\"prettyprint language-js\"><code>const buf = Buffer.from(&#x27;Node.js æŠ€æœ¯æ ˆ&#x27;, &#x27;UTF-8&#x27;);\n\nconsole.log(buf); &#x2F;&#x2F; &lt;Buffer 4e 6f 64 65 2e 6a 73 20 e6 8a 80 e6 9c af e6 a0 88&gt;\nconsole.log(buf.length); &#x2F;&#x2F; 17\nconsole.log(buf.toString(&#x27;UTF-8&#x27;, 0, 11)); &#x2F;&#x2F; Node.js æŠ€\n</code></pre><p>å¯ä»¥çœ‹åˆ°å·²ç»æ­£å¸¸è¾“å‡ºäº†</p>\n<h2>Bufferå†…å­˜æœºåˆ¶</h2>\n<p>åœ¨ <a href=\"https://www.nodejs.red/#/nodejs/memory\">Nodejs ä¸­çš„ å†…å­˜ç®¡ç†å’Œ V8 åƒåœ¾å›æ”¶æœºåˆ¶</a> ä¸€èŠ‚ä¸»è¦è®²è§£äº†åœ¨ Node.js çš„åƒåœ¾å›æ”¶ä¸­ä¸»è¦ä½¿ç”¨ V8 æ¥ç®¡ç†ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰æåˆ° Buffer ç±»å‹çš„æ•°æ®æ˜¯å¦‚ä½•å›æ”¶çš„ï¼Œä¸‹é¢è®©æˆ‘ä»¬æ¥äº†è§£ Buffer çš„å†…å­˜å›æ”¶æœºåˆ¶ã€‚</p>\n<p>ç”±äº Buffer éœ€è¦å¤„ç†çš„æ˜¯å¤§é‡çš„äºŒè¿›åˆ¶æ•°æ®ï¼Œå‡å¦‚ç”¨ä¸€ç‚¹å°±å‘ç³»ç»Ÿå»ç”³è¯·ï¼Œåˆ™ä¼šé€ æˆé¢‘ç¹çš„å‘ç³»ç»Ÿç”³è¯·å†…å­˜è°ƒç”¨ï¼Œæ‰€ä»¥ Buffer æ‰€å ç”¨çš„å†…å­˜<strong>ä¸å†ç”± V8 åˆ†é…</strong>ï¼Œè€Œæ˜¯åœ¨ Node.js çš„ <strong>C++ å±‚é¢å®Œæˆç”³è¯·</strong>ï¼Œåœ¨ <strong>JavaScript ä¸­è¿›è¡Œå†…å­˜åˆ†é…</strong>ã€‚å› æ­¤ï¼Œè¿™éƒ¨åˆ†å†…å­˜æˆ‘ä»¬ç§°ä¹‹ä¸º<strong>å †å¤–å†…å­˜</strong>ã€‚</p>\n<p><strong>æ³¨æ„</strong>ï¼šä»¥ä¸‹ä½¿ç”¨åˆ°çš„ buffer.js æºç ä¸º Node.js v10.x ç‰ˆæœ¬ï¼Œåœ°å€ï¼š<a href=\"https://github.com/nodejs/node/blob/v10.x/lib/buffer.js\">https://github.com/nodejs/node/blob/v10.x/lib/buffer.js</a></p>\n<h3>Bufferå†…å­˜åˆ†é…åŸç†</h3>\n<p>Node.js é‡‡ç”¨äº† slab æœºåˆ¶è¿›è¡Œ<strong>é¢„å…ˆç”³è¯·ã€äº‹ååˆ†é…</strong>ï¼Œæ˜¯ä¸€ç§åŠ¨æ€çš„ç®¡ç†æœºåˆ¶ã€‚</p>\n<p>ä½¿ç”¨ Buffer.alloc(size) ä¼ å…¥ä¸€ä¸ªæŒ‡å®šçš„ size å°±ä¼šç”³è¯·ä¸€å—å›ºå®šå¤§å°çš„å†…å­˜åŒºåŸŸï¼Œslab å…·æœ‰å¦‚ä¸‹ä¸‰ç§çŠ¶æ€ï¼š</p>\n<ul>\n<li>fullï¼šå®Œå…¨åˆ†é…çŠ¶æ€</li>\n<li>partialï¼šéƒ¨åˆ†åˆ†é…çŠ¶æ€</li>\n<li>emptyï¼šæ²¡æœ‰è¢«åˆ†é…çŠ¶æ€</li>\n</ul>\n<p><strong>8KB é™åˆ¶</strong></p>\n<p>Node.js ä»¥ 8KB ä¸ºç•Œé™æ¥åŒºåˆ†æ˜¯å°å¯¹è±¡è¿˜æ˜¯å¤§å¯¹è±¡ï¼Œåœ¨ <a href=\"https://github.com/nodejs/node/blob/v10.x/lib/buffer.js\">buffer.js</a> ä¸­å¯ä»¥çœ‹åˆ°ä»¥ä¸‹ä»£ç </p>\n<pre class=\"prettyprint language-js\"><code>Buffer.poolSize = 8 * 1024; &#x2F;&#x2F; 102 è¡Œï¼ŒNode.js ç‰ˆæœ¬ä¸º v10.x\n</code></pre><p>åœ¨ <strong>Buffer åˆè¯†</strong> ä¸€èŠ‚é‡Œæœ‰æåˆ°è¿‡ <code>Buffer åœ¨åˆ›å»ºæ—¶å¤§å°å·²ç»è¢«ç¡®å®šä¸”æ˜¯æ— æ³•è°ƒæ•´çš„</code> åˆ°è¿™é‡Œåº”è¯¥å°±æ˜ç™½äº†ã€‚</p>\n<p><strong>Buffer å¯¹è±¡åˆ†é…</strong></p>\n<p>ä»¥ä¸‹ä»£ç ç¤ºä¾‹ï¼Œåœ¨åŠ è½½æ—¶ç›´æ¥è°ƒç”¨äº† createPool() ç›¸å½“äºç›´æ¥åˆå§‹åŒ–äº†ä¸€ä¸ª 8 KB çš„å†…å­˜ç©ºé—´ï¼Œè¿™æ ·åœ¨ç¬¬ä¸€æ¬¡è¿›è¡Œå†…å­˜åˆ†é…æ—¶ä¹Ÿä¼šå˜å¾—æ›´é«˜æ•ˆã€‚å¦å¤–åœ¨åˆå§‹åŒ–çš„åŒæ—¶è¿˜åˆå§‹åŒ–äº†ä¸€ä¸ªæ–°çš„å˜é‡ <strong>poolOffset = 0</strong> è¿™ä¸ªå˜é‡ä¼šè®°å½•å·²ç»ä½¿ç”¨äº†å¤šå°‘å­—èŠ‚ã€‚</p>\n<pre class=\"prettyprint language-js\"><code>Buffer.poolSize = 8 * 1024;\nvar poolSize, poolOffset, allocPool;\n\n... &#x2F;&#x2F; ä¸­é—´ä»£ç çœç•¥\n\nfunction createPool() {\n  poolSize = Buffer.poolSize;\n  allocPool = createUnsafeArrayBuffer(poolSize);\n  poolOffset = 0;\n}\ncreatePool(); &#x2F;&#x2F; 129 è¡Œ\n</code></pre><p>æ­¤æ—¶ï¼Œæ–°æ„é€ çš„ slab å¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<p><img src=\"//static.cnodejs.org/FuH5H2NHzSCPgrJhB1gdfdMi1WHh\" alt=\"slab_poolOffset_0.png\"></p>\n<p>ç°åœ¨è®©æˆ‘ä»¬æ¥å°è¯•åˆ†é…ä¸€ä¸ªå¤§å°ä¸º 2048 çš„ Buffer å¯¹è±¡ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<pre class=\"prettyprint language-js\"><code>Buffer.alloc(2 * 1024)\n</code></pre><p>ç°åœ¨è®©æˆ‘ä»¬å…ˆçœ‹ä¸‹å½“å‰çš„ slab å†…å­˜æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿå¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<p><img src=\"//static.cnodejs.org/Fv9nHSViTw_1F-v4OZwUPZJrSB6h\" alt=\"slab_poolOffset_2048.png\"></p>\n<p>é‚£ä¹ˆè¿™ä¸ªåˆ†é…è¿‡ç¨‹æ˜¯æ€æ ·çš„å‘¢ï¼Ÿè®©æˆ‘ä»¬å†çœ‹ buffer.js å¦å¤–ä¸€ä¸ªæ ¸å¿ƒçš„æ–¹æ³• allocate(size)</p>\n<pre class=\"prettyprint language-js\"><code>&#x2F;&#x2F; https:&#x2F;&#x2F;github.com&#x2F;nodejs&#x2F;node&#x2F;blob&#x2F;v10.x&#x2F;lib&#x2F;buffer.js#L318\nfunction allocate(size) {\n  if (size &lt;= 0) {\n    return new FastBuffer();\n  }\n\n  &#x2F;&#x2F; å½“åˆ†é…çš„ç©ºé—´å°äº Buffer.poolSize å‘å³ç§»ä½ï¼Œè¿™é‡Œå¾—å‡ºæ¥çš„ç»“æœä¸º 4KB\n  if (size &lt; (Buffer.poolSize &gt;&gt;&gt; 1)) {\n    if (size &gt; (poolSize - poolOffset))\n      createPool();\n    var b = new FastBuffer(allocPool, poolOffset, size);\n    poolOffset += size; &#x2F;&#x2F; å·²ä½¿ç”¨ç©ºé—´ç´¯åŠ \n    alignPool(); &#x2F;&#x2F; 8 å­—èŠ‚å†…å­˜å¯¹é½å¤„ç†\n    return b;\n  } else { &#x2F;&#x2F; C++ å±‚é¢ç”³è¯·\n    return createUnsafeBuffer(size);\n  }\n}\n</code></pre><p>è¯»å®Œä¸Šé¢çš„ä»£ç ï¼Œå·²ç»å¾ˆæ¸…æ™°çš„å¯ä»¥çœ‹åˆ°ä½•æ—¶ä¼šåˆ†é…å° Buffer å¯¹è±¡ï¼Œåˆä½•æ—¶ä¼šå»åˆ†é…å¤§ Buffer å¯¹è±¡ã€‚</p>\n<h3>Buffer å†…å­˜åˆ†é…æ€»ç»“</h3>\n<p>è¿™å—å†…å®¹ç€å®éš¾ç†è§£ï¼Œç¿»äº†å‡ æœ¬ Node.js ç›¸å…³ä¹¦ç±ï¼Œæœ´çµå¤§ä½¬çš„ã€Œæ·±å…¥æµ…å‡º Node.jsã€Buffer ä¸€èŠ‚è¿˜æ˜¯è®²è§£çš„æŒºè¯¦ç»†çš„ï¼Œæ¨èå¤§å®¶å»é˜…è¯»ä¸‹ã€‚</p>\n<ol>\n<li>åœ¨åˆæ¬¡åŠ è½½æ—¶å°±ä¼šåˆå§‹åŒ– 1 ä¸ª <strong>8KB çš„å†…å­˜ç©ºé—´</strong>ï¼Œbuffer.js æºç æœ‰ä½“ç°</li>\n<li>æ ¹æ®ç”³è¯·çš„å†…å­˜å¤§å°åˆ†ä¸º <strong>å° Buffer å¯¹è±¡</strong> å’Œ <strong>å¤§ Buffer å¯¹è±¡</strong></li>\n<li>å° Buffer æƒ…å†µï¼Œä¼šç»§ç»­åˆ¤æ–­è¿™ä¸ª slab ç©ºé—´æ˜¯å¦è¶³å¤Ÿ\n<ul>\n<li>å¦‚æœç©ºé—´è¶³å¤Ÿå°±å»ä½¿ç”¨å‰©ä½™ç©ºé—´åŒæ—¶æ›´æ–° slab åˆ†é…çŠ¶æ€ï¼Œåç§»é‡ä¼šå¢åŠ </li>\n<li>å¦‚æœç©ºé—´ä¸è¶³ï¼Œslab ç©ºé—´ä¸è¶³ï¼Œå°±ä¼šå»åˆ›å»ºä¸€ä¸ªæ–°çš„ slab ç©ºé—´ç”¨æ¥åˆ†é…</li>\n</ul>\n</li>\n<li>å¤§ Buffer æƒ…å†µï¼Œåˆ™ä¼šç›´æ¥èµ° createUnsafeBuffer(size) å‡½æ•°</li>\n<li>ä¸è®ºæ˜¯å° Buffer å¯¹è±¡è¿˜æ˜¯å¤§ Buffer å¯¹è±¡ï¼Œå†…å­˜åˆ†é…æ˜¯åœ¨ C++ å±‚é¢å®Œæˆï¼Œå†…å­˜ç®¡ç†åœ¨ JavaScript å±‚é¢ï¼Œæœ€ç»ˆè¿˜æ˜¯å¯ä»¥è¢« V8 çš„åƒåœ¾å›æ”¶æ ‡è®°æ‰€å›æ”¶ã€‚</li>\n</ol>\n<h2>Bufferåº”ç”¨åœºæ™¯</h2>\n<p>ä»¥ä¸‹åˆ—ä¸¾ä¸€äº› Buffer åœ¨å®é™…ä¸šåŠ¡ä¸­çš„åº”ç”¨åœºæ™¯ï¼Œä¹Ÿæ¬¢è¿å¤§å®¶åœ¨è¯„è®ºåŒºè¡¥å……ï¼</p>\n<h3>I/O æ“ä½œ</h3>\n<p>å…³äº I/O å¯ä»¥æ˜¯æ–‡ä»¶æˆ–ç½‘ç»œ I/Oï¼Œä»¥ä¸‹ä¸ºé€šè¿‡æµçš„æ–¹å¼å°† input.txt çš„ä¿¡æ¯è¯»å–å‡ºæ¥ä¹‹åå†™å…¥åˆ° output.txt æ–‡ä»¶ï¼Œå…³äº Stream ä¸ Buffer çš„å…³ç³»ä¸æ˜ç™½çš„åœ¨å›å¤´çœ‹ä¸‹ <strong>Buffer åˆè¯†</strong> ä¸€èŠ‚è®²è§£çš„ <code>ä»€ä¹ˆæ˜¯ Stream?</code>ã€<code>ä»€ä¹ˆæ˜¯ Buffer?</code></p>\n<pre class=\"prettyprint language-js\"><code>const fs = require(&#x27;fs&#x27;);\n\nconst inputStream = fs.createReadStream(&#x27;input.txt&#x27;); &#x2F;&#x2F; åˆ›å»ºå¯è¯»æµ\nconst outputStream = fs.createWriteStream(&#x27;output.txt&#x27;); &#x2F;&#x2F; åˆ›å»ºå¯å†™æµ\n\ninputStream.pipe(outputStream); &#x2F;&#x2F; ç®¡é“è¯»å†™\n</code></pre><p>åœ¨ Stream ä¸­æˆ‘ä»¬æ˜¯ä¸éœ€è¦æ‰‹åŠ¨å»åˆ›å»ºè‡ªå·±çš„ç¼“å†²åŒºï¼Œåœ¨ Node.js çš„<strong>æµä¸­å°†ä¼šè‡ªåŠ¨åˆ›å»º</strong>ã€‚</p>\n<h3>zlib.js</h3>\n<p>zlib.js ä¸º Node.js çš„æ ¸å¿ƒåº“ä¹‹ä¸€ï¼Œå…¶åˆ©ç”¨äº†ç¼“å†²åŒºï¼ˆBufferï¼‰çš„åŠŸèƒ½æ¥æ“ä½œäºŒè¿›åˆ¶æ•°æ®æµï¼Œæä¾›äº†å‹ç¼©æˆ–è§£å‹åŠŸèƒ½ã€‚å‚è€ƒæºä»£ç  <a href=\"https://github.com/nodejs/node/blob/master/lib/zlib.js\">zlib.js æºç </a></p>\n<h3>åŠ è§£å¯†</h3>\n<p>åœ¨ä¸€äº›åŠ è§£å¯†ç®—æ³•ä¸­ä¼šé‡åˆ°ä½¿ç”¨ Bufferï¼Œä¾‹å¦‚ crypto.createCipheriv çš„ç¬¬äºŒä¸ªå‚æ•° key ä¸º String æˆ– Buffer ç±»å‹ï¼Œå¦‚æœæ˜¯ Buffer ç±»å‹ï¼Œå°±ç”¨åˆ°äº†æœ¬ç¯‡æˆ‘ä»¬è®²è§£çš„å†…å®¹ï¼Œä»¥ä¸‹åšäº†ä¸€ä¸ªç®€å•çš„åŠ å¯†ç¤ºä¾‹ï¼Œé‡ç‚¹ä½¿ç”¨äº† Buffer.alloc() åˆå§‹åŒ–ä¸€ä¸ªå®ä¾‹ï¼ˆè¿™ä¸ªä¸Šé¢æœ‰ä»‹ç»ï¼‰ï¼Œä¹‹åä½¿ç”¨äº† fill æ–¹æ³•åšäº†å¡«å……ï¼Œè¿™é‡Œé‡ç‚¹åœ¨çœ‹ä¸‹è¿™ä¸ªæ–¹æ³•çš„ä½¿ç”¨ã€‚</p>\n<p><strong>buf.fill(value[, offset[, end]][, encoding])</strong></p>\n<ul>\n<li>value: ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè¦å¡«å……çš„å†…å®¹</li>\n<li>offset: åç§»é‡ï¼Œå¡«å……çš„èµ·å§‹ä½ç½®</li>\n<li>end: ç»“æŸå¡«å…… buf çš„åç§»é‡</li>\n<li>encoding: ç¼–ç é›†</li>\n</ul>\n<p><strong>ä»¥ä¸‹ä¸º Cipher çš„å¯¹ç§°åŠ å¯† Demo</strong></p>\n<pre class=\"prettyprint language-js\"><code>const crypto = require(&#x27;crypto&#x27;);\nconst [key, iv, algorithm, encoding, cipherEncoding] = [\n    &#x27;a123456789&#x27;, &#x27;&#x27;, &#x27;aes-128-ecb&#x27;, &#x27;utf8&#x27;, &#x27;base64&#x27;\n];\n\nconst handleKey = key =&gt; {\n    const bytes = Buffer.alloc(16); &#x2F;&#x2F; åˆå§‹åŒ–ä¸€ä¸ª Buffer å®ä¾‹ï¼Œæ¯ä¸€é¡¹éƒ½ç”¨ 00 å¡«å……\n    console.log(bytes); &#x2F;&#x2F; &lt;Buffer 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00&gt;\n    bytes.fill(key, 0, 10) &#x2F;&#x2F; å¡«å……\n    console.log(bytes); &#x2F;&#x2F; &lt;Buffer 61 31 32 33 34 35 36 37 38 39 00 00 00 00 00 00&gt;\n\n    return bytes;\n}\n\nlet cipher = crypto.createCipheriv(algorithm, handleKey(key), iv);\nlet crypted = cipher.update(&#x27;Node.js æŠ€æœ¯æ ˆ&#x27;, encoding, cipherEncoding);\n    crypted += cipher.final(cipherEncoding);\n\nconsole.log(crypted) &#x2F;&#x2F; jE0ODwuKN6iaKFKqd3RF4xFZkOpasy8WfIDl8tRC5t0=\n</code></pre><h2>Buffer VS Cache</h2>\n<blockquote>\n<p>ç¼“å†²ï¼ˆBufferï¼‰ä¸ç¼“å­˜ï¼ˆCacheï¼‰çš„åŒºåˆ«ï¼Ÿ</p>\n</blockquote>\n<p><strong>ç¼“å†²ï¼ˆBufferï¼‰</strong></p>\n<p>ç¼“å†²ï¼ˆBufferï¼‰æ˜¯ç”¨äºå¤„ç†äºŒè¿›åˆ¶æµæ•°æ®ï¼Œå°†æ•°æ®ç¼“å†²èµ·æ¥ï¼Œå®ƒæ˜¯ä¸´æ—¶æ€§çš„ï¼Œå¯¹äºæµå¼æ•°æ®ï¼Œä¼šé‡‡ç”¨ç¼“å†²åŒºå°†æ•°æ®ä¸´æ—¶å­˜å‚¨èµ·æ¥ï¼Œç­‰ç¼“å†²åˆ°ä¸€å®šçš„å¤§å°ä¹‹ååœ¨å­˜å…¥ç¡¬ç›˜ä¸­ã€‚è§†é¢‘æ’­æ”¾å™¨å°±æ˜¯ä¸€ä¸ªç»å…¸çš„ä¾‹å­ï¼Œæœ‰æ—¶ä½ ä¼šçœ‹åˆ°ä¸€ä¸ªç¼“å†²çš„å›¾æ ‡ï¼Œè¿™æ„å‘³ç€æ­¤æ—¶è¿™ä¸€ç»„ç¼“å†²åŒºå¹¶æœªå¡«æ»¡ï¼Œå½“æ•°æ®åˆ°è¾¾å¡«æ»¡ç¼“å†²åŒºå¹¶ä¸”è¢«å¤„ç†ä¹‹åï¼Œæ­¤æ—¶ç¼“å†²å›¾æ ‡æ¶ˆå¤±ï¼Œä½ å¯ä»¥çœ‹åˆ°ä¸€äº›å›¾åƒæ•°æ®ã€‚</p>\n<p><strong>ç¼“å­˜ï¼ˆCacheï¼‰</strong></p>\n<p>ç¼“å­˜ï¼ˆCacheï¼‰æˆ‘ä»¬å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªä¸­é—´å±‚ï¼Œå®ƒå¯ä»¥æ˜¯æ°¸ä¹…æ€§çš„å°†çƒ­ç‚¹æ•°æ®è¿›è¡Œç¼“å­˜ï¼Œä½¿å¾—è®¿é—®é€Ÿåº¦æ›´å¿«ï¼Œä¾‹å¦‚æˆ‘ä»¬é€šè¿‡ Memoryã€Redis ç­‰å°†æ•°æ®ä»ç¡¬ç›˜æˆ–å…¶å®ƒç¬¬ä¸‰æ–¹æ¥å£ä¸­è¯·æ±‚è¿‡æ¥è¿›è¡Œç¼“å­˜ï¼Œç›®çš„å°±æ˜¯å°†æ•°æ®å­˜äºå†…å­˜çš„ç¼“å­˜åŒºä¸­ï¼Œè¿™æ ·å¯¹åŒä¸€ä¸ªèµ„æºè¿›è¡Œè®¿é—®ï¼Œé€Ÿåº¦ä¼šæ›´å¿«ï¼Œä¹Ÿæ˜¯æ€§èƒ½ä¼˜åŒ–ä¸€ä¸ªé‡è¦çš„ç‚¹ã€‚</p>\n<p>æ¥è‡ªçŸ¥ä¹çš„ä¸€ä¸ªè®¨è®ºï¼Œç‚¹å‡» <a href=\"https://www.zhihu.com/question/26190832\">more</a> æŸ¥çœ‹</p>\n<h2>Buffer VS String</h2>\n<p>é€šè¿‡å‹åŠ›æµ‹è¯•æ¥çœ‹çœ‹ String å’Œ Buffer ä¸¤è€…çš„æ€§èƒ½å¦‚ä½•ï¼Ÿ</p>\n<pre class=\"prettyprint language-js\"><code>const http = require(&#x27;http&#x27;);\nlet s = &#x27;&#x27;;\nfor (let i=0; i&lt;1024*10; i++) {\n    s+=&#x27;a&#x27;\n}\n\nconst str = s;\nconst bufStr = Buffer.from(s);\nconst server = http.createServer((req, res) =&gt; {\n    console.log(req.url);\n\n    if (req.url === &#x27;&#x2F;buffer&#x27;) {\n        res.end(bufStr);\n    } else if (req.url === &#x27;&#x2F;string&#x27;) {\n        res.end(str);\n    }\n});\n\nserver.listen(3000);\n</code></pre><p>ä»¥ä¸Šå®ä¾‹æˆ‘æ”¾åœ¨è™šæ‹Ÿæœºé‡Œè¿›è¡Œæµ‹è¯•ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨æœ¬åœ°ç”µè„‘æµ‹è¯•ï¼Œä½¿ç”¨ AB æµ‹è¯•å·¥å…·ã€‚</p>\n<p><strong>æµ‹è¯• string</strong></p>\n<p>çœ‹ä»¥ä¸‹å‡ ä¸ªé‡è¦çš„å‚æ•°æŒ‡æ ‡ï¼Œä¹‹åé€šè¿‡ buffer ä¼ è¾“è¿›è¡Œå¯¹æ¯”</p>\n<ul>\n<li>Complete requests:      21815</li>\n<li>Requests per second:    363.58 [#/sec] (mean)</li>\n<li>Transfer rate:          3662.39 [Kbytes/sec] received</li>\n</ul>\n<pre class=\"prettyprint\"><code>$ ab -c 200 -t 60 http:&#x2F;&#x2F;192.168.6.131:3000&#x2F;string\n</code></pre><p><img src=\"//static.cnodejs.org/FqReSOnZsnDkucE_teisabVCU2AW\" alt=\"ab_string.png\"></p>\n<p><strong>æµ‹è¯• buffer</strong></p>\n<p>å¯ä»¥çœ‹åˆ°é€šè¿‡ buffer ä¼ è¾“æ€»å…±çš„è¯·æ±‚æ•°ä¸º 50000ã€QPS è¾¾åˆ°äº†ä¸¤å€å¤šçš„æé«˜ã€æ¯ç§’ä¼ è¾“çš„å­—èŠ‚ä¸º 9138.82 KBï¼Œä»è¿™äº›æ•°æ®ä¸Šå¯ä»¥è¯æ˜æå‰å°†æ•°æ®è½¬æ¢ä¸º Buffer çš„æ–¹å¼ï¼Œå¯ä»¥ä½¿æ€§èƒ½å¾—åˆ°è¿‘ä¸€å€çš„æå‡ã€‚</p>\n<ul>\n<li>Complete requests:      50000</li>\n<li>Requests per second:    907.24 [#/sec] (mean)</li>\n<li>Transfer rate:          9138.82 [Kbytes/sec] received</li>\n</ul>\n<pre class=\"prettyprint\"><code>$ ab -c 200 -t 60 http:&#x2F;&#x2F;192.168.6.131:3000&#x2F;buffer\n</code></pre><p><img src=\"//static.cnodejs.org/Fh2-jsJaODnKikg6i1gaE4kUZ3tZ\" alt=\"ab_buffer.png\"></p>\n<p>åœ¨ HTTP ä¼ è¾“ä¸­ä¼ è¾“çš„æ˜¯äºŒè¿›åˆ¶æ•°æ®ï¼Œä¸Šé¢ä¾‹å­ä¸­çš„ /string æ¥å£ç›´æ¥è¿”å›çš„å­—ç¬¦ä¸²ï¼Œè¿™æ—¶å€™ HTTP åœ¨ä¼ è¾“ä¹‹å‰ä¼šå…ˆå°†å­—ç¬¦ä¸²è½¬æ¢ä¸º Buffer ç±»å‹ï¼Œä»¥äºŒè¿›åˆ¶æ•°æ®ä¼ è¾“ï¼Œé€šè¿‡æµï¼ˆStreamï¼‰çš„æ–¹å¼ä¸€ç‚¹ç‚¹è¿”å›åˆ°å®¢æˆ·ç«¯ã€‚ä½†æ˜¯ç›´æ¥è¿”å› Buffer ç±»å‹ï¼Œåˆ™å°‘äº†æ¯æ¬¡çš„è½¬æ¢æ“ä½œï¼Œå¯¹äºæ€§èƒ½ä¹Ÿæ˜¯æœ‰æå‡çš„ã€‚</p>\n<p>åœ¨ä¸€äº› Web åº”ç”¨ä¸­ï¼Œå¯¹äºé™æ€æ•°æ®å¯ä»¥é¢„å…ˆè½¬ä¸º Buffer è¿›è¡Œä¼ è¾“ï¼Œå¯ä»¥æœ‰æ•ˆå‡å°‘ CPU çš„é‡å¤ä½¿ç”¨ï¼ˆé‡å¤çš„å­—ç¬¦ä¸²è½¬ Buffer æ“ä½œï¼‰ã€‚</p>\n<h2>Reference</h2>\n<ul>\n<li><a href=\"http://nodejs.cn/api/buffer.html\">http://nodejs.cn/api/buffer.html</a></li>\n<li><a href=\"https://book.douban.com/subject/25768396/\">æ·±å…¥æµ…å‡º Node.js Buffer</a></li>\n<li><a href=\"https://www.freecodecamp.org/news/do-you-want-a-better-understanding-of-buffer-in-node-js-check-this-out-2e29de2968e8/\">Do you want a better understanding of Buffer in Node.js? Check this out.</a></li>\n<li><a href=\"https://hacks.mozilla.org/2017/06/a-cartoon-intro-to-arraybuffers-and-sharedarraybuffers/\">A cartoon intro to ArrayBuffers and SharedArrayBuffers</a></li>\n<li><a href=\"https://github.com/nodejs/node/blob/v10.x/lib/buffer.js\">buffer.js v10.x</a></li>\n<li></li>\n</ul>\n<p>æ¬¢è¿å¤§å®¶å…³æ³¨ã€ŒNodejsæŠ€æœ¯æ ˆã€å…¬ä¼—å·ï¼Œæ‰«æå…³æ³¨æˆ‘å“¦ï¼</p>\n<p><img src=\"//static.cnodejs.org/FkYkVKvIBvR735daeDaC2G0mI6dF\" alt=\"weixin_bottom.jpg\"></p>\n</div>",
      "title": "Node.js ä¸­çš„ç¼“å†²åŒºï¼ˆBufferï¼‰ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Ÿ",
      "last_reply_at": "2019-07-26T10:14:25.109Z",
      "good": false,
      "top": false,
      "reply_count": 11,
      "visit_count": 563,
      "create_at": "2019-07-26T04:28:17.093Z",
      "author": {
        "loginname": "Q-Angelo",
        "avatar_url": "https://avatars0.githubusercontent.com/u/17956058?v=4&s=120"
      }
    },
    {
      "id": "5d3a95bdb4725a628e268d94",
      "author_id": "5d3a94709969a529571d75fc",
      "tab": "ask",
      "content": "<div class=\"markdown-text\"><p>è¯·æ•™ä¸‹å„ä½å¤§ä½¬ï¼Œnodeä½œä¸ºä¸­é—´å±‚ï¼Œå»è¯·æ±‚åç«¯æ¥å£å¤„ç†åè¿”ç»™å‰ç«¯ï¼Œæ—¢ç„¶å®ƒè¿˜æ˜¯è¦å»è¯·æ±‚åç«¯æ¥å£ï¼Œé‚£å®ƒçš„å¤„ç†èƒ½åŠ›ä¸æ˜¯è¿˜æ˜¯è¦å–å†³äºåç«¯å—ï¼Œå®ƒæ˜¯æ€ä¹ˆæé«˜çš„å¹¶å‘æ€§èƒ½å‘¢ï¼Ÿ</p>\n</div>",
      "title": "nodeä½œä¸ºä¸­é—´å±‚ï¼Œæ˜¯æ€ä¹ˆæé«˜å¹¶å‘å¤„ç†èƒ½åŠ›çš„ï¼Ÿ",
      "last_reply_at": "2019-07-26T08:56:39.085Z",
      "good": false,
      "top": false,
      "reply_count": 4,
      "visit_count": 361,
      "create_at": "2019-07-26T05:55:09.492Z",
      "author": {
        "loginname": "wokeT",
        "avatar_url": "https://avatars3.githubusercontent.com/u/31942549?v=4&s=120"
      }
    },
    {
      "id": "5d3587f19969a529571d6546",
      "author_id": "56fbb4a48a612c5559d16a49",
      "tab": "ask",
      "content": "<div class=\"markdown-text\"><p>è®¨è®ºï¼šormæœ‰ä»€ä¹ˆç¼ºç‚¹å’Œä¼˜ç‚¹</p>\n</div>",
      "title": "è®¨è®ºï¼šormæœ‰ä»€ä¹ˆç¼ºç‚¹å’Œä¼˜ç‚¹",
      "last_reply_at": "2019-07-26T08:41:03.149Z",
      "good": false,
      "top": false,
      "reply_count": 9,
      "visit_count": 1050,
      "create_at": "2019-07-22T09:54:57.825Z",
      "author": {
        "loginname": "TimLiu1",
        "avatar_url": "https://avatars0.githubusercontent.com/u/16770736?v=4&s=120"
      }
    },
    {
      "id": "5d3aba6ab4725a628e268eb7",
      "author_id": "5a0d348fe2f4b8ea22496498",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><blockquote>\n<p>æœ¬æ–‡ä»å¼€å‘æµç¨‹è§’åº¦åˆ†æäº†æŒç»­äº¤ä»˜çš„å®ç°ï¼Œå¼€å‘äººå‘˜çš„æ²Ÿé€šé—®é¢˜ä¼šæ‹–å»¶å‘å¸ƒæ—¥æœŸï¼Œå¿…é¡»å®¢è§‚åœ°è§‚å¯Ÿï¼Œæ‰èƒ½äº†è§£æˆå‘˜ä¹‹é—´çš„é—®é¢˜å’Œæµç¨‹ç¼ºé™·ï¼Œå¯è§†åŒ–çš„ç³»ç»Ÿæœ‰åŠ©äºæ‰¾åˆ°é—®é¢˜æ‰€åœ¨ï¼Œå¹¶åœ¨æœ€çŸ­æ—¶é—´å†…è§£å†³ï¼Œä½¿ç”¨å·¥å…·æˆ–ç³»ç»Ÿç®¡ç†å·¥ä½œæ•°æ®æ˜¯æœ‰æ•ˆæé«˜æ•ˆç‡çš„æ–¹å¼ä¹‹ä¸€ã€‚</p>\n</blockquote>\n<p>å¦‚ä»Šï¼Œè®¸å¤šä¼ä¸šç»„ç»‡éƒ½åœ¨å®æ–½æŒç»­äº¤ä»˜çš„åšæ³•ã€‚ä½†æƒ³è¦æé«˜æŒç»­äº¤ä»˜çš„æ•ˆç‡ï¼Œå¾ˆå¤šæ—¶å€™ä¼šè§‰å¾—æ˜¯åœ¨æ„å»ºè‡ªåŠ¨åŒ–æµ‹è¯•å’Œç¯å¢ƒéƒ¨ç½²çš„æ—¶å€™å‡ºäº†é—®é¢˜ï¼Œä¸è¿‡æˆ‘ä»¬è®¤ä¸ºè¿˜æœ‰å…¶ä»–å› ç´ å¯¼è‡´æˆ‘ä»¬å‘å¸ƒè½¯ä»¶ç‰ˆæœ¬æ—¶æœ‰äº›å‹åŠ›å’Œé˜»ç¢ï¼Œåªæ˜¯ä¸ç¡®å®šé—®é¢˜æ˜¯ä»€ä¹ˆã€‚</p>\n<p>æˆ‘ä»¬å¼€å§‹è§‚å¯Ÿæ¯ä¸€ä¸ªè½¯ä»¶ç‰ˆæœ¬å‘å¸ƒè¿‡ç¨‹å¹¶è®°å½•ä¸‹çœ‹åˆ°çš„å†…å®¹ã€‚ä¾‹å¦‚ï¼Œå®Œæˆæµç¨‹çš„æ¯ä¸ªæ­¥éª¤æ‰€èŠ±è´¹çš„æ—¶é—´ï¼Œæ˜¯äººä¸ºæ‰‹åŠ¨è¿˜æ˜¯è‡ªåŠ¨åŒ–å‘å¸ƒï¼Œå‚ä¸é¡¹ç›®åä½œçš„äººæ•°æœ‰å¤šå°‘ï¼Œä»¥åŠå‘ç°å¯¼è‡´æ–°ç‰ˆæœ¬å»¶è¿Ÿå‘å¸ƒçš„é—®é¢˜ã€‚ä¸€æ—¦æˆ‘ä»¬æœ‰è¶³å¤Ÿçš„æ•°æ®ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹åˆ†æå®ƒå¹¶å¯»æ‰¾è§£å†³æ–¹å¼ï¼Œè¿™äº›ä¼šæˆä¸ºæˆ‘ä»¬è¦è§£å†³çš„æœ€é‡è¦çš„é—®é¢˜ã€‚</p>\n<p>åœ¨è§‚å¯Ÿæ—¶ä¿æŒå®¢è§‚æ˜¯å¾ˆé‡è¦çš„ï¼Œä¸è¦è®©è‡ªå·±çš„åè§æ©ç›–å®é™…å‘ç”Ÿçš„äº‹å®ï¼Œç‰¹åˆ«æ˜¯åœ¨å°è¯•æ”¹è¿›é¡¹ç›®æµç¨‹å’Œç³»ç»Ÿæ—¶éå¸¸æœ‰ä»·å€¼ã€‚</p>\n<p><img src=\"//static.cnodejs.org/FvCFAirPrtQYJ7PkpzjrR_NmD5RW\" alt=\"2019-7-25-Continuous-Delivery-Model-Plutora.png\"></p>\n<h3>ä¸ºä»€ä¹ˆè¦ä¸“æ³¨äºæ”¹å–„æˆ‘ä»¬çš„å‘å¸ƒæµç¨‹</h3>\n<p>åŸå› æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œåœ¨è½¯ä»¶ç‰ˆæœ¬å‘å¸ƒæ—¶å¸¸å¸¸ä¸åƒæˆ‘ä»¬é¢„è®¡çš„é‚£æ ·é¡ºç•…ï¼Œæ—¢ä¸èƒ½æ— é˜»ç¢åˆæ— æ³•å®ç°é¢‘ç¹å‘å¸ƒï¼Œä»è€Œå½±å“äº†æˆ‘ä»¬çš„äº¤ä»˜èƒ½åŠ›ã€‚</p>\n<p>åœ¨æ”¹è¿›çš„è¿‡ç¨‹ä¸­ï¼Œèƒ½ä¸æŠ€æœ¯ä¸“å®¶å…±åŒåˆä½œèƒ½æ›´å¿«ä¼˜åŒ–å‘å¸ƒæµç¨‹ã€‚ä¸ä¸“å®¶åˆä½œçš„å¥½å¤„åœ¨äºä»–ä»¬å°Šé‡æ•°æ®å’Œäº‹å®ï¼Œå¹¶ä¸”ä¹Ÿéå¸¸çƒ­è¡·äºè®©äº‹æƒ…å˜å¾—æ›´å¥½ã€‚åŒæ—¶ä¸Šæ–‡æåˆ°çš„æ”¶é›†äº†å¤§é‡æ•°æ®ï¼Œå°±å¯ä»¥æ˜¾ç¤ºå‡ºæˆ‘ä»¬çš„é—®é¢˜ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬ä¸“æ³¨äºè§£å†³å®é™…é—®é¢˜è€Œä¸æ˜¯å‡è®¾ã€‚ä¾‹å¦‚ï¼Œæ•°æ®æ˜¾ç¤ºæˆ‘ä»¬åœ¨æµ‹è¯•åˆ†æ®µç¯å¢ƒä¸­éƒ¨ç½²çš„æ’ä»¶æ¯”æˆ‘ä»¬æƒ³è±¡çš„è¦å°‘å¾—å¤šï¼Œå› æ­¤æˆ‘ä»¬å°±å¯ä»¥è½»è€Œæ˜“ä¸¾åœ°å¤„ç†è¿™ä¸ªé˜»æ­¢æˆ‘ä»¬è½»æ¾éƒ¨ç½²çš„é—®é¢˜ã€‚</p>\n<h3>ç¨³å®šå‘å¸ƒä¸ä»£è¡¨æ‰€æœ‰ä¸œè¥¿éƒ½å¿…é¡»åœ¨ç°åœ¨å‘å¸ƒ</h3>\n<p>å¦‚æœæŸäº›æ”¹è¿›çœŸçš„éå¸¸é‡è¦ï¼Œé‚£åœ¨æœ€å¿«çš„æ—¶é—´å†…å‘å¸ƒæ˜¯ä¸å¯ç½®ç–‘çš„ã€‚é—®é¢˜åœ¨äºï¼Œå½“æˆ‘ä»¬æƒ³è¦é€‰æ‹©æœ¬å‘¨çš„å€™é€‰ç‰ˆæœ¬æ—¶ï¼Œç”±äºå„ç§åŸå› ï¼Œå›¢é˜Ÿè®¤ä¸ºéœ€è¦åŒ…å«æœ€åä¸€åˆ†é’Ÿçš„â€œç´§æ€¥â€æ›´æ”¹ã€‚è¿™æ„å‘³ç€æ¨è¿Ÿé€‰æ‹©å‘å¸ƒå€™é€‰ç‰ˆæœ¬ä»¥åŠå¯¹å‘å¸ƒå‘¨æœŸçš„è¿é”æ•ˆåº”ï¼Œæˆ–è€…å·¥ä½œå¿…é¡»åŠ ç­åŠ ç‚¹ï¼Œå³ä¾¿èµ¶åœ¨æœ€åå‘å¸ƒäº†ï¼Œæœ‰æ—¶ä¹Ÿä¼šå½±å“ç‰ˆæœ¬è´¨é‡ã€‚</p>\n<p>æˆ‘ä»¬å¼€å§‹æœ‰è¿™æ ·çš„ç–‘é—®ï¼Œâ€œä¸ºä»€ä¹ˆå®ƒå¿…é¡»åœ¨è¿™ä¸ªç‰ˆæœ¬ä¸­å‡ºå»ï¼Ÿâ€ï¼Œâ€œå¦‚æœæˆ‘ä»¬æœ¬å‘¨ä¸å‘å¸ƒæ›´æ”¹ä¼šæ€ä¹ˆæ ·ï¼Ÿâ€æˆ–â€œå®ƒèƒ½ç­‰åˆ°ä¸‹ä¸€ä¸ªç‰ˆæœ¬å—ï¼Ÿâ€ã€‚è¦è·å–ç­”æ¡ˆå…¶å®éå¸¸å›°éš¾ï¼Œå› ä¸ºå¯¹äºå›¢é˜Ÿæ¥è¯´å¼€å‘å·²ç»æ˜¯ä¸€ä¸ªå‹åŠ›å¾ˆå¤§çš„æƒ…å†µï¼Œè¿™äº›ç–‘é—®çš„æå‡ºä¼šè¢«è§†ä½œé˜»æ­¢ä»–ä»¬è¿›è¡Œæ›´æ”¹ã€‚ä½†äº‹å®ä¸Šï¼Œå½“æˆ‘ä»¬è¯•å›¾é¢‘ç¹åœ°å‘å¸ƒæ›´æ”¹ï¼Œæ›´æ–°è¿­ä»£æ—¶ï¼Œä½†å…¶å®æ˜¯å¯ä»¥ç­‰å¾…ä¸‹ä¸€å‘¨æ—¶ï¼Œå®ƒç¡®å®æ˜¯è¿åäº†åŸåˆ™ã€‚å› ä¸ºæˆ‘ä»¬ä¼šå¿˜è®°äº†ä¸€ç‚¹ï¼Œè½¯ä»¶ç‰ˆæœ¬å‘å¸ƒçš„å…³é”®æ˜¯ç¨³å®šã€‚</p>\n<p>é€šè¿‡è®¨è®ºå¹¶æå‡ºè¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬æ„è¯†åˆ°æœ‰äº›å˜åŒ–æ ¹æœ¬ä¸ç´§æ€¥ï¼Œå› æ­¤ä¸éœ€è¦èµ¶å·¥ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯æˆ‘ä»¬çš„ç‰ˆæœ¬æ›´åŠ é¡ºç•…ï¼Œéœ€è¦ä¿®å¤é”™è¯¯çš„ç¨‹åºæ›´å°‘äº†ï¼Œæ˜¾ç„¶å‘å¸ƒçš„å‹åŠ›ä¹Ÿå‡å°‘äº†ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥æ›´ä¸“æ³¨äºå¦‚ä½•è¿›è¡Œå‘¨æœŸæ€§è§„å¾‹åœ°å‘å¸ƒã€‚</p>\n<p><img src=\"//static.cnodejs.org/FtcfawJJ5uZitNuZDuUQsiHb_KFF\" alt=\"2019-7-25-devops-cycle-blog-1-1024x549.jpg\"></p>\n<h3>ä½¿ç”¨æ•°æ®æ¥è¯†åˆ«é—®é¢˜å’Œæ”¹å˜ä¹ æƒ¯</h3>\n<p>æ”¹å˜ä¹ æƒ¯æ˜¯å¾ˆéš¾ï¼Œå› ä¸ºä¹ æƒ¯æ˜¯é•¿æœŸè¿™æ ·åšçš„ç»“æœï¼Œä½†ä½ å¿…é¡»åŠªåŠ›åœæ­¢æ—§ä¹ æƒ¯å¹¶ç”¨æ–°ä¹ æƒ¯å–è€Œä»£ä¹‹ã€‚é€‰æ‹©åˆé€‚çš„æ—¶æœºå‘å¸ƒå¯ä»¥çªå‡ºå‘ç°æˆ‘ä»¬çš„å‘å¸ƒå‘¨æœŸä¸­çš„é—®é¢˜ï¼Œå¹¶æœ‰åŠ©äºè§£å†³ä¿®å¤é—®é¢˜ã€‚</p>\n<p>æˆ‘ä»¬å¯ä»¥å°è¯•ä¸€äº›æ–¹æ³•æ¥å¸®åŠ©æˆ‘ä»¬å…»æˆè‰¯å¥½çš„ä¹ æƒ¯ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå‚ä¸å‘å¸ƒè¿‡ç¨‹çš„äººå‘˜å°†å‘é€ç”µå­é‚®ä»¶ä½œä¸ºä¸»è¦é€šä¿¡æ–¹æ³•çš„è¯ï¼Œé‚£ä¸€èˆ¬ä¼šæœ‰æ•°å°æ—¶çš„å»¶è¿Ÿã€‚å¿…é¡»äº†è§£åˆ°ï¼Œåœ¨æ”¶ä»¶äººé˜…è¯»å¹¶ç†è§£ç”µå­é‚®ä»¶ä¹‹å‰ï¼Œå‘ä»¶äººå…¶å®è¿˜æ²¡æœ‰ä¼ è¾¾ä»»ä½•ä¿¡æ¯ã€‚å¦‚æœæ”¶ä»¶äººæ­£åœ¨å¼€ä¼šï¼Œæˆ–è€…æ¯å¤©åªä¼šå®šæœŸæ£€æŸ¥ç”µå­é‚®ä»¶ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šå»¶è¿Ÿæ›´ä¹…æ‰èƒ½çœ‹åˆ°å®ƒã€‚</p>\n<p>ä¸ºäº†æ”¹å˜è¿™ç§ç”µå­é‚®ä»¶ä¹ æƒ¯ï¼Œæˆ‘ä»¬å¼•å…¥äº†ä¸€æ®µæ—¶é—´çš„â€œç‰©ç†æç¤ºâ€ã€‚åœ¨å…¬ä¼—åŒºåŸŸè®¾ç«‹ä¸€ä¸ªé¡¹ç›®å±•ç¤ºæ¿ï¼Œåœ¨ä¸Šé¢å†™äº†å€™é€‰ç‰ˆæœ¬å·ï¼Œæ¯ä¸ªäººéƒ½å¯ä»¥è¡¥å……å’ŒæŸ¥çœ‹ï¼Œä¿¡æ¯ä¼šåƒæ¶Ÿæ¼ªä¸€æ ·æ‰©æ•£åˆ°æ‰€æœ‰äººã€‚é‚£ä½ å°±ä¼šçŸ¥é“æ•´ä¸ªå‘å¸ƒå‘¨æœŸé‡Œä½ çš„ä»»åŠ¡ï¼Œä»¥åŠç›®å‰çš„å„ä»»åŠ¡è¿›åº¦ã€‚è¿™ä¹Ÿä¼šæ¿€åŠ±ä½ èµ¶ç´§å»åšä»»ä½•ä½ åº”è¯¥åšçš„äº‹æƒ…ï¼Œè¿™ä¹Ÿæœ‰åŠ©äºæ¨åŠ¨ç‰ˆæœ¬å‘å¸ƒæµç¨‹ã€‚</p>\n<p>å±•ç¤ºæ¿æœ‰å¦ä¸€ä¸ªå¥½å¤„ï¼Œè®©äººä»¬é¢å¯¹é¢äº¤è°ˆï¼Œç›¸äº’äº†è§£å¹¶å¼€å§‹æ„Ÿè§‰åƒä¸€ä¸ªå›¢é˜Ÿã€‚å®ƒå¸®åŠ©æˆ‘ä»¬é™ä½äº†å› æ²Ÿé€šä¸ç•…å¯¼è‡´çš„æµç¨‹æ‹–å»¶çš„é£é™©ï¼Œä½¿æˆ‘ä»¬å›¢é˜Ÿåˆä½œï¼Œå¹¶å¸®åŠ©æˆ‘ä»¬å½¢æˆäº†æ›´å¥½çš„æ²Ÿé€šä¹ æƒ¯ã€‚</p>\n<p>æ€»è€Œè¨€ä¹‹ï¼Œé€šè¿‡æ›´æœ‰ç”¨çš„ä¹ æƒ¯æ¥å–ä»£æ— æ•ˆçš„ä¹ æƒ¯ï¼Œå±•ç¤ºæ¿åªæ˜¯å…¶ä¸­ä¸€ä¸ªä¾‹å­ï¼Œä½ å¯ä»¥æ‰¾åˆ°æ›´å¤šé€‚åˆçš„â€œå¥½ä¹ æƒ¯â€ã€‚åŒæ—¶ï¼Œä¸€æ—¦æ‰¾åˆ°å¥½ä¹ æƒ¯ï¼Œé‚£ä¹ˆå°±ä¼šå½¢æˆè¡Œä¸ºé›ªçƒï¼Œåœ¨æ»šåŠ¨ä¸­ä¸æ–­åœ°å˜å¤§ï¼Œä½ ç”šè‡³å¯ä»¥åœ¨è¿™ä¸ªå¥½ä¹ æƒ¯çš„åŸºç¡€ä¸Šå†è¿›è¡Œä¼˜åŒ–ã€‚å¦‚æœä½ æƒ³äº†è§£æ›´å¤šï¼Œæˆ‘å¼ºçƒˆæ¨èå¯ä»¥åœ¨ç½‘ä¸Šæœç´¢ Helen Lisowski çš„â€œGood of Goodï¼ˆAgileï¼‰Habitsâ€ç ”è®¨ä¼šã€‚</p>\n<p><img src=\"//static.cnodejs.org/FvagUUunG0Av3uht21dMqMshkpT7\" alt=\"2019-7-25-pipeline-branching.png\"></p>\n<h3>åº”ç”¨ç§‘å­¦æ€ç»´æ–¹å¼æ¥ç†è§£é—®é¢˜</h3>\n<p>å½“æˆ‘ç¬¬ä¸€æ¬¡å¼€å§‹è§‚å¯Ÿå‘å¸ƒæ—¶ï¼Œä¸ºäº†æ”¹è¿›å®ƒä»¬ï¼Œæˆ‘ä»¬å¯èƒ½ä¸çŸ¥é“å¦‚ä½•ç†è§£é—®é¢˜ã€‚è¿™æ—¶å€™ä¸ç»éªŒä¸°å¯Œçš„æ•æ·ä¸“å®¶ï¼Œç²¾ç›Šå’Œç³»ç»Ÿæ€æƒ³å®¶åˆä½œçš„å¥½å¤„å°±æ˜¾ç°å‡ºæ¥äº†ã€‚äº‹å®è¯æ˜ï¼Œæˆ‘çš„æ•´ä¸ªè§‚å¯Ÿï¼Œæ”¶é›†æ•°æ®å’Œåˆ†æçš„æ–¹æ³•ï¼Œéƒ½åº”ç”¨ç§‘å­¦æ€ç»´æ–¹å¼æ¥ç†è§£é—®é¢˜çš„è¯ä¼šäº‹åŠåŠŸå€ã€‚</p>\n<p>å¦‚ä½•åº”ç”¨ç§‘å­¦çš„æ€ç»´æ–¹å¼æ¥ç†è§£é—®é¢˜ï¼ŒåŒ…æ‹¬ä½ è®¤ä¸ºæ¥ä¸‹æ¥ä¼šå‘ç”Ÿä»€ä¹ˆï¼Œå¹¶æ ¹æ®å®é™…å‘ç”Ÿçš„äº‹æƒ…è°ƒæ•´ä½ çš„åç»­æ­¥éª¤ã€‚å®ƒæœ‰å››ä¸ªä¸»è¦æ­¥éª¤ï¼š</p>\n<h4>ç¬¬1æ­¥ï¼š</h4>\n<p>è®¾å®šä½ çš„æ­¤æ¬¡å‘å¸ƒçš„ç›®çš„å’Œå†…å®¹ï¼Œæœ‰å“ªäº›æ˜¯æŒ‘æˆ˜ï¼Œæœ‰å“ªäº›æ˜¯æ—¥å¸¸ã€‚å¯¹æˆ‘ä»¬æ¥è¯´ï¼Œå¤§éƒ¨åˆ†ä¼šæ˜¯æŒ‰éœ€å‘å¸ƒï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€æˆ‘ä»¬æ¯åˆ†é’Ÿéƒ½ä¼šå‘å¸ƒï¼Œæˆ‘ä»¬å¯ä»¥éœ€è¦æ‰¾åˆ°ä¸€ç§é¡ºç•…æ— bugçš„æ–¹å¼å‘å¸ƒæˆ‘ä»¬æƒ³è¦çš„æ”¹è¿›ã€‚</p>\n<h4>ç¬¬2æ­¥ï¼š</h4>\n<p>äº†è§£é¡¹ç›®å½“å‰çš„å¼€å‘è¿›åº¦å’Œå‘å¸ƒçŠ¶å†µã€‚è¿™å°±æ˜¯æ”¶é›†å’Œåˆ†æçš„æ•°æ®çš„æ¥æºï¼Œæˆ‘ä»¬åŸºæœ¬ä¸Šæœ‰ä¸€ä¸ªç”µå­è¡¨æ ¼å½¢å¼çš„ä»·å€¼æµç¨‹å›¾ã€‚</p>\n<h4>ç¬¬3æ­¥ï¼š</h4>\n<p>å»ºç«‹é˜¶æ®µæ€§çš„å°ç›®æ ‡ï¼Œå³æ‚¨çš„ç¬¬ä¸€ä¸ªé‡Œç¨‹ç¢‘ã€‚ä»ä½ å½“å‰çš„çŠ¶æ€åˆ°ä½ çš„æœ€ç»ˆç›®æ ‡å¾€å¾€æ˜¯ä¸€ä¸ªå¤ªå¤§çš„è·³è·ƒï¼Œä¸ºäº†å–å¾—è¿›å±•ï¼Œç¡®å®šä¸€ä¸ªæ›´å®¹æ˜“å®ç°çš„ä¸­é—´ç›®æ ‡æ˜¯æœ‰å¸®åŠ©çš„ã€‚æ¯”å¦‚å¯¹æˆ‘ä»¬æ¥è¯´ï¼Œå¯ä»¥å°†å‘å¸ƒå‘¨æœŸä»15å¤©å‡å°‘åˆ°10å¤©ï¼Œè€Œä¸æ˜¯ç›´æ¥æŠŠç›®æ ‡å®šåœ¨3å¤©ã€‚</p>\n<h4>ç¬¬4æ­¥ï¼š</h4>\n<p>ç¡®å®šå¹¶æ‰§è¡Œä»¥è¾¾åˆ°ç›®çš„ã€‚è¿™æ˜¯åŒæ ·éœ€è¦æ•°æ®åˆ†æï¼Œæ•°æ®å‘æˆ‘ä»¬å±•ç¤ºäº†æˆ‘ä»¬æœ€å¤§çš„é—®é¢˜æ˜¯ç­‰å¾…å‘å¸ƒçš„é˜Ÿåˆ—æ—¶é—´è¿‡é•¿ã€‚é˜Ÿåˆ—æ˜¯â€œæ­»â€æ—¶é—´ï¼Œåœ¨æ­¤æœŸé—´æ²¡æœ‰ä»»ä½•äº‹æƒ…å‘ç”Ÿï¼Œæˆ‘ä»¬åªæ˜¯åœ¨ç­‰å¾…ä¸‹ä¸€ä¸ªè¿‡ç¨‹å‘ç”Ÿã€‚æ‰€ä»¥æˆ‘ä»¬å°±å¯ä»¥å°†ç¬¬ä¸€ä¸ªæ”¹è¿›é‡ç‚¹æ”¾åœ¨å‡å°‘æˆ–æ¶ˆé™¤é˜Ÿåˆ—æ—¶é—´ä¸Šã€‚</p>\n<p>é€šè¿‡ä¸Šé¢æè¿°çŸ¥é“æˆ‘ä»¬è¦é€šè¿‡ç§‘å­¦æ€ç»´æ–¹å¼æ¥å®ç°æ”¹å˜ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å°è¯•å°†ä¸€ä¸ªç¯å¢ƒæ’ä»¶è‡ªåŠ¨åŒ–å®‰è£…åˆ°æˆ‘ä»¬çš„æµ‹è¯•æ¿å—ã€‚è¿™å¬èµ·æ¥åƒæ˜¯ä¸€ä¸ªè‡ªåŠ¨åŒ–è¿‡ç¨‹ï¼Œä½†æ˜¯ç»è¿‡åˆ¤æ–­åï¼Œæˆ‘ä»¬è®¤ä¸ºå®ƒæ˜¯ç ´åçš„æ„å»ºï¼Œä¸»è¦åŸå› æ˜¯åªæ”¯æŒæ‰‹åŠ¨è¿›è¡Œéƒ¨ç½²ï¼Œé‚£ä¹ˆæ‰‹åŠ¨éƒ¨ç½²è®©å·¥ä½œçš„æ•ˆç‡é™ä½ï¼Œç»“åˆæ•°æ®åˆ†æï¼Œæ‰‹åŠ¨éƒ¨ç½²ä¼šè®©å¼€å‘äººå‘˜åˆ†å¿ƒï¼Œå¯¼è‡´å‘å¸ƒè¿›åº¦è¢«å»¶è¿Ÿã€‚æ‰€ä»¥ä¸ºäº†è‡ªåŠ¨åŒ–æµç¨‹ ï¼Œé‚£å¿…é¡»å»¶è¿Ÿæˆ–è€…æ”¾å¼ƒè¿™ä¸ªç¯å¢ƒæ’ä»¶çš„å®‰è£…ã€‚</p>\n<p>ç›®å‰è¿ç”¨å·¥å…·æ¥å®ç°è‡ªåŠ¨åŒ–è¿›ç¨‹æ˜¯æœ€å¿«æå‡æµ‹è¯•æ•ˆç‡çš„ä¸€ç§åŠæ³•ï¼Œå¸‚é¢ä¸Šä¹Ÿæœ‰å¾ˆå¤šèƒ½å®ç°è‡ªåŠ¨åŒ–æµ‹è¯•åŠŸèƒ½çš„å·¥å…·æˆ–è€…å¹³å°ï¼Œå›½å†…æœ‰ <a href=\"https://s.growingio.com/gke2DD\">EOLINKER</a>ï¼Œå›½å¤–æœ‰POSTMAN ç­‰ç­‰ã€‚æ‰€ä»¥å¯¹äºåœ¨å›½å†…çš„ç¯å¢ƒï¼Œè¿ç”¨å¥½çš„è‡ªåŠ¨åŒ–å·¥å…·ï¼Œèƒ½å¸®ä½ æ›´å¥½åœ°å®ç°é¡¹ç›®è¿è½¬ï¼Œæé«˜å¼€å‘æµ‹è¯•æ•ˆç‡ã€‚æœ‰å…´è¶£çš„ç‚¹å‡»äº†è§£ <a href=\"https://s.growingio.com/gke2DD\">EOLINKER</a>ã€‚</p>\n<p><img src=\"//static.cnodejs.org/FnhzGZmF5aKv7S_xDf1rkK126GPR\" alt=\"2019-7-25-cycle.jpg\"></p>\n<h3>æ”¹å–„ç‰ˆæœ¬çš„éæŠ€æœ¯æ–¹é¢çš„å¥½å¤„</h3>\n<p>æ˜¾è€Œæ˜“è§çš„å¥½å¤„æ˜¯ç¼©çŸ­äº†å‘¨æœŸæ—¶é—´ã€‚å‘¨æœŸä¸º10å¤©ï¼Œæˆ‘ä»¬ä¸¤å‘¨å†…ä¸èƒ½å‘å¸ƒè¶…è¿‡ä¸€æ¬¡ã€‚åœ¨è¿›è¡Œäº†å‡ æ¬¡æ‰§è¡Œä¹‹åï¼Œå½“ç„¶æˆ‘ä»¬ä¸ä¼šæ»¡è¶³ï¼Œç»§ç»­ä¼˜åŒ–è‡ªåŠ¨åŒ–äº¤ä»˜ï¼Œå¾€åå†å‡å°‘ä¸€åŠï¼Œç›´åˆ°å¯ä»¥åœ¨ä¸€å¤©å†…å‘å¸ƒã€‚</p>\n<h4>å…¶ä»–ä¸€äº›é‡è¦çš„å¥½å¤„åŒ…æ‹¬ï¼š</h4>\n<ol>\n<li>æ›´å¥½çš„æ²Ÿé€šå’Œå·¥ä½œå…³ç³»</li>\n<li>è‡ªåŠ¨éƒ¨ç½²åˆ°æµ‹è¯•æš‚å­˜ç¯å¢ƒæ„å‘³ç€å›¢é˜Ÿå¯ä»¥æ›´å¿«åœ°å®Œæˆæµ‹è¯•ï¼Œä»è€Œå‡å°‘å‘¨æœŸæ—¶é—´å’Œåé¦ˆå¾ªç¯</li>\n<li>æ”¹å–„æˆ‘ä»¬ç³Ÿç³•çš„è‡ªåŠ¨åŒ–æµ‹è¯•</li>\n<li>å°†å‘å¸ƒçš„æˆæœ¬ä»15å¤©å‡å°‘åˆ°1å¤©ï¼Œå‡å°‘åˆ°1äººç­‰</li>\n<li>å‘å¸ƒåéœ€è¦ä¿®å¤ç¼ºé™·çš„è¡¥ä¸è¾ƒå°‘</li>\n</ol>\n<h3>æ€»ç»“</h3>\n<ol>\n<li>å¯è§†åŒ–çš„ç³»ç»Ÿå’Œæ•°æ®æœ‰åŠ©äºæ‰¾åˆ°é—®é¢˜æ‰€åœ¨ï¼Œå¹¶åœ¨æœ€çŸ­æ—¶é—´å†…è§£å†³</li>\n<li>å½“è¯•å›¾è¯´æœç®¡ç†å±‚å°†æ—¶é—´å’Œèµ„æºæŠ•å…¥é¡¹ç›®æ—¶ï¼Œå®¢è§‚æ•°æ®å’Œåˆ†æå›¾è¡¨éå¸¸æœ‰ç”¨</li>\n<li>å¼€æ”¾å¼åŠå…¬å®¤å¹¶ä¸æ„å‘³ç€ä»–ä»¬æ²Ÿé€šè‰¯å¥½ï¼Œè®¾ç«‹å±•ç¤ºæ¿ä¹‹ç±»çš„åŠæ³•å¯ä»¥ä¿ƒè¿›å›¢é˜Ÿåˆä½œ</li>\n</ol>\n<p>å½“å¯¹æŒç»­äº¤ä»˜å¤ç›˜æ—¶ï¼Œå¾ˆå®¹æ˜“åªå…³æ³¨æŒç»­äº¤ä»˜çš„æŠ€æœ¯éƒ¨åˆ†ï¼Œæ¯•ç«Ÿï¼Œè¿™æ˜¯å¤§å¤šæ•°äººå’Œå¼€å‘èµ„æºæ‰€å…³æ³¨çš„åœ°æ–¹ã€‚ä½†æ˜¯ï¼Œä¹Ÿè¯·æŸ¥çœ‹æ•´ä¸ªå‘å¸ƒå‘¨æœŸï¼Œæ ¹æ®åœ¨é¡¹ç›®è‡ªåŠ¨åŒ–çš„æµç¨‹å’Œæ‰€éœ€æ—¶é—´ï¼Œæ‰¾åˆ°åœ¨æ­¤æœŸé—´å…¶ä»–éæŠ€æœ¯å› ç´ é˜»ç¢äº†å‘å¸ƒã€‚äº†è§£å‘å¸ƒå‘¨æœŸæµç¨‹ä¸­çš„æ‰€æœ‰æ­¥éª¤ï¼Œæ‰¾åˆ°é—®é¢˜å¹¶æ”¹è¿›ï¼Œå†ç¡®ä¿å›¢é˜Ÿçš„æ²Ÿé€šæ–¹æ³•æœ‰æ•ˆå¹¶åˆä½œï¼Œæ‰èƒ½æœ‰åŠ©äºå®ç°æŒç»­äº¤ä»˜ã€‚</p>\n<p><em>å‚è€ƒèµ„æ–™ï¼šSylvia MacDonald,Continuous Delivery - Itâ€™s Not All about Tech!</em></p>\n<p><em>åœ°å€ï¼š<a href=\"https://www.infoq.com/articles/continuous-delivery-not-about-tech/\">https://www.infoq.com/articles/continuous-delivery-not-about-tech/</a></em></p>\n</div>",
      "title": "å¦‚ä½•ä»å¼€å‘æµç¨‹å±‚é¢å®ç°æ›´é«˜æ•ˆçš„æŒç»­äº¤ä»˜",
      "last_reply_at": "2019-07-26T08:31:38.050Z",
      "good": false,
      "top": false,
      "reply_count": 0,
      "visit_count": 152,
      "create_at": "2019-07-26T08:31:38.050Z",
      "author": {
        "loginname": "wardennn",
        "avatar_url": "https://avatars0.githubusercontent.com/u/33686934?v=4&s=120"
      }
    },
    {
      "id": "5d39613db4725a628e268a12",
      "author_id": "50b6e92a637ffa41551f2986",
      "tab": "ask",
      "content": "<div class=\"markdown-text\"><p>æœ€è¿‘ä¸€ç›´åœ¨ç»™åç«¯ä»£ç ï¼Œåšå•å…ƒæµ‹è¯•ä½¿ç”¨çš„æ˜¯mocha+should,å†™å®Œä¸€æ¬¡ä»¥åç¡®å®å¾ˆèˆ’æœã€‚\næƒ³ç»™å‰ç«¯ä»£ç ä¹Ÿå¢åŠ å•å…ƒæµ‹è¯•ã€‚ä½†æ˜¯æ„Ÿè§‰æ— ä»ä¸‹æ‰‹ï¼Œæ¯”å¦‚ï¼Œå¦‚ä½•æ£€æµ‹æ˜¯å¦ç»˜åˆ¶çš„å¯¹ä¸å¯¹å•Šã€‚ä¹‹ç±»çš„ã€‚æ±‚å„ä½å¤§ç¥æŒ‡ç‚¹ä¸€ä¸‹ã€‚æˆ–è€…æ˜¯è¯´æœ‰ä»€ä¹ˆå‰ç«¯å¥½ç”¨çš„æµ‹è¯•æ¡†æ¶æ±‚æ¨è</p>\n</div>",
      "title": "å‰ç«¯ä»£ç è¯¥å¦‚ä½•å»åšå•å…ƒæµ‹è¯•",
      "last_reply_at": "2019-07-26T05:53:31.671Z",
      "good": false,
      "top": false,
      "reply_count": 3,
      "visit_count": 377,
      "create_at": "2019-07-25T07:58:53.522Z",
      "author": {
        "loginname": "beiyio",
        "avatar_url": "//gravatar.com/avatar/0808e2b8693f46047e56d738e12e22ee?size=48"
      }
    },
    {
      "id": "5d357754b2b9222961dad163",
      "author_id": "5c29eb723898674067a79d76",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><p>æˆ‘æœ€æ–°å¼•ç”¨äº† jsonwebtokenã€‚ä¸€ç›´åšå‰ç«¯å†™ç™»å½•æ¯”è¾ƒæ‡µé€¼ï¼ï¼ï¼\n<a href=\"https://github.com/yangcecode/nlna\">é“¾æ¥</a></p>\n</div>",
      "title": "æœ€è¿‘åœ¨ç”¨ midway å†™ä¸€ä¸ªé¡¹ç›®ï¼Œå†™åˆ°ç™»å½•é˜¶æ®µäº†ï¼Œæœ‰å¤§ä½¬å¸®æˆ‘çœ‹ä¸€ä¸‹å’‹ä¸ªé€»è¾‘å—ï¼Ÿ",
      "last_reply_at": "2019-07-26T03:10:05.360Z",
      "good": false,
      "top": false,
      "reply_count": 6,
      "visit_count": 992,
      "create_at": "2019-07-22T08:44:04.336Z",
      "author": {
        "loginname": "yangcecode",
        "avatar_url": "https://avatars3.githubusercontent.com/u/37173735?v=4&s=120"
      }
    },
    {
      "id": "5c1c9ab676c4964062a1c3e1",
      "author_id": "5372465f3c72496d41009adc",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><p>ã€ŠNode.jså¼€å‘å®æˆ˜ã€‹åŸä¹¦æ’åå¹¶å‘ç¼–ç¨‹ç±»æ¦œé¦–ã€‚æœ‰è¯»è€…åç«è½¦åå°æ—¶ä¸€å£æ°”è¯»å®Œï¼Œæ¬²ç½¢ä¸èƒ½ï¼å¥½ä¸å¥½ï¼Œè¯•è¯»å°±çŸ¥é“ã€‚</p>\n<p><strong>62é¡µè¯•è¯»ä¸‹è½½</strong>ï¼š<a href=\"https://pan.baidu.com/s/1x3c35AmJV4rcEj_W3A1WGg\">https://pan.baidu.com/s/1x3c35AmJV4rcEj_W3A1WGg</a></p>\n<p><strong>è¯»è€…çƒ­è¯„</strong>ï¼š</p>\n<ul>\n<li>çœ‹çš„æ¬²ç½¢ä¸èƒ½å•Šï¼Œç«è½¦ä¸Šæ¥å›åä¸ªå°æ—¶ï¼ŒæŠŠæ•´ä½“å†…å®¹æµè§ˆäº†ä¸€éï¼Œç„¶åç°åœ¨ç²¾è¯»åˆ°ç¬¬äºŒå¼ ï¼Œå‘ç°å­¦åˆ°äº†å¥½å¤šä¸œè¥¿ï¼Œå¥½ä¹¦ã€‚\nâ€”â€”äº¬ä¸œè¯»è€… å°***åœŸ</li>\n</ul>\n<ul>\n<li>ç²—ç•¥çš„çœ‹äº†ä¸€é,å‡†å¤‡ç»†è¯»ä¸€ä¸‹,å¾ˆå¤šåœ°æ–¹ç»™è¯¦ç»†è®²äº†es6çš„æ–°ç‰¹æ€§,åŒ…æ‹¬letã€constã€è¿˜æœ‰classå’Œpromise,è¿˜è®²è§£äº†asyncå’Œawait,åæ­£ä¸å¤ªéœ€è¦æœ‰es6åŸºç¡€ä¹Ÿèƒ½çœ‹å¾—æ‡‚,ä¸è¿‡éƒ½è¦2019äº†,å…¶å®è¿™äº›åº”è¯¥æ˜¯å‰ç«¯å¿…å¤‡æŠ€èƒ½äº†å§.ä¹¦å†™çš„å¾ˆå¥½,å¾ªåºæ¸è¿›,æ„Ÿè§‰å‰ç«¯åœ¨æ²¡ææ‡‚nodeä¹‹å‰,å…¶å®å¹¶ä¸éœ€è¦å»å­¦pyå•Šphpå•Šä¹‹ç±»çš„,è¯­è¨€æ¯•ç«Ÿåªæ˜¯å·¥å…·,åˆ©ç”¨å·¥å…·åšäº‹æƒ…çš„ç†å¿µæ˜¯æƒ³é€šçš„.(æœ€åè¿™å¥è¯´ç»™æˆ‘è‡ªå·±çš„)\nâ€”â€”è±†ç“£è¯»è€… é™ˆå°åœŸ</li>\n</ul>\n<ul>\n<li>å¾ˆä¸é”™çš„ä¸€æœ¬å…³äºnodeçš„å®æˆ˜ä¹¦ï¼\nâ€”â€”äº¬ä¸œè¯»è€… f***8</li>\n</ul>\n<ul>\n<li>å†…å®¹ç”±æµ…å…¥æ·±ï¼Œå¼•äººå…¥èƒœã€‚\nâ€”â€”äº¬ä¸œè¯»è€… d***t</li>\n</ul>\n<p><strong>äº¬ä¸œæœ‰å”®</strong>ï¼š<a href=\"https://item.jd.com/12460185.html\">https://item.jd.com/12460185.html</a></p>\n<p><img src=\"//static.cnodejs.org/Finp2H7di-Equ_yMWsjJY6hxYGkh\" alt=\"WechatIMG148 copy.jpg\"></p>\n</div>",
      "title": "æ–°ä¹¦ã€ŠNode.jså¼€å‘å®æˆ˜ã€‹æŠ¢é²œè¯•è¯»",
      "last_reply_at": "2019-07-26T03:02:10.490Z",
      "good": false,
      "top": false,
      "reply_count": 26,
      "visit_count": 7762,
      "create_at": "2018-12-21T07:48:06.079Z",
      "author": {
        "loginname": "meikidd",
        "avatar_url": "https://avatars0.githubusercontent.com/u/376338?v=4&s=120"
      }
    },
    {
      "id": "5d3a6553b4725a628e268c9b",
      "author_id": "572c54718783d212174bd765",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><p>ä¸­é—´å› ä¸ºå¼„æ¯”è¾ƒå¤æ‚çš„åœ¨çº¿èŠå¤©ï¼Œè€½è¯¯äº†ä¸€ä¸ªæœˆï¼ŒæŠ±æ­‰ã€‚å…ˆè¯´ä¸‹ç»“æœï¼Œç›®å‰å·²ç»åœ¨å¤šä¸ªç¯å¢ƒä¸‹ç»è¿‡éªŒè¯ï¼ŒåŒ…æ‹¬iosã€Androidã€å¾®ä¿¡å…¬ä¼—å·ã€å¾®ä¿¡å°ç¨‹åº(å¯¹ï¼Œå°ç¨‹åºä¹Ÿèƒ½æçº¯H5é¡¹ç›®)ï¼Œéƒ½æ˜¯è¾ƒå¤æ‚çš„ä¸šåŠ¡ï¼Œå…¨éƒ½æ˜¯åœ¨webviewä¸‹çš„çº¯H5å•é¡µé¡¹ç›®ï¼Œèƒ½å¤Ÿå®Œç¾è§£å†³æˆ‘ä»¬ä¸šåŠ¡ä¸Šçš„éœ€æ±‚ã€‚</p>\n<p>åœ¨npmä¸Šæ¨é€äº†1.0.0ç‰ˆæœ¬ï¼Œæˆ‘ä»¬å†…éƒ¨é¡¹ç›®å·²ç»å¼€å§‹æ­£å¼ä½¿ç”¨ã€‚æ¬¢è¿ä½¿ç”¨ï¼Œæ¬¢è¿Starï¼Œå¸Œæœ›èƒ½å¸®åˆ°ä½ ã€‚</p>\n<p><a href=\"https://github.com/hezhongfeng/vue-page-stack\">é¡¹ç›®åœ°å€</a></p>\n<p>ä¸äº†è§£è§£å†³äº†ä»€ä¹ˆé—®é¢˜çš„å°ä¼™ä¼´å¯ä»¥çœ‹çœ‹<a href=\"https://segmentfault.com/a/1190000019395215\">å‰æƒ…æè¦</a></p>\n<h2>æ€§èƒ½</h2>\n<p>å…ˆè¯´ä¸€ä¸‹å¤§å®¶æœ€å…³å¿ƒçš„æ€§èƒ½é—®é¢˜ï¼Œæ¯”<code>Vue</code>è‡ªå¸¦çš„<code>keep-alive</code>ç»„ä»¶è¦å¥½å¾ˆå¤šï¼Œå› ä¸º<code>keep-alive</code>ç¼“å­˜ä¸€æ¬¡ä¹‹ååœ¨<code>keep-alive</code>ç»„ä»¶<code>destroyed</code>ä¹‹å‰æ‰€æœ‰çš„ç¼“å­˜æ˜¯ä¸ä¼šé”€æ¯çš„ï¼Œä½†æ˜¯<code>vue-page-stack</code>æ˜¯æ ¹æ®UIå±‚çº§å…³ç³»è¿›è¡Œç¼“å­˜å’Œé”€æ¯çš„ã€‚ä¸‹é¢ä½¿ç”¨<code>vue-devtool</code>å±•ç¤ºä¸¤è€…çš„ä¸åŒ</p>\n<p><img src=\"https://i.loli.net/2019/07/26/5d3a6df8bb23544915.gif\" alt></p>\n<p><img src=\"https://i.loli.net/2019/07/26/5d3a6e033cdad90872.gif\" alt></p>\n<p>é€šè¿‡ä¸Šå›¾æˆ‘ä»¬å¯ä»¥æ¸…æ¥šåœ°çœ‹è§æ¿€æ´»ç»„ä»¶å’Œç¼“å­˜ç»„ä»¶çš„çŠ¶æ€ï¼Œ<code>vue-page-stack</code>å°†æ ˆä¸Šçš„UIå­˜å‚¨ï¼Œå›é€€çš„æ—¶å€™å†æ‹¿å‡ºæ¥æ¿€æ´»ï¼Œå¹¶ä¸”å°†ä¸ç”¨çš„ç»„ä»¶ç¼“å­˜æ¸…é™¤ï¼›è€Œ<code>keep-alive</code>ä¼šæŠŠä½ æ¿€æ´»è¿‡çš„æ‰€æœ‰ç»„ä»¶éƒ½ç¼“å­˜ä¸‹æ¥</p>\n<h2>åŸç†</h2>\n<p>ä¸Šæ¬¡ä¹Ÿè¯´è¿‡äº†ï¼Œæ˜¯å‚è€ƒçš„<code>keep-alive</code>çš„ä»£ç ï¼Œä¸‹é¢ç²˜å‡ºéƒ¨åˆ†ä»£ç ï¼Œä»¥ä¾›å‚è€ƒ</p>\n<pre class=\"prettyprint\"><code>render() {\n  let key = this.$route.query[keyName];\n  const slot = this.$slots.default;\n  &#x2F;&#x2F; è·å–å½“å‰é¡µé¢çš„vnode\n  const vnode = getFirstComponentChild(slot);\n  if (!vnode) {\n    return vnode;\n  }\n  &#x2F;&#x2F; æŸ¥çœ‹å½“å‰é¡µé¢æ˜¯å¦æœ‰ç¼“å­˜\n  let index = getIndexByKey(key);\n  if (index !== -1) {\n    &#x2F;&#x2F; æœ‰ç¼“å­˜çš„è¯å°±å–å‡ºç¼“å­˜ï¼Œå¹¶ä¸”æ¸…é™¤æ’åœ¨ä»–åé¢çš„æ‰€æœ‰vnode\n    vnode.componentInstance = stack[index].vnode.componentInstance;\n    &#x2F;&#x2F; destroy the instances that will be spliced\n    for (let i = index + 1; i &lt; stack.length; i++) {\n      stack[i].vnode.componentInstance.$destroy();\n      stack[i] = null;\n    }\n    stack.splice(index + 1);\n  } else {\n    &#x2F;&#x2F; æ²¡æœ‰ç¼“å­˜å°±æ˜¯æ–°çš„é¡µé¢ï¼Œéœ€è¦å­˜å‚¨æˆ–è€…æ˜¯replaceå½“å‰é¡µé¢\n    if (history.action === config.replaceName) {\n      &#x2F;&#x2F; destroy the instance\n      stack[stack.length - 1].vnode.componentInstance.$destroy();\n      stack[stack.length - 1] = null;\n      stack.splice(stack.length - 1);\n    }\n    &#x2F;&#x2F; å‘æ ˆé‡Œé¢push\n    stack.push({ key, vnode });\n  }\n  vnode.data.keepAlive = true;\n  return vnode;\n}\n</code></pre><h1>vue-page-stack</h1>\n<p><a href=\"https://badge.fury.io/js/vue-page-stack\"><img src=\"https://badge.fury.io/js/vue-page-stack.svg\" alt=\"npm version\"></a></p>\n<p><a href>English</a> | ç®€ä½“ä¸­æ–‡</p>\n<hr>\n<p>Vue å•é¡µåº”ç”¨å¯¼èˆªç®¡ç†å™¨ï¼ŒåƒåŸç”Ÿappä¸€æ ·ç®¡ç†é¡µé¢æ ˆè€Œä¸æ˜¯é”€æ¯ã€‚</p>\n<p><img src=\"https://i.loli.net/2019/07/22/5d35618b25fb449357.gif\" alt></p>\n<h2>Example</h2>\n<p><a href=\"https://hezhongfeng.github.io/vue-page-stack-example/\">é¢„è§ˆ</a></p>\n<p><a href=\"https://github.com/hezhongfeng/vue-page-stack-example\">ç¤ºä¾‹æºç </a></p>\n<h2>åŠŸèƒ½ç‰¹æ€§</h2>\n<ul>\n<li>ğŸ‰åœ¨vue-routerä¸Šæ‰©å±•ï¼ŒåŸæœ‰å¯¼èˆªé€»è¾‘ä¸å˜</li>\n<li>âš½<code>push</code>æˆ–è€…<code>forward</code>çš„æ—¶å€™é‡æ–°æ¸²æŸ“é¡µé¢ï¼ŒStackä¸­ä¼šæ·»åŠ æ–°æ¸²æŸ“çš„é¡µé¢</li>\n<li>ğŸ†<code>back</code>æˆ–è€…<code>go(è´Ÿæ•°)</code>çš„æ—¶å€™ä¸ä¼šé‡æ–°æ¸²æŸ“ï¼Œä»Stackä¸­è¯»å–å…ˆå‰çš„é¡µé¢ï¼Œä¼šä¿ç•™å¥½å…ˆå‰çš„å†…å®¹çŠ¶æ€ï¼Œä¾‹å¦‚è¡¨å•å†…å®¹ï¼Œæ»šåŠ¨æ¡æ»‘åŠ¨çš„ä½ç½®ç­‰</li>\n<li>ğŸˆ<code>back</code>æˆ–è€…<code>go(è´Ÿæ•°)</code>çš„æ—¶å€™ä¼šæŠŠä¸ç”¨çš„é¡µé¢ä»Stackä¸­ç§»é™¤</li>\n<li>ğŸ“<code>replace</code>ä¼šæ›´æ–°Stackä¸­å½“å‰é¡µé¢</li>\n<li>ğŸ‰å›é€€åˆ°ä¹‹å‰é¡µé¢çš„æ—¶å€™æœ‰activitedé’©å­å‡½æ•°è§¦å‘</li>\n<li>ğŸš€æ”¯æŒæµè§ˆå™¨çš„åé€€ï¼Œå‰è¿›äº‹ä»¶</li>\n<li>ğŸ•æ”¯æŒå“åº”è·¯ç”±å‚æ•°çš„å˜åŒ–ï¼Œä¾‹å¦‚ä» /user/foo å¯¼èˆªåˆ° /user/barï¼Œç»„ä»¶å®ä¾‹ä¼šè¢«å¤ç”¨</li>\n<li>ğŸ°æä¾›è·¯ç”±æ–¹å‘çš„å˜åŒ–ï¼Œå¯ä»¥åœ¨å‰è¿›å’Œåé€€çš„æ—¶å€™æ·»åŠ ä¸åŒçš„åŠ¨ç”»</li>\n</ul>\n<h2>å®‰è£…å’Œç”¨æ³•</h2>\n<h3>å®‰è£…</h3>\n<pre class=\"prettyprint\"><code>npm install vue-page-stack\n# OR\nyarn add vue-page-stack\n</code></pre><h3>ä½¿ç”¨</h3>\n<pre class=\"prettyprint\"><code>import Vue from &#x27;vue&#x27;\nimport VuePageStack from &#x27;vue-page-stack&#x27;;\n\n&#x2F;&#x2F; vue-router is necessary\nVue.use(VuePageStack, { router }); \n</code></pre><pre class=\"prettyprint\"><code>&#x2F;&#x2F; App.vue\n&lt;template&gt;\n  &lt;div id=&quot;app&quot;&gt;\n    &lt;vue-page-stack&gt;\n      &lt;router-view &gt;&lt;&#x2F;router-view&gt;\n    &lt;&#x2F;vue-page-stack&gt;\n  &lt;&#x2F;div&gt;\n&lt;&#x2F;template&gt;\n</code></pre><h3>CDN</h3>\n<pre class=\"prettyprint\"><code>&lt;script src=&quot;https:&#x2F;&#x2F;unpkg.com&#x2F;vue-page-stack&#x2F;dist&#x2F;vue-page-stack.js&quot;&gt;&lt;&#x2F;script&gt;\n</code></pre><pre class=\"prettyprint\"><code>Vue.use(VuePageStack.default, { router });\n</code></pre><h2>API</h2>\n<h3>æ³¨å†Œæ’ä»¶</h3>\n<p>æ³¨å†Œçš„æ—¶å€™å¯ä»¥æŒ‡å®šVuePageStackçš„åå­—å’ŒkeyName</p>\n<p>use <code>Vue.use</code> to install <code>vue-page-stack</code>\nä½¿ç”¨ä¹‹å‰éœ€è¦æ³¨å†Œæ’ä»¶</p>\n<pre class=\"prettyprint\"><code>Vue.use(VuePageStack, options);\n&#x2F;&#x2F; example\nVue.use(VuePageStack, { router });\n</code></pre><p>Options è¯´æ˜ï¼š</p>\n<table>\n<thead>\n<tr>\n<th>Attribute</th>\n<th>Description</th>\n<th>Type</th>\n<th>Accepted Values</th>\n<th>Default</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>router</td>\n<td>vue-router instance</td>\n<td>Object</td>\n<td>vue-router instance</td>\n<td>-</td>\n</tr>\n<tr>\n<td>name</td>\n<td>VuePageStack name</td>\n<td>String</td>\n<td>â€˜VuePageStackâ€™</td>\n<td>â€˜VuePageStackâ€™</td>\n</tr>\n<tr>\n<td>keyName</td>\n<td>stack-key name</td>\n<td>String</td>\n<td>â€˜stack-keyâ€™</td>\n<td>â€˜stack-keyâ€™</td>\n</tr>\n</tbody>\n</table>\n<p>æ³¨å†Œçš„æ—¶å€™å¯ä»¥æŒ‡å®šVuePageStackçš„åå­—å’ŒkeyName</p>\n<pre class=\"prettyprint\"><code>Vue.use(VuePageStack, { router, name: &#x27;VuePageStack&#x27;, keyName: &#x27;stack-key&#x27; });\n</code></pre><h3>å‰è¿›å’Œåé€€</h3>\n<p>å¦‚æœæƒ³åœ¨é¡µé¢å‰è¿›æˆ–è€…åé€€çš„æ—¶å€™æ·»åŠ ä¸€äº›åŠ¨ç”»ï¼Œå¯ä»¥é€šè¿‡<code>stack-key-dir</code>è¿›è¡Œåˆ¤æ–­</p>\n<pre class=\"prettyprint\"><code>&#x2F;&#x2F; App.vue\n$route(to, from) {\n  if (to.params[&#x27;stack-key-dir&#x27;] === &#x27;forward&#x27;) {\n    this.transitionName = &#x27;forward&#x27;;\n  } else {\n    this.transitionName = &#x27;back&#x27;;\n  }\n}\n</code></pre><p><a href=\"https://github.com/hezhongfeng/vue-page-stack-example/blob/master/src/App.vue\">example</a></p>\n<h2>ç›¸å…³è¯´æ˜</h2>\n<h3>keyName</h3>\n<p>ä¸ºä»€ä¹ˆä¼šç»™è·¯ç”±æ·»åŠ <code>keyName</code>è¿™ä¸ªå‚æ•°ï¼Œæ˜¯ä¸ºäº†æ”¯æŒæµè§ˆå™¨çš„åé€€ï¼Œå‰è¿›äº‹ä»¶ï¼Œè¿™ä¸ªç‰¹æ€§åœ¨webApp,å¾®ä¿¡å…¬ä¼—å·å’Œå°ç¨‹åºå¾ˆé‡è¦</p>\n<h3>åŸç†</h3>\n<p>è·å–å½“å‰é¡µé¢å®ä¾‹éƒ¨åˆ†å‚è€ƒäº†<code>Vue</code>æºç ä¸­<code>keep-alive</code>çš„éƒ¨åˆ†</p>\n<h2>æ„Ÿè°¢</h2>\n<p>è¿™ä¸ªæ’ä»¶åŒæ—¶å€Ÿé‰´äº†<a href=\"https://github.com/zack24q/vue-navigation\">vue-navigation</a>å’Œ<a href=\"https://github.com/nearspears/vue-nav\">vue-nav</a>ï¼Œå¾ˆæ„Ÿè°¢ä»–ä»¬ç»™çš„çµæ„Ÿã€‚</p>\n</div>",
      "title": "ã€vue-page-stackã€‘Vue å•é¡µåº”ç”¨å¯¼èˆªç®¡ç†å™¨ æ­£å¼å‘å¸ƒ",
      "last_reply_at": "2019-07-26T02:28:35.812Z",
      "good": false,
      "top": false,
      "reply_count": 0,
      "visit_count": 206,
      "create_at": "2019-07-26T02:28:35.812Z",
      "author": {
        "loginname": "hezhongfeng",
        "avatar_url": "https://avatars2.githubusercontent.com/u/12163050?v=4&s=120"
      }
    },
    {
      "id": "5d3a632db4725a628e268c84",
      "author_id": "5cf0fa211fe902120f31b023",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><p><img src=\"//static.cnodejs.org/FtSpH4yOeWtBNlcGKk31_DuKztlP\" alt=\"VCG41N1069771644.jpg\"></p>\n<h3>å¯¼ è¯­</h3>\n<p>ç»§æ”¯æŒå°ç¨‹åºå¼€å‘ä¹‹åï¼Œäº‘å¼€å‘ä¹Ÿæ”¯æŒWebä½¿ç”¨å•¦ï¼å¼€å‘è€…ä»¬å¯ä»¥ä½¿ç”¨äº‘å¼€å‘æä¾›çš„äº‘ç«¯èƒ½åŠ›ï¼Œç›´æ¥å¼€å‘ç½‘ç«™åº”ç”¨ï¼Œå¦‚PCç«¯ç½‘é¡µã€å…¬ä¼—å·ä¸­çš„ç½‘é¡µç­‰ã€‚ç”±æ­¤å¼€å‘è€…å¯ä»¥åœ¨ç½‘ç«™åº”ç”¨ä¸­å€ŸåŠ©äº‘å‡½æ•°å®ç°ä¸šåŠ¡é€»è¾‘ï¼Œé€šè¿‡ä¸äº‘æ•°æ®åº“ã€å¯¹è±¡å­˜å‚¨ä»¥åŠCDNç­‰äº§å“è”åŠ¨ï¼Œå³å¯å®ç°äº§å“å¿«é€Ÿä¸Šçº¿å’Œè¿­ä»£ã€‚å¿«æ¥ä½“éªŒå§ï¼</p>\n<p>é¦–å…ˆï¼Œè¿˜æ˜¯å¾—è·Ÿå„ä½å°ä¼™ä¼´ä»¬ä»‹ç»ä¸‹åŠŸèƒ½å¼ºå¤§çš„äº‘å¼€å‘åˆ°åº•æ˜¯ä½•æ–¹ç¥åœ£ï¼</p>\n<p>äº‘å¼€å‘ï¼ˆTencent CloudBaseï¼‰æ˜¯è…¾è®¯äº‘ä¸ºç§»åŠ¨å¼€å‘è€…æä¾›çš„ä¸€ç«™å¼åç«¯äº‘æœåŠ¡ï¼Œæ— éœ€æ­å»ºæœåŠ¡å™¨ï¼Œå°±å¯ä»¥è½»æ¾ä½¿ç”¨äº‘ç«¯èƒ½åŠ›ã€‚åŸºäºäº‘å¼€å‘ï¼Œå¼€å‘è€…æ— éœ€å†å…³å¿ƒæœåŠ¡å™¨å’Œåº•å±‚è®¾æ–½è¿ç»´ï¼Œåªéœ€ä¸“æ³¨äºä»£ç é€»è¾‘å’Œä¸šåŠ¡æœ¬èº«ã€‚</p>\n<p>ç›®å‰äº‘å¼€å‘æ”¯æŒ <strong>å°ç¨‹åºå¼€å‘</strong> å’Œ <strong>Webå¼€å‘</strong>ã€‚</p>\n<h3>äº‘å¼€å‘ä¸‰å¤§åŸºç¡€åŠŸèƒ½</h3>\n<p>ç›®å‰äº‘å¼€å‘æä¾›äº†ä¸‰å¤§åŸºç¡€èƒ½åŠ›ï¼š<strong>äº‘æ•°æ®åº“</strong>ã€<strong>äº‘å­˜å‚¨</strong>åŠ<strong>äº‘å‡½æ•°</strong>ã€‚è¿™ä¸‰ç§èƒ½åŠ›å¯ä»¥æ„æˆè¾ƒå®Œæ•´çš„åç«¯å¼€å‘èƒ½åŠ›ã€‚</p>\n<h4>äº‘å‡½æ•°</h4>\n<p>åœ¨äº‘ç«¯è¿è¡Œçš„ä»£ç ï¼Œå¼€å‘è€…åªéœ€ç¼–å†™è‡ªèº«ä¸šåŠ¡é€»è¾‘ä»£ç ã€‚</p>\n<p>äº‘ç«¯è¿è¡Œï¼šæ— éœ€é‡‡è´­ã€éƒ¨ç½²ã€è¿ç»´ä¼ ç»Ÿç¡¬ä»¶ï¼ŒèŠ‚çº¦äººåŠ›åŠæˆæœ¬ã€‚\né«˜æ•ˆå¼€å‘ï¼šæ¯ä¸ªå‡½æ•°å•ç‹¬è¿è¡Œã€éƒ¨ç½²ï¼Œä¸Šä¼ ä»£ç åå³å¯è‡ªåŠ¨éƒ¨ç½²ï¼Œæå‡äº†ç‹¬ç«‹å¼€å‘å’Œè¿­ä»£çš„é€Ÿåº¦ã€‚\nå¼¹æ€§ä¼¸ç¼©ï¼šæ ¹æ®è¯·æ±‚é‡å®ç°æ¯«ç§’çº§å®æ—¶å¼¹æ€§ä¼¸ç¼©ï¼Œå‡½æ•°æœªæ‰§è¡Œä¸äº§ç”Ÿä»»ä½•è´¹ç”¨ã€‚</p>\n<h4>äº‘æ•°æ®åº“</h4>\n<p>æ–‡æ¡£å‹æ•°æ®åº“åŒ…å«å¤šä¸ªè¿‘ä¼¼äº JSON æ•°ç»„çš„é›†åˆï¼Œæ•°ç»„ä¸­çš„å¯¹è±¡æ˜¯è®°å½•ï¼Œæ ¼å¼ä¸º JSON æ–‡æ¡£ã€‚</p>\n<p>ç®€å•æ˜“ç”¨ï¼šæ•°æ®åº“ API åŒ…å«å¢åˆ æ”¹æŸ¥ï¼Œæ“ä½œç®€å•ï¼›æ”¯æŒè§¦å‘å™¨ï¼Œæ»¡è¶³ç‰¹æ®Šåœºæ™¯ã€‚\næƒé™æ§åˆ¶ï¼šé€šè¿‡ API åœ¨å®¢æˆ·ç«¯å†…å’Œäº‘å‡½æ•°å†…è¿›è¡Œæ•°æ®æ“ä½œï¼Œå®‰å…¨å¯é ã€‚</p>\n<h4>äº‘å­˜å‚¨</h4>\n<p>åœ¨ç½‘ç«™åº”ç”¨å‰ç«¯ç›´æ¥ä¸Šä¼ æˆ–ä¸‹è½½äº‘ç«¯æ–‡ä»¶ï¼Œåœ¨äº‘å¼€å‘æ§åˆ¶å°å¯è§†åŒ–ç®¡ç†ã€‚</p>\n<p>å¿«é€Ÿä¸Šä¼ ï¼šæä¾›æ–‡ä»¶å­˜å‚¨ç©ºé—´ï¼Œå¯åœ¨å®¢æˆ·ç«¯å’Œäº‘å‡½æ•°ç«¯é€šè¿‡ API ä½¿ç”¨å­˜å‚¨ã€‚\næƒé™ç®¡ç†ï¼šåŸºäºç”¨æˆ·èº«ä»½çš„å®‰å…¨æ§åˆ¶ï¼Œå¸¦æƒé™ç®¡ç†çš„äº‘ç«¯ä¸‹è½½ã€‚\nCDN åŠ é€Ÿï¼šå­˜å‚¨å†…çš„æ–‡ä»¶ï¼Œå¤©ç„¶ CDN åŠ é€Ÿï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚</p>\n<h3>äº‘å¼€å‘ä¼˜åŠ¿</h3>\n<p><strong>å¼€å‘æ›´ç®€å•</strong>\nä½¿ç”¨äº‘å‡½æ•°æ—¶ï¼Œç”¨æˆ·åªéœ€ç¼–å†™æœ€é‡è¦çš„æ ¸å¿ƒä¸šåŠ¡ä»£ç ï¼Œä¸å†éœ€è¦å…³å¿ƒè´Ÿè½½å‡è¡¡ã€è‡ªåŠ¨ä¼¸ç¼©ã€ç½‘å…³ç­‰ç»„ä»¶ï¼Œä¹Ÿæ— éœ€æ„å»ºåº”ç”¨çš„åç«¯æœåŠ¡ï¼Œæå¤§åœ°é™ä½äº†åç«¯å¼€å‘æ­å»ºçš„å¤æ‚æ€§ã€‚æ— éœ€æ‰‹åŠ¨é…ç½®ï¼Œäº‘å‡½æ•°å³å¯æ ¹æ®è¯·æ±‚é‡è‡ªåŠ¨æ¨ªå‘æ‰©ç¼©ï¼Œè‡ªåŠ¨å®‰æ’åˆç†çš„è®¡ç®—èµ„æºæ»¡è¶³ä¸šåŠ¡éœ€æ±‚ã€‚</p>\n<h4>å¼€å‘æ›´é«˜æ•ˆå¿«æ·</h4>\n<p>äº‘å‡½æ•°ä¸è¦æ±‚ç‰¹å®šæ¡†æ¶æˆ–ä¾èµ–ï¼Œå¼€å‘è€…å¯ä»¥ä¸“æ³¨äºæ ¸å¿ƒä»£ç çš„å¼€å‘ã€‚åŒæ—¶å¼€å‘äººå‘˜å¯ä»¥ç»„æˆå¤šä¸ªå°å›¢é˜Ÿï¼Œå•ä¸ªæ¨¡å—çš„å¼€å‘æ— éœ€äº†è§£å…¶ä»–å›¢é˜Ÿçš„ä»£ç ç»†èŠ‚ã€‚\nç‹¬ç«‹å¼€å‘å’Œè¿­ä»£çš„é€Ÿåº¦å˜å¾—å‰æ‰€æœªæœ‰çš„å¿«ï¼Œå¸®åŠ©ç”¨æˆ·æŠŠæ¡ä½äº§å“ä¸Šçº¿çš„é»„é‡‘æ—¶é—´ã€‚å¼€å‘å¯ä»¥ä½¿ç”¨äº‘å‡½æ•°ç¼–å†™ä¸€äº›ç›®çš„å•ä¸€ã€é€»è¾‘ç‹¬ç«‹çš„ä¸šåŠ¡æ¨¡å—ï¼Œå› è€Œå¯ä»¥å®Œå…¨å¤ç”¨å·²ç»æˆç†Ÿçš„ç¬¬ä¸‰æ–¹ä»£ç å®ç°ã€‚</p>\n<p><strong>è¿ç»´æ›´çœäº‹</strong>\næ¯ä¸ªäº‘å‡½æ•°éƒ½æ˜¯å•ç‹¬è¿è¡Œã€å•ç‹¬éƒ¨ç½²ã€å•ç‹¬ä¼¸ç¼©ï¼Œç”¨æˆ·ä¸Šä¼ ä»£ç åå³å¯è‡ªåŠ¨éƒ¨ç½²ï¼Œå…é™¤å•ä½“å¼åº”ç”¨éƒ¨ç½²å‡çº§éš¾çš„é—®é¢˜ã€‚\nç”¨æˆ·ä¸å†éœ€è¦å¯¹ OS å…¥ä¾µã€ç™»å½•é£é™©ã€æ–‡ä»¶ç³»ç»Ÿå®‰å…¨ã€ç½‘ç»œå®‰å…¨å’Œç«¯å£ç›‘å¬åšå¤æ‚çš„é…ç½®å’Œç®¡ç†ï¼Œä¸€åˆ‡äº¤ç”±å¹³å°å¤„ç†ï¼Œå¹³å°é€šè¿‡å®šåˆ¶åŒ–çš„å®¹å™¨ä¿è¯æ¯ä¸ªç”¨æˆ·çš„éš”ç¦»æ€§ã€‚</p>\n<p><strong>æˆæœ¬æ›´ä½</strong>\næŒ‰è¯·æ±‚æ•°å’Œèµ„æºç«¯è¿è¡Œæ”¶è´¹ï¼Œæå¤§èŠ‚çº¦æ—¶é—´å’Œæˆæœ¬ï¼ŒåŒæ—¶è¿˜æä¾›ä¸€å®šé‡ç«¯å…è´¹é¢åº¦ã€‚</p>\n<h3>å¦‚ä½•å¼€é€šäº‘å¼€å‘çš„Webç«¯æœåŠ¡ï¼Ÿ</h3>\n<p>äº‘å¼€å‘Webç«¯æœåŠ¡åœ¨è…¾è®¯äº‘å®˜ç½‘ç™»å½•ä½¿ç”¨ã€‚ç›®å‰ï¼Œäº‘å¼€å‘Web ç«¯ä»…æ”¯æŒé€šè¿‡å¾®ä¿¡å…¬ä¼—å·ç™»å½•æ–¹å¼è¿›è¡ŒæœåŠ¡ç«¯è®¿é—®æˆæƒï¼Œæ•…å¼€å‘è€…è‹¥è¦å¼€å‘ç½‘ç«™åº”ç”¨ï¼Œéœ€è¦å…ˆåœ¨å¾®ä¿¡å…¬ä¼—å¹³å°/å¾®ä¿¡å¼€æ”¾å¹³å°è¿›è¡Œåº”ç”¨æ³¨å†ŒåŠå¼€é€šã€‚</p>\n<p>ï¼ˆè¯¦ç»†å¼€é€šæµç¨‹å¯å‚è€ƒä¸‹å›¾ï¼‰\n<img src=\"//static.cnodejs.org/Fs97pO6g3Dk1n474hnbEEjfdJvLD\" alt=\"image.png\">\nè¿›å…¥äº‘å¼€å‘ä¸»é¡µ</p>\n<p><img src=\"//static.cnodejs.org/FjNoPwzx3oRL-Iz5s4ujjLOadqFr\" alt=\"image.png\">\né€‰æ‹©â€œå¾®ä¿¡å…¬ä¼—å·â€ç™»å½•</p>\n<p><img src=\"//static.cnodejs.org/FoWq47r9JnRZGz-Knti2mVvYG0Q4\" alt=\"image.png\">\nç‚¹å‡»æˆæƒ</p>\n<p><img src=\"//static.cnodejs.org/FvaNg5zhNZcahXx2biEK1B_K9dWi\" alt=\"image.png\">\nè¿›å…¥äº‘å¼€å‘æ§åˆ¶å°ï¼Œæ–°å»ºç¯å¢ƒ</p>\n<p><img src=\"//static.cnodejs.org/FnT0-skVv4cjMmHre-74Ud4Wmluu\" alt=\"image.png\">\nå¡«å†™ç¯å¢ƒä¿¡æ¯ï¼Œå¼€é€šæˆåŠŸï¼</p>\n<h3>Quick Startâ€”â€”ä½¿ç”¨äº‘å¼€å‘Web SDK å¿«é€Ÿå¼€å‘ç½‘ç«™åº”ç”¨</h3>\n<h4>åˆå§‹åŒ–äº‘å¼€å‘èƒ½åŠ›</h4>\n<p><img src=\"//static.cnodejs.org/FmqSrkbhK_WGLq3uWEQkDKDavxqb\" alt=\"image.png\"></p>\n<h4>ç™»å½•æˆæƒ</h4>\n<p>äº‘å¼€å‘ç›®å‰åœ¨ Web ç«¯æ”¯æŒé€šè¿‡å¾®ä¿¡ç™»å½•æ–¹å¼è¿›è¡ŒæœåŠ¡ç«¯è®¿é—®æˆæƒï¼Œæ•…å¼€å‘è€…è‹¥è¦å¼€å‘ç½‘ç«™åº”ç”¨ï¼Œéœ€è¦å…ˆåœ¨å¾®ä¿¡å…¬ä¼—å¹³å°/å¾®ä¿¡å¼€æ”¾å¹³å°è¿›è¡Œåº”ç”¨æ³¨å†ŒåŠå¼€é€šã€‚</p>\n<p>é™¤äº†å¾®ä¿¡å…¬ä¼—å¹³å°å’Œå¾®ä¿¡å¼€æ”¾å¹³å°ç™»å½•æ–¹å¼ä»¥å¤–ï¼Œäº‘å¼€å‘å°†é™†ç»­æ”¯æŒé‚®ç®±ã€QQã€åŒ¿åç™»å½•ã€è‡ªå®šä¹‰ç™»å½•ç­‰å¤šç§ç™»å½•æ–¹å¼ï¼Œæ•¬è¯·æœŸå¾…ã€‚\n<img src=\"//static.cnodejs.org/FnBjutjAAI6f6wkVdVVwz97pPCLV\" alt=\"image.png\"></p>\n<h4>åº”ç”¨å…³è”</h4>\n<p>è¦ä½¿ç”¨äº‘å¼€å‘æä¾›çš„äº‘å‡½æ•°ã€äº‘å­˜å‚¨å’Œäº‘æ•°æ®åº“çš„åŠŸèƒ½ï¼Œæ‚¨éœ€è¦å…ˆå°†äº‘å¼€å‘æ·»åŠ åˆ°æ‚¨çš„ç½‘ç«™åº”ç”¨ä¸­ï¼Œå³åº”ç”¨å…³è”ã€‚å°†äº‘å¼€å‘æä¾›çš„ Web ç«¯ SDK å…³è”åˆ°æ‚¨çš„ç½‘ç«™åº”ç”¨ï¼Œæ‰èƒ½ä½¿å®¢æˆ·ç«¯é€šè¿‡ SDK æ“ä½œåå°èµ„æºã€‚å¤åˆ¶ä¸‹æ–¹çš„ä»£ç ç‰‡æ®µï¼Œç²˜è´´åˆ°æ‚¨çš„ HTML ä»£ç åº•éƒ¨ï¼ˆè¦åœ¨å…¶ä»– script æ ‡è®°ä¹‹å‰ï¼‰ï¼Œå³å¯å°†äº‘å¼€å‘æ·»åŠ è‡³æ‚¨çš„ç½‘ç«™åº”ç”¨ã€‚\n<img src=\"//static.cnodejs.org/Fkkf3n3byhHktpSwNp0qhhv6GoS-\" alt=\"image.png\"></p>\n<h4>åŸŸåæˆæƒ</h4>\n<p>ä¸ºäº†å¢åŠ å®‰å…¨æ€§ï¼Œäº‘å¼€å‘çš„èº«ä»½éªŒè¯æœåŠ¡éœ€è¦å…ˆå¯¹ç½‘ç«™åº”ç”¨æ¥æºè¿›è¡ŒéªŒè¯ï¼Œä¹Ÿå³æ˜¯åŸŸåæˆæƒã€‚åªæœ‰å·²æˆæƒåŸŸåä¸‹çš„é¡µé¢æ‰å¯ä»¥ä½¿ç”¨ SDK å‘èµ·å¯¹äº‘å¼€å‘æœåŠ¡çš„è®¿é—®ã€‚å°†ç½‘ç«™å®Œæ•´åŸŸåæ·»åŠ åˆ°å®‰å…¨éªŒè¯åˆ°ç™½åå•ä¸­ï¼Œå³å®Œæˆæˆæƒã€‚\n<img src=\"//static.cnodejs.org/FqJzoA41QCh3qDhkWF9NovL-LmoQ\" alt=\"image.png\"></p>\n<h4>æ“ä½œæ•°æ®åº“</h4>\n<p>å¿«é€Ÿå®Œæˆå¯¹æ•°æ®åº“åŸºç¡€çš„ CRUD åŠæœåŠ¡ç«¯æ—¶é—´ï¼ˆserverDateï¼‰ã€æ­£åˆ™æŸ¥æ‰¾ï¼ˆregExpï¼‰å’Œåœ°ç†ä½ç½®ï¼ˆgeoï¼‰ç­‰ç‰¹æ®Šæ•°æ®ç»“æ„çš„ä½¿ç”¨ã€‚\n<img src=\"//static.cnodejs.org/Fvbs02rWViGuuxa9sP4Aba2hKudY\" alt=\"image.png\"></p>\n<h4>æ“ä½œæ–‡ä»¶å­˜å‚¨</h4>\n<p>å¿«é€Ÿå®Œæˆæ–‡ä»¶ä¸Šä¼ ã€è·å–ä¸‹è½½é“¾æ¥æˆ–è€…åˆ é™¤æ–‡ä»¶ç­‰æ“ä½œã€‚\n<img src=\"//static.cnodejs.org/FnaCckr7RvTJlV23jTBwieFPAmqe\" alt=\"image.png\"></p>\n<h4>æ“ä½œäº‘å‡½æ•°</h4>\n<p>å¿«é€Ÿå®ç°å¯¹äº‘å‡½æ•°çš„å®‰å…¨è°ƒç”¨ã€‚\n<img src=\"//static.cnodejs.org/FmRcakslPU3gEzYK0DW3LxlV2rWs\" alt=\"image.png\"></p>\n<p>å…³äºæ–°å¼€æ”¾Webç«¯äº‘å¼€å‘æœåŠ¡æœ‰ä»»ä½•é—®é¢˜æ¬¢è¿åœ¨ä¸‹æ–¹ç•™è¨€ï¼Œæˆ‘ä»¬ä¼šå°½å¿«å›å¤~</p>\n<p>å¦‚æœä½ æœ‰å…³äºä½¿ç”¨äº‘å¼€å‘CloudBaseç›¸å…³çš„æŠ€æœ¯æ•…äº‹/æŠ€æœ¯å®æˆ˜ç»éªŒæƒ³è¦è·Ÿå¤§å®¶åˆ†äº«ï¼Œæ¬¢è¿ç•™è¨€è”ç³»æˆ‘ä»¬å“¦~æ¯”å¿ƒï¼\n<img src=\"//static.cnodejs.org/FvaF3l3tGIUaCxEYFOgKH_ikjEpm\" alt=\"image.png\">\n<img src=\"//static.cnodejs.org/FlswPcCJL7mOa5IQ8z783wockhj8\" alt=\"image.png\"></p>\n</div>",
      "title": "å¼€å‘è€…ç¦éŸ³ï¼é¢å‘Webåœºæ™¯çš„äº‘å¼€å‘æœåŠ¡æ­£å¼å¼€æ”¾ï¼",
      "last_reply_at": "2019-07-26T02:19:25.384Z",
      "good": false,
      "top": false,
      "reply_count": 0,
      "visit_count": 246,
      "create_at": "2019-07-26T02:19:25.384Z",
      "author": {
        "loginname": "TencentTCB",
        "avatar_url": "https://avatars0.githubusercontent.com/u/51230659?v=4&s=120"
      }
    },
    {
      "id": "5d18d23acdb1f967c157712a",
      "author_id": "58cdfd7528be82df16560950",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><p>æœ€è¿‘å¼€å§‹ç€æ‰‹ä½¿ç”¨ Rust ä»é›¶å¼€å§‹ç¼–å†™ä¸€ä¸ª JavaScript å¼•æ“ï¼Œç›®çš„å°±æ˜¯å°†è‡ªå·±çš„ JavaScript level æå‡åˆ° â€œç†Ÿç»ƒâ€ã€‚åˆç‰ˆçš„å®šä½æ˜¯å¯ä»¥è·‘é€š ES5 çš„ç‰ˆæœ¬ï¼Œå¹¶ä¸”å°½å¯èƒ½å¤šçš„è·‘è¿‡ test262 æµ‹è¯•ã€‚</p>\n<p>ç›®å‰å·²ç»å®Œæˆäº† Parser éƒ¨åˆ†ï¼Œä¸‹ä¸€æ­¥è€ƒè™‘åŠ å…¥ç®€å•å®ç°çš„ GCï¼Œå¹¶å®Œæˆè§£é‡Šå™¨çš„éƒ¨åˆ†ï¼Œæœ€åå°±æ˜¯è·‘ test262 æµ‹è¯•ã€‚å¤§æ¦‚ä¼šåœ¨åˆç‰ˆå®Œæˆåå†™ä¸€ä¸ªç³»åˆ—æ¥è®°å½•å¹¶ä»‹ç»å¦‚ä½•ä»é›¶å¼€å§‹ç¼–å†™ JavaScript å¼•æ“ã€‚æ¬¢è¿æ²Ÿé€šäº¤æµæŒ‡æ•™ ğŸ˜€</p>\n<p><a href=\"https://github.com/hsiaosiyuan0/naive\">https://github.com/hsiaosiyuan0/naive</a></p>\n</div>",
      "title": "ä½¿ç”¨ Rust ä»é›¶å¼€å§‹ç¼–å†™ JavaScript å¼•æ“",
      "last_reply_at": "2019-07-26T01:23:43.668Z",
      "good": false,
      "top": false,
      "reply_count": 12,
      "visit_count": 2005,
      "create_at": "2019-06-30T15:16:10.507Z",
      "author": {
        "loginname": "hsiaosiyuan0",
        "avatar_url": "https://avatars0.githubusercontent.com/u/22588905?v=4&s=120"
      }
    },
    {
      "id": "5ce3bbbfe57aac76fed2ca9b",
      "author_id": "5ce3bafde57aac76fed2ca85",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><p>VUEæ€ä¹ˆå­¦ä¹ ï¼Ÿ</p>\n</div>",
      "title": "VUEæ€ä¹ˆå­¦ä¹ ï¼Ÿ",
      "last_reply_at": "2019-07-26T00:48:21.881Z",
      "good": false,
      "top": false,
      "reply_count": 4,
      "visit_count": 893,
      "create_at": "2019-05-21T08:50:07.795Z",
      "author": {
        "loginname": "luobo007",
        "avatar_url": "https://avatars3.githubusercontent.com/u/7908554?v=4&s=120"
      }
    },
    {
      "id": "588465891dc8ff8739cbc583",
      "author_id": "5706302493a6967159553ce1",
      "tab": "ask",
      "content": "<div class=\"markdown-text\"><p>NPM å¦‚ä½•å¼•å…¥æœªå‘å¸ƒçš„æ¨¡å—ï¼Ÿï¼Ÿ</p>\n<p>æ¯”å¦‚æˆ‘ç°åœ¨æœ‰ä¸ªé¡¹ç›®æœ‰ Xï¼Œé‡Œé¢æœ‰å¼•å…¥äº†æ¨¡å—A,Bï¼Œ</p>\n<p>æœ¬åœ°å¼€å‘äº†ä¸€ä¸ªæ¨¡å—Cï¼Œä½†æ˜¯è¿™ä¸ªæ¨¡å—è¿˜æ²¡æœ‰å‘å¸ƒåˆ°NPMä¸Šé¢ï¼Œ</p>\n<p>ç°åœ¨æƒ³Cä»£ç ä¿®æ”¹åï¼Œä¸éœ€è¦å‘å¸ƒåˆ°NPMä¸Šé¢ï¼ŒXé¡¹ç›®å°±å¯ä»¥ç”¨Cæ¨¡å—çš„ä»£ç äº†ï¼Œèƒ½å¤Ÿå»ºç«‹ç±»ä¼¼mavençš„ç§äººä»“åº“ï¼Ÿ</p>\n<p>å¤‡æ³¨: Cæ¨¡å—ä¸åœ¨ä¸€å°æœºå™¨</p>\n</div>",
      "title": "NPM å¦‚ä½•å¼•å…¥æœªå‘å¸ƒçš„æ¨¡å—",
      "last_reply_at": "2019-07-25T16:12:07.633Z",
      "good": false,
      "top": false,
      "reply_count": 15,
      "visit_count": 5570,
      "create_at": "2017-01-22T07:55:53.793Z",
      "author": {
        "loginname": "yuexing0921",
        "avatar_url": "https://avatars3.githubusercontent.com/u/18208187?v=4&s=120"
      }
    },
    {
      "id": "5d39c5259969a529571d73a8",
      "author_id": "58cdfd7528be82df16560950",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><p>å¾ˆå¤šåˆ†äº«éƒ½ä¼šè§£é‡Šä»€ä¹ˆæ˜¯é—­åŒ…ï¼Œä¸å¾—ä¸è¯´å¤§éƒ½ç®¡ä¸­çª¥è±¹ã€‚æ¯”å¦‚æŸ star 1k çš„é¡¹ç›®ä¸­æè¿°</p>\n<blockquote>\n<p>æ‰€æœ‰å‡½æ•°éƒ½æ˜¯é—­åŒ…</p>\n</blockquote>\n<p>æ˜¯ä¸æ°å½“çš„ã€‚ä½†æ˜¯åœ¨æœ‰ 1k stars çš„æƒ…å†µä¸‹ï¼Œå±…ç„¶æ²¡æœ‰ issue æŒ‡å‡ºå…¶ä¸­çš„é”™è¯¯ã€‚</p>\n<p>é¦–å…ˆå¿…é¡»è¯´ï¼Œé—­åŒ…å°±å–åå’Œä¸­æ–‡ç¿»è¯‘è€Œè¨€ï¼Œåœ¨ä½ æ­£åœ¨ç†è§£äº†å®ƒä¹‹åï¼Œä¼šå‘ç°å®ƒæ°åˆ°å¥½å¤„ã€‚å¦‚æœä½ è¿˜è§‰å¾—å‘½åå¾ˆå¥‡æ€ªï¼Œé‚£ä¹ˆå°±è¯´æ˜ä½ å¹¶ä¸ç†è§£å®ƒã€‚</p>\n<p>å°±å¦‚åŒå®ƒçš„åå­—æè¿°çš„ä¸€èˆ¬ï¼Œé—­åŒ…è¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªå°é—­çš„å†…å­˜ç©ºé—´ã€‚æ¯ä¸ªå‡½æ•°è¢«åˆ›å»ºçš„æ—¶å€™ï¼Œéƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å…³è”çš„é—­åŒ…ã€‚åœ¨äº†è§£é—­åŒ…çš„ä½¿ç”¨åœºæ™¯ä¹‹å‰ï¼Œå…ˆçœ‹ä¸‹é¢ä¸€ä¸ªä¾‹å­ï¼š</p>\n<pre class=\"prettyprint language-js\"><code>function f() {\n  var i = 0;\n  console.log(i);\n}\n\nf();\n</code></pre><p>è¿™æ®µä»£ç éå¸¸ç®€å•ã€‚æˆ‘ä»¬çŸ¥é“ä¸€æ—¦ <code>f</code> æ‰§è¡Œå®Œæ¯•ï¼Œé‚£ä¹ˆå®ƒæœ¬æ¬¡æ‰§è¡Œçš„æ ˆä¸Šçš„æ•°æ®å°†ä¼šè¢«é‡Šæ”¾ï¼Œæ‰€ä»¥æ¯æ¬¡è°ƒç”¨ç»“æŸåï¼Œæ ˆä¸Šçš„ <code>i</code> éƒ½ä¼šè¢«åŠæ—¶çš„é‡Šæ”¾ã€‚</p>\n<p>å†æ¥çœ‹å¦ä¸€ä¸ªä¾‹å­ï¼š</p>\n<pre class=\"prettyprint language-js\"><code>function f() {\n  var i = 0;\n  return function () { &#x2F;&#x2F; f1\n    console.log(i);\n  }\n}\n\nvar ff = f();\nff();\n</code></pre><p>å’Œç¬¬ä¸€ä¸ªä¾‹å­ä¸€æ ·ï¼Œè¿™æ®µä»£ç åŒæ ·ä¼šæ‰“å° <code>0</code>ã€‚ä½†æ˜¯è¿™ä¼¼ä¹æ‰“ç ´äº†æˆ‘ä»¬ç¬¬ä¸€ä¸ªä¾‹å­çš„æ€»ç»“ï¼ŒæŒ‰ç…§ç¬¬ä¸€ä¸ªä¾‹å­çš„è¯´æ³•ï¼Œ<code>f</code> è¿è¡Œç»“æŸåï¼Œæœ¬æ¬¡è°ƒç”¨çš„æ ˆä¸Šçš„ <code>i</code> åº”è¯¥è¢«é‡Šæ”¾æ‰äº†ã€‚ä½†æ˜¯æˆ‘ä»¬éšåè°ƒç”¨è¿”å›çš„åŒ¿åå‡½æ•°ï¼Œå‘ç°å¹¶æ²¡æœ‰æŠ¥é”™ï¼Œè¿™å°±å½’åŠŸäºé—­åŒ…ã€‚</p>\n<p>æ¯ä¸ªå‡½æ•°è¢«åˆ›å»ºçš„æ—¶å€™ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ªä¸ä¹‹å…³è”çš„é—­åŒ…è¢«åŒæ—¶åˆ›å»ºã€‚åœ¨æ–°åˆ›å»ºçš„å‡½æ•°å†…éƒ¨ï¼Œå¦‚æœå¼•ç”¨äº†å¤–éƒ¨ä½œç”¨åŸŸä¸­çš„å˜é‡ï¼Œé‚£ä¹ˆè¿™äº›å˜é‡éƒ½ä¼šè¢«æ·»åŠ åˆ°è¯¥å‡½æ•°çš„é—­åŒ…ä¸­ã€‚</p>\n<p>æ³¨æ„ä¸Šé¢ä»£ç çš„æ³¨é‡Šï¼Œä¸ºäº†æ–¹ä¾¿æè¿°ï¼Œæˆ‘ä»¬å°†åŒ¿åå‡½æ•°å–åä¸º <code>f1</code>ã€‚å½“ <code>f</code> è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œ<code>f1</code> è¢«åˆ›å»ºï¼ŒåŒæ—¶ä¸ä¹‹å…³è”çš„é—­åŒ…ä¹Ÿè¢«åˆ›å»ºã€‚ç”±äº <code>f1</code> å†…éƒ¨å¼•ç”¨äº†ä½äºå…¶ä½œç”¨åŸŸä¹‹å¤–çš„ã€<code>f</code> ä½œç”¨åŸŸä¸­çš„å˜é‡ <code>i</code>ï¼Œå› æ­¤ <code>f</code> ä½œç”¨åŸŸä¸­çš„ <code>i</code> è¢«æ‹·è´åˆ°äº† <code>f1</code> çš„é—­åŒ…ä¸­ã€‚è¿™å°±è§£é‡Šäº†ï¼Œä¸ºä»€ä¹ˆ <code>f</code> æ‰§è¡Œå®Œæˆä¹‹åï¼Œè°ƒç”¨ <code>f1</code> ä¾ç„¶å¯ä»¥æ‰“å° <code>0</code>ã€‚</p>\n<p>ç°åœ¨æ¥çœ‹ä¸€ä¸‹ç¬¬ä¸‰ä¸ªä¾‹å­ï¼š</p>\n<pre class=\"prettyprint language-js\"><code>function f() {\n  var i = 0;\n  function f1() { \n    console.log(i);\n  }\n  i = 1;\n  return f1;\n}\n\nvar ff = f();\nff();\n</code></pre><p>æˆ‘ä»¬ä¼šå‘ç°æ‰“å° <code>1</code>ã€‚å¥½åƒåˆä¸ç¬¬äºŒä¸ªä¾‹å­çš„ç»“è®ºæœ‰äº›å†²çªï¼Œ<code>f</code> ä¸­çš„ <code>i</code> ä¸æ˜¯è¢«æ‹·è´åˆ°äº† <code>f1</code> çš„é—­åŒ…ä¸­å—ï¼Ÿä¸ºä»€ä¹ˆä¸æ˜¯æ‰“å° <code>0</code> è€Œæ˜¯æ‰“å° <code>1</code> å‘¢ï¼Ÿ</p>\n<p>è¿™æ˜¯å› ä¸ºï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰ä»‹ç»å‘ç”Ÿæ‹·è´çš„æ—¶æœºã€‚å¦‚æœæ–°åˆ›å»ºçš„å‡½æ•°ï¼Œå¼•ç”¨äº†å¤–éƒ¨ä½œç”¨åŸŸçš„å˜é‡ï¼Œå¹¶ä¸”è¯¥å˜é‡ä¸ºæ´»åŠ¨çš„ï¼Œé‚£ä¹ˆå¹¶ä¸æ€¥äºå°†è¯¥å˜é‡çš„å†…å®¹æ‹·è´åˆ°é—­åŒ…ä¸­ï¼Œè€Œæ˜¯å°†è¯¥å˜é‡æ‰€æŒ‡å‘çš„å†…å­˜å•å…ƒçš„åœ°å€ä¿å­˜äºé—­åŒ…ä¸­ã€‚æ¯”å¦‚æˆ‘ä»¬è¿™é‡Œï¼Œåªæ˜¯å…ˆå°† <code>i</code> æ‰€ç»‘å®šåˆ°çš„å†…å­˜åœ°å€ä¿å­˜äºé—­åŒ…ä¸­ï¼Œç­‰åˆ° <code>i</code> ä¸ºéæ´»åŠ¨çŠ¶æ€æ—¶ï¼Œæ‰ä¼šè¿›è¡Œæ‹·è´ã€‚ä¹Ÿå°±æ˜¯è¿™é‡Œï¼Œå½“ <code>f</code> å³å°†è¿è¡Œç»“æŸæ—¶ï¼Œ<code>i</code> çš„å°†å˜ä¸ºéæ´»åŠ¨çŠ¶æ€ï¼Œé‚£ä¹ˆéœ€è¦å°†å…¶å†…å®¹æ‹·è´åˆ°å¼•ç”¨å®ƒçš„é—­åŒ…ä¸­ï¼Œä¹Ÿå°±æ˜¯è¿™é‡Œçš„ <code>f1</code> çš„é—­åŒ…ä¸­ã€‚ä¸€æ—¦å†…å®¹è¢«æ‹·è´åˆ°é—­åŒ…ä¸­ï¼Œé™¤äº†ä¸ä¹‹å…³è”çš„å‡½æ•°å¯¹è±¡ä¹‹å¤–ï¼Œå†ä¹Ÿæ²¡æœ‰å…¶ä»–æ–¹å¼å¯ä»¥è®¿é—®åˆ°å…¶ä¸­çš„å†…å®¹ã€‚</p>\n<p>é¡ºä¾¿ä»‹ç»ä¸€ä¸‹ï¼Œé‚£ä¹ˆé—­åŒ…ä¸­å ç”¨çš„å†…å­˜ä½•æ—¶æ‰ä¼šè¢«é‡Šæ”¾å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯å½“ä¸å®ƒå…³è”çš„å‡½æ•°å¯¹è±¡è¢«é‡Šæ”¾çš„æ—¶å€™ã€‚æ¯”å¦‚æˆ‘ä»¬æ¥ç€ä¸Šé¢çš„ä¾‹å­è¿è¡Œï¼š</p>\n<pre class=\"prettyprint language-js\"><code>var ff = null\n</code></pre><p>æˆ‘ä»¬å°†å¼•ç”¨ <code>f1</code> çš„å˜é‡ <code>ff</code> èµ‹å€¼ä¸º <code>null</code>ï¼Œè¿™æ ·å°±æ²¡æœ‰ä»»ä½•å˜é‡å¼•ç”¨ <code>f1</code> äº†ï¼Œæ‰€ä»¥ <code>f1</code> æˆä¸ºäº†åƒåœ¾ï¼Œä¼šåœ¨æœªæ¥çš„æŸä¸ªæ—¶é—´ç‚¹(å…·ä½“è¦çœ‹ GC çš„å®ç°ä»¥åŠè¿è¡Œæƒ…å†µ)ï¼Œç”±åƒåœ¾å›æ”¶å™¨è¿›è¡Œæ‰€å å†…å­˜å›æ”¶ã€‚</p>\n<p>ä¸Šé¢çš„ä¾‹å­ï¼Œå…¶å®å°±æ˜¯ä¸‹é¢çš„ä¾‹å­çš„ç®€åŒ–ç‰ˆï¼š</p>\n<pre class=\"prettyprint language-js\"><code>function f() {\n  var a = [];\n  for(var i = 0; i &lt; 2; i++) {\n    var ff = function () {\n      console.log(i)\n    };\n    a.push(ff);\n  }\n  return a;\n}\n\nconst [f1, f2] = f();\nf1();\nf2();\n</code></pre><p>è¿™é‡Œæ–°åˆ›å»ºçš„ä¸¤ä¸ªå‡½æ•°éƒ½ä¼šæ‰“å° <code>2</code>ï¼Œæƒ³å¿…è¿™ä¸ªä¾‹å­å¤§å®¶éƒ½å¾ˆç†Ÿæ‚‰äº†ï¼Œå°±ä¸å†èµ˜è¿°äº†ã€‚åªæ˜¯æœ‰ä¸€ä¸ªé—®é¢˜éœ€è¦æ³¨æ„ï¼Œæ—¢ç„¶ä¸Šé¢æåˆ°äº†è¯´ï¼Œæ–°åˆ›å»ºçš„å‡½æ•°å¼•ç”¨çš„å¤–éƒ¨ä½œç”¨åŸŸä¸Šçš„å˜é‡å†…å®¹ã€æœ€ç»ˆéƒ½ä¼šæ‹·è´åˆ°è¯¥å‡½æ•°çš„é—­åŒ…ä¸­ï¼Œé‚£ä¹ˆä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ<code>i</code> æ˜¯ä¸æ˜¯è¢«æ‹·è´äº†ä¸¤æ¬¡ï¼Ÿ</p>\n<p>å†æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p>\n<pre class=\"prettyprint language-js\"><code>function f() {\n  var a = [];\n  for(var i = 0; i &lt; 2; i++) {\n    var ff = function () {\n      console.log(i)\n    };\n    a.push(ff);\n  }\n  a.push(function () {\n    i++;\n  });\n  return a;\n}\n\nconst [f1, f2, f3] = f();\nf1();\nf3();\nf2();\n</code></pre><p>è¿™ä¸ªä¾‹å­ä¼šæ‰“å°ä»€ä¹ˆï¼Ÿç­”æ¡ˆæ˜¯ <code>2</code> å’Œ <code>3</code>ã€‚è¿™æ˜¯å› ä¸ºé—­åŒ…çš„å¦ä¸€ä¸ªæœºåˆ¶ï¼ŒåŒä¸€ä¸ªå˜é‡è¢«å¼•ç”¨å®ƒçš„å¤šä¸ªé—­åŒ…æ‰€å…±äº«ã€‚æˆ‘ä»¬åœ¨ <code>for</code> å¾ªç¯å†…éƒ¨åˆ›å»ºäº†ä¸¤ä¸ªå‡½æ•°ï¼Œåœ¨å¾ªç¯å¤–éƒ¨åˆ›å»ºäº†ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸‰ä¸ªå‡½æ•°çš„éƒ½å¼•ç”¨äº† <code>f</code> ä¸­çš„ <code>i</code>ï¼Œå› è€Œ <code>i</code> è¢«è¿™ä¸‰ä¸ªå‡½æ•°çš„é—­åŒ…æ‰€å…±äº«ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨ <code>i</code> ç¦»å¼€è‡ªå·±æ‰€å±çš„ä½œç”¨åŸŸæ—¶(<code>f</code> é€€å‡ºå‰)ï¼Œå°†åªä¼šå‘ç”Ÿä¸€æ¬¡æ‹·è´ï¼Œå¹¶å°†æ–°åˆ›å»ºçš„ä¸‰ä¸ªå‡½æ•°çš„é—­åŒ…ä¸­çš„ <code>i</code> çš„å¯¹åº”çš„æŒ‡é’ˆè®¾å®šä¸ºé‚£ä¸€ä»½æ‹·è´çš„å†…å­˜åœ°å€å³å¯ã€‚å¯¹äºè¿™ä¸€ä¸ªå…±äº«çš„æ‹·è´åœ°å€ï¼Œé™¤äº†è¿™ä¸‰ä¸ªé—­åŒ…ä¹‹å¤–ï¼Œæ²¡æœ‰å…¶ä»–æ–¹å¼å¯ä»¥è®¿é—®åˆ°å®ƒã€‚</p>\n<p>å¿…é¡»å†æ¬¡å¼ºè°ƒçš„æ˜¯ï¼Œè¢«å¼•ç”¨çš„å˜é‡æ‹·è´åˆ°é—­åŒ…ä¸­çš„æ—¶æœºå‘ç”Ÿåœ¨ã€è¢«å¼•ç”¨çš„å˜é‡ç¦»å¼€è‡ªå·±æ‰€å±çš„ä½œç”¨åŸŸæ—¶ï¼Œå³çŠ¶æ€ä¸ºéæ´»åŠ¨æ—¶ã€‚è€ƒè™‘ä¸‹é¢çš„ä¾‹å­ï¼š</p>\n<pre class=\"prettyprint language-js\"><code>function f() {\n  const a = [];\n  for(let i = 0; i &lt; 2; i++) {\n    var ff = function () {\n      console.log(i)\n    };\n    a.push(ff);\n  }\n  return a;\n}\n\nconst [f1, f2] = f();\nf1();\nf2();\n</code></pre><p>æˆ‘ä»¬çŸ¥é“ ES6 ä¸­å¼•å…¥äº† <code>let</code> å…³é”®å­—ï¼Œç”±å®ƒå£°æ˜çš„å˜é‡æ‰€å±å—çº§ä½œç”¨åŸŸã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åœ¨ <code>for</code> å¾ªç¯ä½“çš„åˆå§‹åŒ–éƒ¨åˆ†ä½¿ç”¨äº† <code>let</code>ï¼Œè¿™æ ·ä¸€æ¥ <code>i</code> çš„ä½œç”¨åŸŸè¢«è®¾å®šä¸ºäº†è¯¥å¾ªç¯çš„å—çº§ä½œç”¨åŸŸå†…ã€‚ä¸è¿‡å¦ä¸€ä¸ªç»†èŠ‚æ˜¯ï¼Œå¾ªç¯ä½“ä¸­çš„ <code>i</code> ï¼Œä¹Ÿå°±æ˜¯ <code>ff</code> ä¸­å¼•ç”¨çš„ <code>i</code>ï¼Œåœ¨æ¯æ¬¡è¿­ä»£ä¸­éƒ½ä¼šè¿›è¡Œé‡æ–°ç»‘å®šï¼Œæ¢å¥è¯è¯´å¾ªç¯ä½“ä¸­çš„ <code>i</code> çš„ä½œç”¨åŸŸæ˜¯æ¯ä¸€æ¬¡çš„è¿­ä»£ã€‚å› æ­¤åœ¨å¾ªç¯ä½“ä¸­ï¼Œå½“æ¯æ¬¡è¿­ä»£çš„ <code>i</code> ç¦»å¼€ä½œç”¨åŸŸæ—¶ï¼Œå®ƒçš„çŠ¶æ€å˜ä¸ºéæ´»åŠ¨çš„ï¼Œå› æ­¤å®ƒçš„å†…å®¹è¢«æ‹·è´åˆ°å¼•ç”¨å®ƒçš„é—­åŒ…ä¸­ã€‚</p>\n<p>é—­åŒ…å¸¸å¸¸ä¼šå’Œ <a href=\"https://developer.mozilla.org/en-US/docs/Glossary/IIFE\">IIFE</a> ä¸€èµ·ä½¿ç”¨ï¼Œæ¯”å¦‚ï¼š</p>\n<pre class=\"prettyprint language-js\"><code>var a = [];\nfor(var i = 0; i &lt; 2; i++) {\n  a.push((function (i) { &#x2F;&#x2F; f1, i1\n    return function () { &#x2F;&#x2F; f2\n      console.log(i) &#x2F;&#x2F; i2\n    }\n  })(i)); &#x2F;&#x2F; i3\n};\n\nconst [f1, f2] = a;\nf1();\nf2();\n</code></pre><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œè®©äººè¿·æƒ‘çš„é™¤äº†é—­åŒ…çš„éƒ¨åˆ†ä¹‹å¤–ï¼Œå°±æ˜¯ <code>i1</code>ï¼Œ<code>i2</code> å’Œ <code>i3</code> äº†ã€‚</p>\n<ul>\n<li><code>i1</code> æ˜¯ <code>f1</code> çš„å½¢å‚</li>\n<li><code>i2</code> æ˜¯ <code>f2</code> ä¸­å¯¹å¤–å±‚ä½œç”¨åŸŸä¸­çš„å˜é‡çš„å¼•ç”¨</li>\n<li><code>i3</code> æ˜¯å…¨å±€çš„å˜é‡ <code>i</code>ï¼ŒIIFE æ‰§è¡Œæ—¶ <code>i</code> å¯¹åº”çš„å€¼å°†è¢«ä½œä¸ºå®å‚æ¥è°ƒç”¨ <code>f1</code></li>\n<li>å½“ <code>f1</code> è¢«è°ƒç”¨æ—¶ï¼Œä¹Ÿå°±æ˜¯ IIFE æ‰§è¡Œé˜¶æ®µï¼Œå®ƒå†…éƒ¨åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å‡½æ•° <code>f2</code>ï¼ŒåŒæ—¶ä¹Ÿåˆ›å»ºäº† <code>f2</code> å¯¹åº”çš„é—­åŒ…</li>\n<li>ç”±äº <code>f2</code> ä¸­å¼•ç”¨äº†å¤–å±‚ä½œç”¨åŸŸä¸­çš„ <code>i</code>ï¼Œå³ <code>f1</code> æ‰§è¡ŒæœŸé—´çš„ <code>i</code>ï¼Œä¸” <code>i</code> ä¸ºæ´»åŠ¨å†…å®¹ï¼Œæ‰€ä»¥ <code>f2</code> çš„é—­åŒ…ä¸­æ·»åŠ ä¸€æ¡ Key ä¸º <code>i</code>ï¼ŒValue ä¸ºæŒ‡å‘ <code>f1</code> ä¸­æ´»åŠ¨çš„ <code>i</code> ç»‘å®šåˆ°çš„å†…å­˜å•å…ƒçš„åœ°å€</li>\n<li>å½“ IIFE æ‰§è¡Œå®Œæ¯•ï¼Œå³ <code>f1</code> è¦é€€å‡ºçš„æ—¶å€™ï¼Œå…¶æ ˆä¸Šæ´»åŠ¨å¯¹è±¡ <code>i</code> å°±ä¼šç¦»å¼€ä½œç”¨åŸŸï¼Œå› æ­¤éœ€è¦å°† <code>i</code> æ‹·è´åˆ°å¼•ç”¨å®ƒçš„é—­åŒ…ä¸­ã€‚</li>\n</ul>\n<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬çœ‹åˆ°çš„ä¾‹å­éƒ½å¼•ç”¨çš„ç›´æ¥å¤–å±‚ä½œç”¨åŸŸä¸­çš„å˜é‡ï¼Œé‚£ä¹ˆæˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p>\n<pre class=\"prettyprint language-js\"><code>function f(x) { &#x2F;&#x2F; f1\n  return function (y) { &#x2F;&#x2F; f2\n    return function (z) { &#x2F;&#x2F; f3\n      console.log(x + y + z)\n    }\n  }\n}\n\nconst xy = f(1);\nconst xyz = xy(2);\nxyz(3);\n</code></pre><p>ä¸ºäº†æ–¹ä¾¿æè¿°ï¼Œæˆ‘ä»¬åˆ†åˆ«æ ‡è®°äº† <code>f1</code>ï¼Œ<code>f2</code>ï¼Œ<code>f3</code>ã€‚æˆ‘ä»¬åœ¨ <code>f3</code> å†…éƒ¨ï¼Œå¼•ç”¨äº† <code>x</code> å’Œ <code>y</code>ï¼Œå¹¶ä¸” <code>x</code> å¹¶ä¸æ˜¯ <code>f3</code> çš„ç›´æ¥å¤–éƒ¨ä½œç”¨åŸŸã€‚é‚£ä¹ˆè¿™ä¸ªé—­åŒ…çš„æ„å»ºè¿‡ç¨‹æ—¶æ€æ ·çš„ï¼Ÿ</p>\n<p>åœ¨ JS ä¸­ï¼Œå‡½æ•°ä¹Ÿæ˜¯ä»¥å¯¹è±¡çš„å½¢å¼å­˜åœ¨çš„ï¼Œå¦‚æœå°†ä¸å‡½æ•°å…³è”çš„é—­åŒ…æƒ³è±¡æˆå‡½æ•°å¯¹è±¡çš„ä¸€ä¸ªç±»å‹ä¸º Map&lt;string, Value&gt; çš„å±æ€§ä¹Ÿä¸è¿‡ä»½ï¼Œæ¯”å¦‚ï¼š</p>\n<pre class=\"prettyprint language-ts\"><code>const CLOSURE = Symbol(&#x27;closure&#x27;);\nconst FUN_BODY = Symbol(&#x27;fun-body&#x27;);\nconst FUN_PARAMS = Symbol(&#x27;fun-params&#x27;);\n\nconst funObj = {\n  [FUN_PARAMS]: [&#x2F;* parameters list *&#x2F;],\n  [FUN_BODY]: [&#x2F;* instructions *&#x2F;],\n  [CLOSURE]: new Map&lt;string, Value&gt;(), &#x2F;&#x2F; Value å¯ä»¥è¢«å¤šä¸ª closure å…±äº«\n}\n</code></pre><p>å³ä½¿åœ¨å¼•æ“çš„å®ç°é˜¶æ®µï¼Œå› ä¸ºæ€§èƒ½æˆ–è€…å®ç°å·®å¼‚ä¸é‡‡ç”¨è¿™æ ·çš„è®¾è®¡ï¼Œä½†æœ¬è´¨ä¸Šä¸è¿™ä¸ªç»“æ„å«ä¹‰æ˜¯ä¸€è‡´çš„ã€‚ä¸ºäº†èƒ½åœ¨è¿è¡Œé˜¶æ®µåˆ›å»ºå‡½æ•°å¯¹è±¡ï¼Œåœ¨ç¼–è¯‘é˜¶æ®µå°±éœ€è¦æ”¶é›†åˆ°å¿…è¦çš„ä¿¡æ¯ï¼š</p>\n<ul>\n<li>å½¢å‚åˆ—è¡¨</li>\n<li>å‡½æ•°ä½“</li>\n<li>å¼•ç”¨çš„å¤–éƒ¨å˜é‡</li>\n</ul>\n<p>æ¯”å¦‚åœ¨ç¼–è¯‘ <code>f3</code> çš„é˜¶æ®µï¼Œæˆ‘ä»¬å‘ç°å®ƒå†…éƒ¨å¼•ç”¨äº†å¤–éƒ¨çš„ <code>x</code> å’Œ <code>y</code>ï¼Œç”±äº <code>x</code> ä¸æ˜¯ç›´æ¥å­˜åœ¨äºçˆ¶åŠä½œç”¨åŸŸ <code>f2</code> ä¸­çš„ï¼Œä¸ºäº†ä½¿å¾—æœªæ¥ä½¿ç”¨ <code>f2</code> åˆ›å»º <code>f3</code> çš„æ—¶å€™ï¼Œä»èƒ½å¤Ÿæ‰¾åˆ° <code>x</code> çš„ç»‘å®šï¼Œæˆ‘ä»¬éœ€è¦å°† <code>x</code> åŠ å…¥åˆ° <code>f2</code> çš„é—­åŒ…ä¸­ã€‚æ‰€ä»¥åœ¨ç¼–è¯‘é˜¶æ®µï¼Œæˆ‘ä»¬ä¼šåœ¨ <code>f2</code> çš„ä¿¡æ¯ä¸­æ ‡æ³¨å®ƒå†…éƒ¨å¼•ç”¨äº†å¤–éƒ¨å˜é‡ <code>x</code>ã€‚è¿™æ ·åœ¨åˆ›å»º <code>f2</code> çš„æ—¶å€™ï¼Œ<code>x</code> å°±ä¼šè¢«æ‹·è´åˆ°å®ƒçš„é—­åŒ…ä¸­äº†ï¼Œç­‰åˆ°ä½¿ç”¨å®ƒå†åˆ›å»º <code>f3</code> çš„æ—¶å€™ï¼Œ<code>f3</code> ä¸­çš„ <code>x</code> ä¹Ÿå°±æœ‰äº†ç€è½ã€‚</p>\n<p>æœ€åæ¥ä¸€ä¸ªæ‹“å±•ç»ƒä¹ ï¼š</p>\n<pre class=\"prettyprint language-js\"><code>function f(x) { \n  return [\n    function () { x++ }, \n    function (y) { \n      return function (z) { \n        console.log(x + y + z)\n      }\n    }\n  ]\n}\n\nconst [f1, xy] = f(1);\nconst xyz = xy(2);\nf1();\nxyz(3);\n</code></pre><p>å¦‚æœæƒ³è¦äº†è§£è·Ÿå¤šå¼•æ“å±‚é¢å®ç°é—­åŒ…çš„ç»†èŠ‚ï¼Œå¯ä»¥å‚è€ƒæˆ‘çš„å¦å¤–çš„é¡¹ç›®ï¼Œ<a href=\"https://github.com/hsiaosiyuan0/naive\">Naive - ä½¿ç”¨ Rust ç¼–å†™çš„ JS å¼•æ“</a></p>\n</div>",
      "title": "å…³äºé—­åŒ…å…¶ä½™å‡‘æ ‡é¢˜å­—æ•°",
      "last_reply_at": "2019-07-25T15:05:09.586Z",
      "good": false,
      "top": false,
      "reply_count": 0,
      "visit_count": 275,
      "create_at": "2019-07-25T15:05:09.586Z",
      "author": {
        "loginname": "hsiaosiyuan0",
        "avatar_url": "https://avatars0.githubusercontent.com/u/22588905?v=4&s=120"
      }
    },
    {
      "id": "5d3973569969a529571d7270",
      "author_id": "5836b3846add41f206000bf0",
      "tab": "ask",
      "content": "<div class=\"markdown-text\"><p>æˆ‘ç†è§£ä¸‰è€…éƒ½å¯ä»¥åšé›†æˆæµ‹è¯•å§</p>\n</div>",
      "title": "å‰ç«¯æµ‹è¯•å·¥å…·karmaã€pupeteerã€nightwatchåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ",
      "last_reply_at": "2019-07-25T11:17:22.257Z",
      "good": false,
      "top": false,
      "reply_count": 2,
      "visit_count": 307,
      "create_at": "2019-07-25T09:16:06.731Z",
      "author": {
        "loginname": "victoryboss",
        "avatar_url": "https://avatars0.githubusercontent.com/u/5610115?v=4&s=120"
      }
    },
    {
      "id": "5d25526f71951f750ccb9f29",
      "author_id": "5b03c9a7000332b81cf821a5",
      "tab": "ask",
      "content": "<div class=\"markdown-text\"><p>ä¸ºä»€ä¹ˆå¤§å…¬å¸åå‘äºç”¨go,å°å…¬å¸åå‘äºnode</p>\n</div>",
      "title": "ä¸ºä»€ä¹ˆå¤§å…¬å¸åå‘äºç”¨go,å°å…¬å¸åå‘äºnode",
      "last_reply_at": "2019-07-25T09:52:01.894Z",
      "good": false,
      "top": false,
      "reply_count": 13,
      "visit_count": 2842,
      "create_at": "2019-07-10T02:50:23.204Z",
      "author": {
        "loginname": "linxiaoziruo",
        "avatar_url": "https://avatars3.githubusercontent.com/u/6881273?v=4&s=120"
      }
    },
    {
      "id": "5d312d93b2b9222961dac21d",
      "author_id": "5c29eb723898674067a79d76",
      "tab": "ask",
      "content": "<div class=\"markdown-text\"><p>controller é‡Œé¢å†™é€»è¾‘  service é‡Œé¢æ“ä½œæ•°æ®åº“</p>\n</div>",
      "title": "controller å’Œ service æ€ä¹ˆåŒºåˆ†å‘¢ï¼Ÿ",
      "last_reply_at": "2019-07-25T07:07:14.440Z",
      "good": false,
      "top": false,
      "reply_count": 15,
      "visit_count": 2177,
      "create_at": "2019-07-19T02:40:19.145Z",
      "author": {
        "loginname": "yangcecode",
        "avatar_url": "https://avatars3.githubusercontent.com/u/37173735?v=4&s=120"
      }
    },
    {
      "id": "5d3903029969a529571d704f",
      "author_id": "5d3901ca9969a529571d7033",
      "tab": "ask",
      "content": "<div class=\"markdown-text\"><p>æˆ‘åœ¨vs codeå­¦ä¹ nestjsé¡¹ç›®æ—¶ï¼Œimportå¼•å…¥æ¨¡å—æ—¶ï¼Œç¼–è¾‘å™¨æç¤ºçš„ç»å¯¹è·¯å¾„å¦‚â€œsrc/confg/config.serviceâ€ï¼Œè¿™ç§ä¼šæŠ¥é”™æ¨¡å—æ‰¾ä¸åˆ°.è¯·é—®æ˜¯éœ€è¦æ€ä¹ˆé…ç½®ä¸€ä¸‹tsconfig.jsonå—ï¼Ÿ</p>\n</div>",
      "title": "æ±‚å¤§ä½¬è§£æƒ‘",
      "last_reply_at": "2019-07-25T07:06:27.768Z",
      "good": false,
      "top": false,
      "reply_count": 5,
      "visit_count": 381,
      "create_at": "2019-07-25T01:16:50.874Z",
      "author": {
        "loginname": "gebeibei",
        "avatar_url": "https://avatars0.githubusercontent.com/u/25855912?v=4&s=120"
      }
    },
    {
      "id": "5b8de66137b3005a0b0e6b3f",
      "author_id": "5b8de41bbf116a8c0e42579f",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><p>Egg.jså…¥é—¨è§†é¢‘æ•™ç¨‹ä¸»è¦è®²äº†Eggçš„ç¯å¢ƒæ­å»º   eggçš„æ§åˆ¶å™¨      eggæœåŠ¡  eggä¸­é—´ä»¶   eggè·¯ç”± eggæ‰©å±•   eggæ¨¡æ¿å¼•æ“  egg cookie   egg session</p>\n<p><strong>Eggjs è§†é¢‘æ•™ç¨‹ç™¾åº¦ç½‘ç›˜åˆ†äº«æ¥</strong>ï¼š <a href=\"https://pan.baidu.com/s/1t6XHpny8-H8mApLkzcsS8w\">https://pan.baidu.com/s/1t6XHpny8-H8mApLkzcsS8w</a></p>\n<p><strong>æˆ–è€…æ­¤è¿æ¥Egg.jsè§†é¢‘æ•™ç¨‹10è®²å…¥é—¨é“¾æ¥</strong>ï¼š <a href=\"https://pan.baidu.com/s/1-jdCXKGgfk9yI8xJOOhPhg\">https://pan.baidu.com/s/1-jdCXKGgfk9yI8xJOOhPhg</a>  <strong>å¯†ç </strong>ï¼š4b6i</p>\n<p><strong>æ¥æº</strong>  <a href=\"https://cnodejs.org/topic/5b7ac9c7c52ad1482eb940bf\">https://cnodejs.org/topic/5b7ac9c7c52ad1482eb940bf</a></p>\n<p>å¸Œæœ›è€é“é—¨èƒ½å–œæ¬¢\n<img src=\"//static.cnodejs.org/FoPZNWCMpHqWFAb2QDns-UhIMX-3\" alt=\"egg01.png\"></p>\n<p><img src=\"//static.cnodejs.org/Fu4_-OevpWiKHFqeEGBOW53MCdnE\" alt=\"egg02.png\"></p>\n<p><img src=\"//static.cnodejs.org/FtOEkaeRTUNyuWE2mhvazrxPc6cd\" alt=\"egg03.png\"></p>\n<p><img src=\"//static.cnodejs.org/FtJsuDe3kbcNYWWcJyfxuE08wVs5\" alt=\"egg05.png\"></p>\n<p><img src=\"//static.cnodejs.org/Fp8erhbPkGZrsYFsd-gxn2z4Gssb\" alt=\"222.png\"></p>\n<p><img src=\"//static.cnodejs.org/FhCAuCKVwbQnTCJWtkGKv6ZR8toN\" alt=\"06.png\"></p>\n</div>",
      "title": "Egg.jsè§†é¢‘æ•™ç¨‹-Eggjså…¥é—¨è§†é¢‘æ•™ç¨‹ç½‘ç›˜å…è´¹åˆ†äº«-10è®²å…¥é—¨åŸºç¡€å¸Œæœ›è€é“é—¨èƒ½å–œæ¬¢",
      "last_reply_at": "2019-07-25T04:13:58.142Z",
      "good": false,
      "top": false,
      "reply_count": 97,
      "visit_count": 16482,
      "create_at": "2018-09-04T01:56:49.179Z",
      "author": {
        "loginname": "zlyuanteng",
        "avatar_url": "https://avatars0.githubusercontent.com/u/42952042?v=4&s=120"
      }
    },
    {
      "id": "5d36abddffed731686461bd8",
      "author_id": "5c05dd981c62d8334935059c",
      "tab": "ask",
      "content": "<div class=\"markdown-text\"><p>è¯·é—®åšå®¢æ–‡ç« çš„é˜…è¯»é‡å¦‚ä½•è®¡ç®—å’Œå®ç°æ‰æ˜¯æœ€åˆé€‚çš„ï¼Ÿ</p>\n</div>",
      "title": "è¯·é—®åšå®¢æ–‡ç« çš„é˜…è¯»é‡å¦‚ä½•è®¡ç®—å’Œå®ç°æ‰æ˜¯æœ€åˆé€‚çš„ï¼Ÿ",
      "last_reply_at": "2019-07-25T03:32:48.694Z",
      "good": false,
      "top": false,
      "reply_count": 4,
      "visit_count": 527,
      "create_at": "2019-07-23T06:40:29.132Z",
      "author": {
        "loginname": "WuYinMan",
        "avatar_url": "https://avatars2.githubusercontent.com/u/28140607?v=4&s=120"
      }
    },
    {
      "id": "5d381ee5b4725a628e26866d",
      "author_id": "581378c0cf18d0333412d2a2",
      "tab": "ask",
      "content": "<div class=\"markdown-text\"><p>nodej å¦‚ä½•å®ç°å°†äºŒè¿›åˆ¶æ–‡ä»¶è½¬æ¢ä¸ºSQLiteæ•°æ®åº“ä¹‹é—´ç›¸äº’è½¬æ¢</p>\n</div>",
      "title": "nodej å¦‚ä½•å®ç°å°†äºŒè¿›åˆ¶æ–‡ä»¶ä¸SQLiteæ•°æ®åº“ä¹‹é—´ç›¸äº’è½¬æ¢",
      "last_reply_at": "2019-07-25T01:41:15.177Z",
      "good": false,
      "top": false,
      "reply_count": 2,
      "visit_count": 414,
      "create_at": "2019-07-24T09:03:33.408Z",
      "author": {
        "loginname": "spursy",
        "avatar_url": "https://avatars0.githubusercontent.com/u/11460991?v=4&s=120"
      }
    },
    {
      "id": "5d35a064b2b9222961dad2cf",
      "author_id": "5767958318c067200342491c",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><p>æœ€è¿‘é—²æ¥æ— äº‹ï¼Œçªå‘å¥‡æƒ³ï¼Œä¹Ÿé¡ºä¾¿ç»ƒç»ƒæ‰‹ï¼Œäºæ˜¯å°±èŒç”Ÿäº†ï¼Œèƒ½å¦ç”¨typescriptçš„decoratorå†™ä¸€ä¸ªNodejs SpringMVCï¼Œç„¶åå°±æœ‰äº†è¿™ä¸ªé¡¹ç›®ã€‚\nè¯¥é¡¹ç›®æ”¯æŒ:</p>\n<ol>\n<li>ä¾èµ–æ³¨å…¥Controller ,Service</li>\n<li>æ³¨å…¥GET/POST/PUT/DELETE/PATCHç­‰restæ–¹æ³•</li>\n<li>è§£ærest apiçš„å‚æ•°ï¼Œä¾‹å¦‚RequestParam</li>\n<li>ä¸Šä¼ æ–‡ä»¶æ”¯æŒMulter</li>\n<li><strong>æ”¯æŒåœ¨vscodeé‡Œé¢ç›´æ¥debug typescript çš„ä»£ç </strong></li>\n</ol>\n<p>æƒ³å­¦ä¹ å¦‚ä½•debug typescriptä»£ç çš„åŒå­¦å¯ä»¥ç•™æ„ä¸€ä¸‹ï¼ŒçœŸçš„å¾ˆå¥½ç”¨ã€‚</p>\n<p>ç›´æ¥ä¸ŠreadMeçš„éƒ¨åˆ†å†…å®¹ï¼š</p>\n<h2>Installation</h2>\n<pre class=\"prettyprint language-js\"><code>npm i easy-node-ioc --save\n</code></pre><h2>Quick Start</h2>\n<p>Check out the <a href=\"https://github.com/chenkang084/easy-node-ioc/tree/master/src/test\">quick start example</a> in <code>test</code>.</p>\n<h2>Usage</h2>\n<h3>1.Create a Controller</h3>\n<pre class=\"prettyprint language-javascript\"><code>import { Controller} from &#x27;easy-node-ioc&#x27;;\n@Controller(&#x27;&#x2F;test&#x27;)\nclass TestControl {\n    ...\n}\n</code></pre><h3>2.Create a Service</h3>\n<pre class=\"prettyprint language-javascript\"><code>import { Service } from &#x27;easy-node-ioc&#x27;;\n@Service(&#x27;&#x27;)\nclass TestService {\n    ...\n}\n</code></pre><h3>3.Inject Service</h3>\n<pre class=\"prettyprint language-javascript\"><code>import { Autowired,Controller } from &#x27;easy-node-ioc&#x27;;\n@Controller(&#x27;&#x2F;test&#x27;)\nclass TestControl {\n    @Autowired\n    testService: TestService;\n    ...\n}\n</code></pre><h3>4.Define Rest API:GET,POST,PUT,DELETE,PATCH</h3>\n<pre class=\"prettyprint language-javascript\"><code>import { Autowired,Controller,GET,RequestParam } from &#x27;easy-node-ioc&#x27;;\n@Controller(&#x27;&#x2F;test&#x27;)\nclass TestControl {\n    @Autowired\n    testService: TestService;\n    @Get(&#x27;&#x2F;index&#x27;)\n    index(@RequestParam(&#x27;age&#x27;) age: number, req: Request, res: Response) {\n        console.log(&#x27;index method&#x27;);\n        this.dbService.queryDb();\n\n        res.status(200).send(this.testService.queryDb());\n    }\n    ...\n}\n</code></pre><h3>4.Define Start App</h3>\n<pre class=\"prettyprint language-javascript\"><code>import { Bootstrap, ComponentScan } from &quot;..&#x2F;&quot;;\n@ComponentScan(join(__dirname, &quot;.&#x2F;Controller.ts&quot;))\n@Bootstrap\nclass App {\n  constructor() {}\n\n  app = express();\n\n  main() {\n    const server = http.createServer(this.app);\n\n    server.listen(9001, function() {\n      console.log(&quot;Example app listening at http:&#x2F;&#x2F;%s:%s&quot;);\n    });\n  }\n}\n</code></pre><h2>How to debug</h2>\n<p>if you use vscode , just follow <code>.vscode/launch.json</code> , select <code>Launch Program</code> .<br>\nif you see <code>Example app has started.</code> in the console , then means test case start successfully .<br>\nTry to call <code>http://localhost:9001/api/test/index</code> .</p>\n<p>gitHubåœ°å€ï¼š<a href=\"https://github.com/chenkang084/easy-node-ioc\">https://github.com/chenkang084/easy-node-ioc</a></p>\n<p>è¯´æ˜ï¼šç”±äºè¿™ä¸ªé¡¹ç›®ä¹Ÿæ˜¯çªå‘å¥‡æƒ³ï¼Œå¯èƒ½ä¼šå­˜åœ¨é—®é¢˜ã€‚ä¸è¿‡ï¼Œç›®å‰æˆ‘å·²ç»ç”¨è¿™ä¸ªåŒ…ï¼Œé‡å†™äº†æˆ‘å…¬å¸å†…éƒ¨çš„ä¸€ä¸ªnodeåå°é¡¹ç›®ï¼Œç›®å‰ä¸€åˆ‡è¿è¡Œè‰¯å¥½ã€‚\nåŒæ—¶ï¼Œæ¬¢è¿issuesï¼Œå¦‚æœä½ è§‰å¾—è¿˜å¯ä»¥ï¼Œä¹Ÿå¯ä»¥ç»™æˆ‘ä¸€ä¸ªstarã€‚</p>\n</div>",
      "title": "Nodejs Spring MVC --æ”¯æŒç›´æ¥debug ts code",
      "last_reply_at": "2019-07-25T01:07:25.440Z",
      "good": false,
      "top": false,
      "reply_count": 3,
      "visit_count": 1021,
      "create_at": "2019-07-22T11:39:16.277Z",
      "author": {
        "loginname": "chenkang084",
        "avatar_url": "https://avatars1.githubusercontent.com/u/16607418?v=4&s=120"
      }
    },
    {
      "id": "5b5e78f5673571454c633cea",
      "author_id": "5b56866ae740336c7bedb345",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><p><strong>koa2å®æˆ˜é¡¹ç›®ä»‹ç»ï¼ˆçœŸå…¨æ ˆï¼‰ï¼š</strong></p>\n<p><strong>Nodejs+koa2å®æˆ˜è§†é¢‘æ•™ç¨‹</strong>ä»é›¶å¼€å§‹ä¸€æ­¥ä¸€æ­¥è®©ä½ å­¦ä¼šKoaåŸºç¡€ä»¥åŠç”¨ç”¨<strong>Koaå¼€å‘é¡¹ç›®</strong>ï¼Œæœ¬æ•™ç¨‹æ¶‰åŠ ç”¨æˆ·æƒé™åˆ¤æ–­ ã€<strong>éªŒè¯ç </strong> ã€åˆ†é¡µã€å¤šçº§åˆ†ç±»ã€<strong>ueditorå¯è§†åŒ–å¯Œæ–‡æœ¬ç¼–è¾‘å™¨</strong>ã€å›¾ç‰‡ä¸Šä¼ ã€<strong>åº•å±‚DBåº“å°è£…</strong>ã€<strong>æ‰©å±•art-templateçš„æ ¸å¿ƒæ–¹æ³•ã€<strong>ajaxæ”¹å˜çŠ¶æ€ã€ajaxæ’åºã€ä»¥åŠèµ é€çš„</strong>Socket.ioæœºå™¨äºº</strong> ã€Socket.ioå¤šäººèŠå¤©å®¤ã€<strong>Socket.ioç¾¤èŠ</strong>ã€å‰åç«¯åˆ†ç¦» <strong>RESTful API Api</strong>æ¥å£ã€è´­ä¹°åŸŸå æœåŠ¡å™¨ã€åŸŸåå¤‡æ¡ˆã€<strong>nginxè´Ÿè½½å‡è¡¡</strong>ã€<strong>åŸŸåè§£æéƒ¨ç½²nodejsç¨‹åº</strong>ã€Nodejsè¿›ç¨‹ç®¡ç†å™¨pm2æ¨¡å—ã€Koaæ“ä½œ<strong>mysqlæ•°æ®åº“</strong></p>\n<p><strong>åœ°å€ï¼š</strong> <a href=\"https://www.itying.com/goods-800.html\">Koa2å®æˆ˜è§†é¢‘æ•™ç¨‹ä¸‹è½½åœ°å€ç‚¹æˆ‘</a></p>\n<p><strong>2018 Nodejs+Koa2å…¥é—¨å®æˆ˜è§†é¢‘æ•™ç¨‹ç™¾åº¦ç½‘ç›˜ä¸‹è½½åœ°å€ï¼ˆ41è®²å…è´¹åŸºç¡€ä¸‹è½½åœ°å€ï¼‰ï¼š</strong></p>\n<p><a href=\"https://pan.baidu.com/s/1KNaA97kGwNhavch5rP_G7w\">https://pan.baidu.com/s/1KNaA97kGwNhavch5rP_G7w</a></p>\n</div>",
      "title": "Nodejs+koa2å®æˆ˜è§†é¢‘æ•™ç¨‹ã€87è®²ã€‘--Koa2+Nodejs+MongoDbæ‰“é€ ä¼ä¸šçº§CMSå‰åç«¯å…¨æ ˆé¡¹ç›®å®æˆ˜è§†é¢‘æ•™ç¨‹",
      "last_reply_at": "2019-07-25T00:56:32.002Z",
      "good": false,
      "top": false,
      "reply_count": 81,
      "visit_count": 17428,
      "create_at": "2018-07-30T02:33:25.113Z",
      "author": {
        "loginname": "songsunli",
        "avatar_url": "https://avatars1.githubusercontent.com/u/41601667?v=4&s=120"
      }
    },
    {
      "id": "5d33f565b2b9222961dacac2",
      "author_id": "58de5214b3e60b982d089dc3",
      "tab": "ask",
      "content": "<div class=\"markdown-text\"><p>eggæ€»ä½“æ¥è¯´æŒºå¥½ç”¨çš„, æˆ‘ä»¬ä¹Ÿå†…éƒ¨å¼€å‘äº†ä¸€äº›æ’ä»¶å’Œä¸­é—´ä»¶.\nä½†ä¸€ç›´æœ‰è¿™äº›é—®é¢˜æœ‰äº›å›°æ‰°:\n1.æœ¬åœ°è°ƒè¯•æ¯”è¾ƒéº»çƒ¦: ä½¿ç”¨çš„å®˜æ–¹çš„vscode tsçš„é…ç½®, ä½†å¯åŠ¨æ…¢å¹¶ä¸”å¦‚ä¸‹çš„æ–­ç‚¹ä¼šåœä¸¤æ¬¡, æ€»å…±è¦èŠ±å°†è¿‘20ç§’çœŸæ­£å‡†å¤‡å¥½.\n<img src=\"//static.cnodejs.org/FoQT4t9afKcXjVe_QkNldrElxYgP\" alt=\"image.png\">\n2.å•è¿›ç¨‹è²Œä¼¼è¿˜æ²¡æœ‰æ­£å¼æ”¯æŒå§, è¿™æ ·åœ¨å®¹å™¨åŒ–ç¯å¢ƒé‡Œé¢å¤šèµ·äº†å¯¹æˆ‘ä»¬æ¥è¯´ä¸å¿…è¦çš„workerç­‰è¿›ç¨‹.\n3.æˆ‘ä»¬ç”¨çš„ts, æœ‰æ—¶å€™æƒ³ç›´æ¥è·³è¿‡å»æŸ¥çœ‹eggæˆå‘˜çš„æºç å¾ˆä¸æ–¹ä¾¿, ä¸çŸ¥é“æœ‰æ²¡æœ‰è®¡åˆ’ç”¨tsé‡å†™.\n4.æœ‰äº›é»˜è®¤åŠŸèƒ½æƒ³å®šåˆ¶è¿˜æ˜¯æ¯”è¾ƒå¤´ç–¼, æ¯”å¦‚æ—¥å¿—æ¨¡å—éœ€è¦åšå¤§çš„ä¿®æ”¹, æ–‡æ¡£ä¸Šå¯¹æ­¤è¯´æ˜ä¸è¯¦ç»†, éœ€è¦çœ‹æºç .</p>\n</div>",
      "title": "å…¬å¸åœ¨ç”¨egg, æœ‰å‡ ä¸ªé—®é¢˜æ¯”è¾ƒå›°æ‰°.",
      "last_reply_at": "2019-07-24T09:54:38.001Z",
      "good": false,
      "top": false,
      "reply_count": 20,
      "visit_count": 1657,
      "create_at": "2019-07-21T05:17:25.686Z",
      "author": {
        "loginname": "xiaozhongliu",
        "avatar_url": "https://avatars3.githubusercontent.com/u/17674404?v=4&s=120"
      }
    },
    {
      "id": "5d37b9ffb4725a628e268425",
      "author_id": "5bf3cec8e6481c5709f5d871",
      "tab": "ask",
      "content": "<div class=\"markdown-text\"><p>åˆ—ï¼šconst json=[{a:1,b:2},{a:2,b:1}â€¦]; è·å–æ•°ç»„ä¸­å¯¹è±¡a=10001çš„å¯¹è±¡ï¼Œç„¶åçŸ¥é“bçš„å€¼ã€‚é™¤äº†éå†ï¼Œæœ‰æ²¡æœ‰æ›´é«˜æ•ˆç®€æ´çš„ç®—æ³•å®ç°è·å–</p>\n</div>",
      "title": "jsonæ•°ç»„ä¸­ï¼Œå¦‚ä½•å¿«é€ŸæŸ¥è¯¢åˆ°æ•°ç»„ä¸­åˆ°æŸä¸ªå¯¹è±¡",
      "last_reply_at": "2019-07-24T06:50:40.668Z",
      "good": false,
      "top": false,
      "reply_count": 5,
      "visit_count": 522,
      "create_at": "2019-07-24T01:53:03.716Z",
      "author": {
        "loginname": "tzbcf",
        "avatar_url": "https://avatars1.githubusercontent.com/u/25059314?v=4&s=120"
      }
    },
    {
      "id": "5d37cfb39969a529571d6d2c",
      "author_id": "5cf0fa211fe902120f31b023",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><h3>0. å‰è¨€</h3>\n<p>æœ¬æ–‡å°†æ‰‹æŠŠæ‰‹æ•™ä½ å¦‚ä½•å†™å‡ºè¿·ä½ ç‰ˆå¾®åšçš„ä¸€è¡Œè¡Œä»£ç ï¼Œè¿·ä½ ç‰ˆå¾®åšåŒ…å«ä»¥ä¸‹åŠŸèƒ½ï¼š</p>\n<ul>\n<li>Feed æµï¼šå…³æ³¨åŠ¨æ€ã€æ‰€æœ‰åŠ¨æ€</li>\n<li>å‘é€å›¾æ–‡åŠ¨æ€</li>\n<li>æœç´¢ç”¨æˆ·</li>\n<li>å…³æ³¨ç³»ç»Ÿ</li>\n<li>ç‚¹èµåŠ¨æ€</li>\n<li>ä¸ªäººä¸»é¡µ</li>\n</ul>\n<p>ä½¿ç”¨åˆ°çš„äº‘å¼€å‘èƒ½åŠ›ï¼š</p>\n<ul>\n<li>äº‘æ•°æ®åº“</li>\n<li>äº‘å­˜å‚¨</li>\n<li>äº‘å‡½æ•°</li>\n<li>äº‘è°ƒç”¨</li>\n</ul>\n<p>æ²¡é”™ï¼Œå‡ ä¹æ˜¯æ‰€æœ‰çš„äº‘å¼€å‘èƒ½åŠ›ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¯»å®Œè¿™ç¯‡å®æˆ˜ï¼Œä½ å°±ç›¸å½“äºå®Œå…¨å…¥é—¨äº†äº‘å¼€å‘ï¼</p>\n<p>å’³å’³ï¼Œå½“ç„¶ï¼Œå®é™…ä¸Šè¿™é‡Œåªæ˜¯ä»‹ç»æ ¸å¿ƒé€»è¾‘å’Œé‡ç‚¹ä»£ç ç‰‡æ®µï¼Œå®Œæ•´ä»£ç å»ºè®®ä¸‹è½½æŸ¥çœ‹ã€‚</p>\n<h3>1. å–å¾—æˆæƒ</h3>\n<p>ä½œä¸ºä¸€ä¸ªç¤¾äº¤å¹³å°ï¼Œé¦–å…ˆè¦åšçš„è‚¯å®šæ˜¯ç»è¿‡ç”¨æˆ·æˆæƒï¼Œè·å–ç”¨æˆ·ä¿¡æ¯ï¼Œå°ç¨‹åºæä¾›äº†å¾ˆæ–¹ä¾¿çš„æ¥å£ï¼š</p>\n<pre class=\"prettyprint language-html\"><code>&lt;button open-type=&quot;getUserInfo&quot; bindgetuserinfo=&quot;getUserInfo&quot;&gt;\n  è¿›å…¥å°åœˆåœˆ\n&lt;&#x2F;button&gt;\n</code></pre><p>è¿™ä¸ª <code>button</code> æœ‰ä¸ª <code>open-type</code> å±æ€§ï¼Œè¿™ä¸ªå±æ€§æ˜¯ä¸“é—¨ç”¨æ¥ä½¿ç”¨å°ç¨‹åºçš„å¼€æ”¾èƒ½åŠ›çš„ï¼Œè€Œ <code>getUserInfo</code> åˆ™è¡¨ç¤º <strong>è·å–ç”¨æˆ·ä¿¡æ¯ï¼Œå¯ä»¥ä»<code>bindgetuserinfo</code>å›è°ƒä¸­è·å–åˆ°ç”¨æˆ·ä¿¡æ¯</strong>ã€‚</p>\n<p>äºæ˜¯æˆ‘ä»¬å¯ä»¥åœ¨ wxml é‡Œæ”¾å…¥è¿™ä¸ª <code>button</code> åï¼Œåœ¨ç›¸åº”çš„ js é‡Œå†™å¦‚ä¸‹ä»£ç ï¼š</p>\n<pre class=\"prettyprint language-js\"><code>Page({\n  ...\n\n  getUserInfo: function(e) {\n    wx.navigateTo({\n      url: &quot;&#x2F;pages&#x2F;circle&#x2F;circle&quot;\n    })\n  },\n\n  ...\n})\n</code></pre><p>è¿™æ ·åœ¨æˆåŠŸè·å–åˆ°ç”¨æˆ·ä¿¡æ¯åï¼Œæˆ‘ä»¬å°±èƒ½è·³è½¬åˆ°è¿·ä½ å¾®åšé¡µé¢äº†ã€‚</p>\n<p>éœ€è¦æ³¨æ„ï¼Œä¸èƒ½ä½¿ç”¨ <code>wx.authorize({scope: &quot;scope.userInfo&quot;})</code> æ¥è·å–è¯»å–ç”¨æˆ·ä¿¡æ¯çš„æƒé™ï¼Œå› ä¸ºå®ƒä¸ä¼šè·³å‡ºæˆæƒå¼¹çª—ã€‚ç›®å‰åªèƒ½ä½¿ç”¨ä¸Šé¢æ‰€è¿°çš„æ–¹å¼å®ç°ã€‚</p>\n<h3>2. ä¸»é¡µè®¾è®¡</h3>\n<p>ç¤¾äº¤å¹³å°çš„ä¸»é¡µå¤§åŒå°å¼‚ï¼Œä¸»è¦ç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼š</p>\n<ul>\n<li>Feed æµ</li>\n<li>æ¶ˆæ¯</li>\n<li>ä¸ªäººä¿¡æ¯</li>\n</ul>\n<p>é‚£ä¹ˆå¾ˆå®¹æ˜“å°±èƒ½æƒ³åˆ°è¿™æ ·çš„å¸ƒå±€ï¼ˆæ³¨æ„æ–°å»ºä¸€ä¸ª Page å“¦ï¼Œè·¯å¾„ï¼š<code>pages/circle/circle.wxml</code>ï¼‰ï¼š</p>\n<pre class=\"prettyprint language-html\"><code>&lt;view class=&quot;circle-container&quot;&gt;\n  &lt;view\n    style=&quot;display:{{currentPage === &#x27;main&#x27; ? &#x27;block&#x27; : &#x27;none&#x27;}}&quot;\n    class=&quot;main-area&quot;\n  &gt;\n  &lt;&#x2F;view&gt;\n\n  &lt;view\n    style=&quot;display:{{currentPage === &#x27;msg&#x27; ? &#x27;flex&#x27; : &#x27;none&#x27;}}&quot;\n    class=&quot;msg-area&quot;\n  &gt;\n  &lt;&#x2F;view&gt;\n\n  &lt;view\n    style=&quot;display:{{currentPage === &#x27;me&#x27; ? &#x27;flex&#x27; : &#x27;none&#x27;}}&quot;\n    class=&quot;me-area&quot;\n  &gt;\n  &lt;&#x2F;view&gt;\n\n  &lt;view class=&quot;footer&quot;&gt;\n    &lt;view class=&quot;footer-item&quot;&gt;\n      &lt;button\n        class=&quot;footer-btn&quot;\n        bindtap=&quot;onPageMainTap&quot;\n        style=&quot;background: {{currentPage === &#x27;main&#x27; ? &#x27;#111&#x27; : &#x27;rgba(0,0,0,0)&#x27;}}; color: {{currentPage === &#x27;main&#x27; ? &#x27;#fff&#x27; : &#x27;#000&#x27;}}&quot;\n      &gt;\n        é¦–é¡µ\n      &lt;&#x2F;button&gt;\n    &lt;&#x2F;view&gt;\n    &lt;view class=&quot;footer-item&quot;&gt;\n      &lt;button\n        class=&quot;footer-btn&quot;\n        bindtap=&quot;onPageMsgTap&quot;\n        style=&quot;background: {{currentPage === &#x27;msg&#x27; ? &#x27;#111&#x27; : &#x27;rgba(0,0,0,0)&#x27;}}; color: {{currentPage === &#x27;msg&#x27; ? &#x27;#fff&#x27; : &#x27;#000&#x27;}}&quot;\n      &gt;\n        æ¶ˆæ¯\n      &lt;&#x2F;button&gt;\n    &lt;&#x2F;view&gt;\n    &lt;view class=&quot;footer-item&quot;&gt;\n      &lt;button\n        class=&quot;footer-btn&quot;\n        bindtap=&quot;onPageMeTap&quot;\n        style=&quot;background: {{currentPage === &#x27;me&#x27; ? &#x27;#111&#x27; : &#x27;rgba(0,0,0,0)&#x27;}}; color: {{currentPage === &#x27;me&#x27; ? &#x27;#fff&#x27; : &#x27;#000&#x27;}}&quot;\n      &gt;\n        ä¸ªäºº\n      &lt;&#x2F;button&gt;\n    &lt;&#x2F;view&gt;\n  &lt;&#x2F;view&gt;\n&lt;&#x2F;view&gt;\n</code></pre><p>å¾ˆå¥½ç†è§£ï¼Œç”»é¢ä¸»è¦è¢«åˆ†ä¸ºä¸Šä¸‹ä¸¤ä¸ªéƒ¨åˆ†ï¼šä¸Šé¢çš„éƒ¨åˆ†æ˜¯ä¸»è¦å†…å®¹ï¼Œä¸‹é¢çš„éƒ¨åˆ†æ˜¯ä¸‰ä¸ª Tab ç»„æˆçš„ Footerã€‚é‡ç‚¹ WXSS å®ç°ï¼ˆå®Œæ•´çš„ WXSS å¯ä»¥ä¸‹è½½æºç æŸ¥çœ‹ï¼‰ï¼š</p>\n<pre class=\"prettyprint language-css\"><code>.footer {\n  box-shadow: 0 0 15rpx #ccc;\n  display: flex;\n  position: fixed;\n  height: 120rpx;\n  bottom: 0;\n  width: 100%;\n  flex-direction: row;\n  justify-content: center;\n  z-index: 100;\n  background: #fff;\n}\n\n.footer-item {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  width: 33.33%;\n  color: #333;\n}\n\n.footer-item:nth-child(2) {\n  border-left: 3rpx solid #aaa;\n  border-right: 3rpx solid #aaa;\n  flex-grow: 1;\n}\n\n.footer-btn {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 0;\n  font-size: 30rpx;\n}\n</code></pre><p>æ ¸å¿ƒé€»è¾‘æ˜¯é€šè¿‡ <code>position: fixed</code> æ¥è®© Footer ä¸€ç›´åœ¨ä¸‹æ–¹ã€‚</p>\n<p>è¯»è€…ä¼šå‘ç°æœ‰ä¸€ä¸ª <code>currentPage</code> çš„ data ï¼Œè¿™ä¸ª data çš„ä½œç”¨å…¶å®å¾ˆç›´è§‚ï¼šé€šè¿‡åˆ¤æ–­å®ƒçš„å€¼æ˜¯ <code>main</code>/<code>msg</code>/<code>me</code> ä¸­çš„å“ªä¸€ä¸ªæ¥å†³å®šä¸»è¦å†…å®¹ã€‚åŒæ—¶ï¼Œä¸ºäº†è®©é¦–æ¬¡ä½¿ç”¨çš„ç”¨æˆ·çŸ¥é“è‡ªå·±åœ¨å“ªä¸ª Tabï¼ŒFooter ä¸­ç›¸åº”çš„ <code>button</code> ä¹Ÿä¼šä»ç™½åº•é»‘å­—é»‘åº•ç™½å­—ï¼Œä¸å¦å¤–ä¸¤ä¸ª Tab å½¢æˆå¯¹æ¯”ã€‚</p>\n<p>ç°åœ¨æˆ‘ä»¬æ¥çœ‹çœ‹ <code>main</code> éƒ¨åˆ†çš„ä»£ç ï¼ˆåœ¨ä¸Šé¢ä»£ç çš„åŸºç¡€ä¸Šæ‰©å……ï¼‰:</p>\n<pre class=\"prettyprint language-html\"><code>...\n&lt;view\n  class=&quot;main-header&quot;\n  style=&quot;display:{{currentPage === &#x27;main&#x27; ? &#x27;flex&#x27; : &#x27;none&#x27;}};max-height:{{mainHeaderMaxHeight}}&quot;\n&gt;\n  &lt;view class=&quot;group-picker-wrapper&quot;&gt;\n    &lt;picker\n      bindchange=&quot;bindGroupPickerChange&quot;\n      value=&quot;{{groupArrayIndex}}&quot;\n      range=&quot;{{groupArray}}&quot;\n      class=&quot;group-picker&quot;\n    &gt;\n      &lt;button class=&quot;group-picker-inner&quot;&gt;\n        {{groupArray[groupArrayIndex]}}\n      &lt;&#x2F;button&gt;\n    &lt;&#x2F;picker&gt;\n  &lt;&#x2F;view&gt;\n  &lt;view class=&quot;search-btn-wrapper&quot;&gt;\n    &lt;button class=&quot;search-btn&quot; bindtap=&quot;onSearchTap&quot;&gt;æœç´¢ç”¨æˆ·&lt;&#x2F;button&gt;\n  &lt;&#x2F;view&gt;\n&lt;&#x2F;view&gt;\n&lt;view\n  class=&quot;main-area&quot;\n  style=&quot;display:{{currentPage === &#x27;main&#x27; ? &#x27;block&#x27; : &#x27;none&#x27;}};height: {{mainAreaHeight}};margin-top:{{mainAreaMarginTop}}&quot;\n&gt;\n  &lt;scroll-view scroll-y class=&quot;main-area-scroll&quot; bindscroll=&quot;onMainPageScroll&quot;&gt;\n    &lt;block\n      wx:for=&quot;{{pageMainData}}&quot;\n      wx:for-index=&quot;idx&quot;\n      wx:for-item=&quot;itemName&quot;\n      wx:key=&quot;_id&quot;\n    &gt;\n      &lt;post-item is=&quot;post-item&quot; data=&quot;{{itemName}}&quot; class=&quot;post-item-wrapper&quot; &#x2F;&gt;\n    &lt;&#x2F;block&gt;\n    &lt;view wx:if=&quot;{{pageMainData.length === 0}}&quot; class=&quot;item-placeholder&quot;\n      &gt;æ— æ•°æ®&lt;&#x2F;view\n    &gt;\n  &lt;&#x2F;scroll-view&gt;\n  &lt;button\n    class=&quot;add-poster-btn&quot;\n    bindtap=&quot;onAddPosterTap&quot;\n    hover-class=&quot;add-poster-btn-hover&quot;\n    style=&quot;bottom:{{addPosterBtnBottom}}&quot;\n  &gt;\n    +\n  &lt;&#x2F;button&gt;\n&lt;&#x2F;view&gt;\n...\n</code></pre><p>è¿™é‡Œç”¨åˆ°äº† <a href=\"https://developers.weixin.qq.com/miniprogram/dev/reference/wxml/list.html\">åˆ—è¡¨æ¸²æŸ“</a> å’Œ <a href=\"https://developers.weixin.qq.com/miniprogram/dev/reference/wxml/conditional.html\">æ¡ä»¶æ¸²æŸ“</a>ï¼Œè¿˜ä¸æ¸…æ¥šçš„å¯ä»¥ç‚¹å‡»è¿›å»å­¦ä¹ ä¸€ä¸‹ã€‚</p>\n<p>å¯ä»¥çœ‹åˆ°ï¼Œç›¸æ¯”ä¹‹å‰çš„ä»£ç ï¼Œæˆ‘æ·»åŠ ä¸€ä¸ª headerï¼ŒåŒæ—¶ <code>main-area</code> çš„å†…éƒ¨ä¹Ÿæ–°å¢äº†ä¸€ä¸ª <code>scroll-view</code>ï¼ˆç”¨äºå±•ç¤º Feed æµï¼‰ å’Œä¸€ä¸ª <code>button</code>ï¼ˆç”¨äºç¼–è¾‘æ–°è¿·ä½ å¾®åšï¼‰ã€‚header çš„åŠŸèƒ½å¾ˆç®€å•ï¼šå·¦ä¾§åŒºåŸŸæ˜¯ä¸€ä¸ª <code>picker</code>ï¼Œå¯ä»¥é€‰æ‹©æŸ¥çœ‹çš„åŠ¨æ€ç±»å‹ï¼ˆç›®å‰æœ‰ <em>å…³æ³¨åŠ¨æ€</em> å’Œ <em>æ‰€æœ‰åŠ¨æ€</em> ä¸¤ç§ï¼‰ï¼›å³ä¾§åŒºåŸŸæ˜¯ä¸€ä¸ªæŒ‰é’®ï¼Œç‚¹å‡»åå¯ä»¥è·³è½¬åˆ°æœç´¢é¡µé¢ï¼Œè¿™ä¸¤ä¸ªåŠŸèƒ½æˆ‘ä»¬å…ˆæ”¾ä¸€ä¸‹ï¼Œå…ˆç»§ç»­çœ‹ <code>main-area</code> çš„æ–°å¢å†…å®¹ã€‚</p>\n<p><code>main-area</code> é‡Œçš„ <code>scroll-view</code> æ˜¯ä¸€ä¸ªå¯ç›‘å¬æ»šåŠ¨äº‹ä»¶çš„åˆ—è¡¨ï¼Œå…¶ä¸­ç›‘å¬äº‹ä»¶çš„å®ç°ï¼š</p>\n<pre class=\"prettyprint language-js\"><code>data: {\n  ...\n  addPosterBtnBottom: &quot;190rpx&quot;,\n  mainHeaderMaxHeight: &quot;80rpx&quot;,\n  mainAreaHeight: &quot;calc(100vh - 200rpx)&quot;,\n  mainAreaMarginTop: &quot;80rpx&quot;,\n},\nonMainPageScroll: function(e) {\n  if (e.detail.deltaY &lt; 0) {\n    this.setData({\n      addPosterBtnBottom: &quot;-190rpx&quot;,\n      mainHeaderMaxHeight: &quot;0&quot;,\n      mainAreaHeight: &quot;calc(100vh - 120rpx)&quot;,\n      mainAreaMarginTop: &quot;0rpx&quot;\n    })\n  } else {\n    this.setData({\n      addPosterBtnBottom: &quot;190rpx&quot;,\n      mainHeaderMaxHeight: &quot;80rpx&quot;,\n      mainAreaHeight: &quot;calc(100vh - 200rpx)&quot;,\n      mainAreaMarginTop: &quot;80rpx&quot;\n    })\n  }\n},\n...\n</code></pre><p>ç»“åˆ wxml å¯ä»¥çŸ¥é“ï¼Œå½“é¡µé¢å‘ä¸‹æ»‘åŠ¨ ï¼ˆdeltaY &lt; 0ï¼‰ æ—¶ï¼Œheader å’Œ <code>button</code> ä¼š â€œçªç„¶æ¶ˆå¤±â€ï¼Œåä¹‹å®ƒä»¬åˆ™ä¼š â€œçªç„¶å‡ºç°â€ã€‚ä¸ºäº†è§†è§‰ä¸Šæœ‰æ›´å¥½åœ°è¿‡æ¸¡ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ WXSS ä¸­ä½¿ç”¨ <code>transition</code> ï¼š</p>\n<pre class=\"prettyprint language-css\"><code>...\n.main-area {\n  position: relative;\n  flex-grow: 1;\n  overflow: auto;\n  z-index: 1;\n  transition: height 0.3s, margin-top 0.3s;\n}\n.main-header {\n  position: fixed;\n  width: 100%;\n  height: 80rpx;\n  background: #fff;\n  top: 0;\n  left: 0;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  z-index: 100;\n  border-bottom: 3rpx solid #aaa;\n  transition: max-height 0.3s;\n  overflow: hidden;\n}\n.add-poster-btn {\n  position: fixed;\n  right: 60rpx;\n  box-shadow: 5rpx 5rpx 10rpx #aaa;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: #333;\n  padding-bottom: 10rpx;\n  text-align: center;\n  border-radius: 50%;\n  font-size: 60rpx;\n  width: 100rpx;\n  height: 100rpx;\n  transition: bottom 0.3s;\n  background: #fff;\n  z-index: 1;\n}\n...\n</code></pre><h3>3. Feed æµ</h3>\n<h4>3.1 post-item</h4>\n<p>å‰é¢æåˆ°ï¼Œ<code>scroll-view</code> çš„å†…å®¹æ˜¯ Feed æµï¼Œé‚£ä¹ˆé¦–å…ˆå°±è¦æƒ³åˆ°ä½¿ç”¨ <a href=\"https://developers.weixin.qq.com/miniprogram/dev/reference/wxml/list.html\">åˆ—è¡¨æ¸²æŸ“</a>ã€‚è€Œä¸”ï¼Œä¸ºäº†æ–¹ä¾¿åœ¨ä¸ªäººä¸»é¡µå¤ç”¨ï¼Œåˆ—è¡¨æ¸²æŸ“ä¸­çš„æ¯ä¸€ä¸ª item éƒ½è¦æŠ½è±¡å‡ºæ¥ã€‚è¿™æ—¶å°±è¦ä½¿ç”¨å°ç¨‹åºä¸­çš„ <a href=\"https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/\">Custom-Component</a> åŠŸèƒ½äº†ã€‚</p>\n<p>æ–°å»ºä¸€ä¸ªåä¸º <code>post-item</code> çš„ <code>Component</code>ï¼Œå…¶ä¸­ wxml çš„å®ç°ï¼ˆè·¯å¾„ï¼š<code>pages/circle/component/post-item/post-item.js</code>ï¼‰ï¼š</p>\n<pre class=\"prettyprint language-html\"><code>&lt;view\n  class=&quot;post-item&quot;\n  hover-class=&quot;post-item-hover&quot;\n  bindlongpress=&quot;onItemLongTap&quot;\n  bindtap=&quot;onItemTap&quot;\n&gt;\n  &lt;view class=&quot;post-title&quot;&gt;\n    &lt;view class=&quot;author&quot; hover-class=&quot;author-hover&quot; catchtap=&quot;onAuthorTap&quot;\n      &gt;{{data.author}}&lt;&#x2F;view\n    &gt;\n    &lt;view class=&quot;date&quot;&gt;{{data.formatDate}}&lt;&#x2F;view&gt;\n  &lt;&#x2F;view&gt;\n  &lt;view class=&quot;msg-wrapper&quot;&gt;\n    &lt;text class=&quot;msg&quot;&gt;{{data.msg}}&lt;&#x2F;text&gt;\n  &lt;&#x2F;view&gt;\n  &lt;view class=&quot;image-outer&quot; wx:if=&quot;{{data.photoId !== &#x27;&#x27;}}&quot; catchtap=&quot;onImgTap&quot;&gt;\n    &lt;image-wrapper is=&quot;image-wrapper&quot; src=&quot;{{data.photoId}}&quot; &#x2F;&gt;\n  &lt;&#x2F;view&gt;\n&lt;&#x2F;view&gt;\n</code></pre><p>å¯è§ï¼Œä¸€ä¸ª <code>poster-item</code> æœ€ä¸»è¦æœ‰ä»¥ä¸‹ä¿¡æ¯ï¼š</p>\n<ul>\n<li>ä½œè€…å</li>\n<li>å‘é€æ—¶é—´</li>\n<li>æ–‡æœ¬å†…å®¹</li>\n<li>å›¾ç‰‡å†…å®¹</li>\n</ul>\n<p>å…¶ä¸­ï¼Œå›¾ç‰‡å†…å®¹å› ä¸ºæ˜¯å¯é€‰çš„ï¼Œæ‰€ä»¥ä½¿ç”¨äº† <a href=\"https://developers.weixin.qq.com/miniprogram/dev/reference/wxml/conditional.html\">æ¡ä»¶æ¸²æŸ“</a>ï¼Œè¿™ä¼šåœ¨æ²¡æœ‰å›¾ç‰‡ä¿¡æ¯æ—¶ä¸è®©å›¾ç‰‡æ˜¾ç¤ºåŒºåŸŸå ç”¨å±å¹•ç©ºé—´ã€‚å¦å¤–ï¼Œå›¾ç‰‡å†…å®¹ä¸»è¦æ˜¯ç”± <code>image-wrapper</code> ç»„æˆï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ª <code>Custom-Component</code>ï¼Œä¸»è¦åŠŸèƒ½æ˜¯ï¼š</p>\n<ul>\n<li>å¼ºåˆ¶é•¿å®½ 1:1 è£å‰ªæ˜¾ç¤ºå›¾ç‰‡</li>\n<li>ç‚¹å‡»æŸ¥çœ‹å¤§å›¾</li>\n<li>æœªåŠ è½½å®Œæˆæ—¶æ˜¾ç¤º åŠ è½½ä¸­</li>\n</ul>\n<p>å…·ä½“ä»£ç è¿™é‡Œå°±ä¸å±•ç¤ºäº†ï¼Œæ¯”è¾ƒç®€å•ï¼Œè¯»è€…å¯ä»¥åœ¨ <code>component/image-wrapper</code> é‡Œæ‰¾åˆ°ã€‚</p>\n<p>å›è¿‡å¤´çœ‹ <code>main-area</code> çš„å…¶ä»–æ–°å¢éƒ¨åˆ†ï¼Œç»†å¿ƒçš„è¯»è€…ä¼šå‘ç°æœ‰è¿™ä¹ˆä¸€å¥ï¼š</p>\n<pre class=\"prettyprint language-html\"><code>&lt;view wx:if=&quot;{{pageMainData.length === 0}}&quot; class=&quot;item-placeholder&quot;\n  &gt;æ— æ•°æ®&lt;&#x2F;view\n&gt;\n</code></pre><p>è¿™ä¼šåœ¨ Feed æµæš‚æ—¶æ²¡æœ‰è·å–åˆ°æ•°æ®æ—¶ç»™ç”¨æˆ·ä¸€ä¸ªæç¤ºã€‚</p>\n<h4>3.2 collections: posterã€poster_users</h4>\n<p>å±•ç¤º Feed æµçš„éƒ¨åˆ†å·²ç»ç¼–å†™å®Œæ¯•ï¼Œç°åœ¨å°±å·®å®é™…æ•°æ®äº†ã€‚æ ¹æ®ä¸Šä¸€å°èŠ‚ <code>poster-item</code> çš„ä¸»è¦ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥åˆæ­¥æ¨æ–­å‡ºä¸€æ¡è¿·ä½ å¾®åšåœ¨ <a href=\"https://developers.weixin.qq.com/miniprogram/dev/wxcloud/basis/capabilities.html#%E6%95%B0%E6%8D%AE%E5%BA%93\">äº‘æ•°æ®åº“</a> çš„ collection <code>poster</code> é‡Œæ˜¯è¿™æ ·å­˜å‚¨çš„ï¼š</p>\n<pre class=\"prettyprint language-json\"><code>{\n  &quot;username&quot;: &quot;Tester&quot;,\n  &quot;date&quot;: &quot;2019-07-22 12:00:00&quot;,\n  &quot;text&quot;: &quot;Ceshiwenben&quot;,\n  &quot;photo&quot;: &quot;xxx&quot;\n}\n</code></pre><p>å…ˆæ¥çœ‹ <code>username</code>ã€‚ç”±äºç¤¾äº¤å¹³å°ä¸€èˆ¬ä¸ä¼šé™åˆ¶ç”¨æˆ·çš„æ˜µç§°ï¼Œæ‰€ä»¥å¦‚æœæ¯æ¡è¿·ä½ å¾®åšéƒ½å­˜å‚¨æ˜µç§°ï¼Œé‚£å°†æ¥æ¯æ¬¡ç”¨æˆ·ä¿®æ”¹ä¸€æ¬¡æ˜µç§°ï¼Œå°±è¦éå†æ•°æ®åº“æŠŠæ‰€æœ‰è¿·ä½ å¾®åšé¡¹éƒ½æ”¹ä¸€éï¼Œç›¸å½“è€—è´¹æ—¶é—´ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸å¦‚å­˜å‚¨ä¸€ä¸ª <code>userId</code>ï¼Œå¹¶å¦å¤–æŠŠ id å’Œ æ˜µç§° çš„å¯¹åº”å…³ç³»å­˜åœ¨å¦ä¸€ä¸ªå« <code>poster_users</code> çš„ collection é‡Œã€‚</p>\n<pre class=\"prettyprint language-json\"><code>{\n  &quot;userId&quot;: &quot;xxx&quot;,\n  &quot;name&quot;: &quot;Tester&quot;,\n  ...ï¼ˆå…¶ä»–ç”¨æˆ·ä¿¡æ¯ï¼‰\n}\n</code></pre><p><code>userId</code> ä»å“ªé‡Œæ‹¿å‘¢ï¼Ÿå½“ç„¶æ˜¯é€šè¿‡ä¹‹å‰å·²ç»æˆæƒçš„è·å–ç”¨æˆ·ä¿¡æ¯æ¥å£æ‹¿åˆ°äº†ï¼Œè¯¦ç»†æ“ä½œä¹‹åä¼šè¯´åˆ°ã€‚</p>\n<p>æ¥ä¸‹æ¥æ˜¯ <code>date</code>ï¼Œè¿™é‡Œæœ€å¥½æ˜¯æœåŠ¡å™¨æ—¶é—´ï¼ˆå› ä¸ºå®¢æˆ·ç«¯ä¼ è¿‡æ¥çš„æ—¶é—´å¯èƒ½ä¼šæœ‰è¯¯å·®ï¼‰ï¼Œè€Œäº‘å¼€å‘æ–‡æ¡£é‡Œä¹Ÿæœ‰æä¾›ç›¸åº”çš„æ¥å£ï¼š<a href=\"https://developers.weixin.qq.com/miniprogram/dev/wxcloud/reference-client-api/database/db.serverDate.html#db.serverDate\">serverDate</a>ã€‚è¿™ä¸ªæ•°æ®å¯ä»¥ç›´æ¥è¢« <code>new Date()</code> ä½¿ç”¨ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ä¸ª UTC æ—¶é—´ã€‚</p>\n<p><code>text</code> å³æ–‡æœ¬ä¿¡æ¯ï¼Œç›´æ¥å­˜å‚¨å³å¯ã€‚</p>\n<p><code>photo</code> åˆ™è¡¨ç¤ºé™„å›¾æ•°æ®ï¼Œä½†æ˜¯é™äºå°ç¨‹åº <code>image</code> å…ƒç´ çš„å®ç°ï¼Œæƒ³è¦æ˜¾ç¤ºä¸€å¼ å›¾ç‰‡ï¼Œè¦ä¹ˆæä¾›è¯¥å›¾ç‰‡çš„ urlï¼Œè¦ä¹ˆæä¾›è¯¥å›¾ç‰‡åœ¨ <a href=\"https://developers.weixin.qq.com/miniprogram/dev/wxcloud/basis/capabilities.html#%E5%AD%98%E5%82%A8\">äº‘å­˜å‚¨</a> çš„ idï¼Œæ‰€ä»¥è¿™é‡Œæœ€ä½³çš„å®è·µæ˜¯ï¼šå…ˆæŠŠå›¾ç‰‡ä¸Šä¼ åˆ°äº‘å­˜å‚¨é‡Œï¼Œç„¶åæŠŠå›è°ƒé‡Œçš„æ–‡ä»¶ id ä½œä¸ºæ•°æ®å­˜å‚¨ã€‚</p>\n<p>ç»¼ä¸Šæ‰€è¿°ï¼Œæœ€å <code>poster</code> æ¯ä¸€é¡¹çš„æ•°æ®ç»“æ„å¦‚ä¸‹ï¼š</p>\n<pre class=\"prettyprint language-json\"><code>{\n  &quot;authorId&quot;: &quot;xxx&quot;,\n  &quot;date&quot;: &quot;utc-format-date&quot;,\n  &quot;text&quot;: &quot;Ceshiwenben&quot;,\n  &quot;photoId&quot;: &quot;yyy&quot;\n}\n</code></pre><p>ç¡®å®šæ•°æ®ç»“æ„åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹å¾€ collection æ·»åŠ æ•°æ®äº†ã€‚ä½†æ˜¯ï¼Œåœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜ç¼ºå°‘ä¸€ä¸ªé‡è¦æ­¥éª¤ã€‚</p>\n<h4>3.3 ç”¨æˆ·ä¿¡æ¯å½•å…¥ ä¸ äº‘æ•°æ®åº“</h4>\n<p>æ²¡é”™ï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰åœ¨ <code>poster_users</code> é‡Œæ·»åŠ ä¸€æ¡æ–°ç”¨æˆ·çš„ä¿¡æ¯ã€‚è¿™ä¸ªæ­¥éª¤ä¸€èˆ¬åœ¨ <code>pages/circle/circle</code> é¡µé¢é¦–æ¬¡åŠ è½½æ—¶åˆ¤æ–­å³å¯ï¼š</p>\n<pre class=\"prettyprint language-js\"><code>getUserId: function(cb) {\n  let that = this\n  var value = this.data.userId || wx.getStorageSync(&quot;userId&quot;)\n  if (value) {\n    if (cb) {\n      cb(value)\n    }\n    return value\n  }\n  wx.getSetting({\n    success(res) {\n      if (res.authSetting[&quot;scope.userInfo&quot;]) {\n        wx.getUserInfo({\n          withCredentials: true,\n          success: function(userData) {\n            wx.setStorageSync(&quot;userId&quot;, userData.signature)\n            that.setData({\n              userId: userData.signature\n            })\n            db.collection(&quot;poster_users&quot;)\n              .where({\n                userId: userData.signature\n              })\n              .get()\n              .then(searchResult =&gt; {\n                if (searchResult.data.length === 0) {\n                  wx.showToast({\n                    title: &quot;æ–°ç”¨æˆ·å½•å…¥ä¸­&quot;\n                  })\n                  db.collection(&quot;poster_users&quot;)\n                    .add({\n                      data: {\n                        userId: userData.signature,\n                        date: db.serverDate(),\n                        name: userData.userInfo.nickName,\n                        gender: userData.userInfo.gender\n                      }\n                    })\n                    .then(res =&gt; {\n                      console.log(res)\n                      if (res.errMsg === &quot;collection.add:ok&quot;) {\n                        wx.showToast({\n                          title: &quot;å½•å…¥å®Œæˆ&quot;\n                        })\n                        if (cb) cb()\n                      }\n                    })\n                    .catch(err =&gt; {\n                      wx.showToast({\n                        title: &quot;å½•å…¥å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•&quot;,\n                        image: &quot;&#x2F;images&#x2F;error.png&quot;\n                      })\n                      wx.navigateTo({\n                        url: &quot;&#x2F;pages&#x2F;index&#x2F;index&quot;\n                      })\n                    })\n                } else {\n                  if (cb) cb()\n                }\n              })\n          }\n        })\n      } else {\n        wx.showToast({\n          title: &quot;ç™»é™†å¤±æ•ˆï¼Œè¯·é‡æ–°æˆæƒç™»é™†&quot;,\n          image: &quot;&#x2F;images&#x2F;error.png&quot;\n        })\n        wx.navigateTo({\n          url: &quot;&#x2F;pages&#x2F;index&#x2F;index&quot;\n        })\n      }\n    }\n  })\n}\n</code></pre><p>ä»£ç å®ç°æ¯”è¾ƒå¤æ‚ï¼Œæ•´ä½“æ€è·¯æ˜¯è¿™æ ·çš„ï¼š</p>\n<ol>\n<li>åˆ¤æ–­æ˜¯å¦å·²å­˜å‚¨äº† <code>userId</code>ï¼Œå¦‚æœæœ‰ç›´æ¥è¿”å›å¹¶è°ƒç”¨å›è°ƒå‡½æ•°ï¼Œå¦‚æœæ²¡æœ‰ç»§ç»­ 2</li>\n<li>é€šè¿‡ <code>wx.getSetting</code> è·å–å½“å‰è®¾ç½®ä¿¡æ¯</li>\n<li>å¦‚æœè¿”å›é‡Œæœ‰ <code>res.authSetting[&quot;scope.userInfo&quot;]</code> è¯´æ˜å·²ç»æˆæƒè¯»å–ç”¨æˆ·ä¿¡æ¯ï¼Œç»§ç»­ 3ï¼Œæ²¡æœ‰æˆæƒçš„è¯å°±è·³è½¬å›é¦–é¡µé‡æ–°æˆæƒ</li>\n<li>è°ƒç”¨ <code>wx.getUserInfo</code> è·å–ç”¨æˆ·ä¿¡æ¯ï¼ŒæˆåŠŸåæå–å‡º <code>signature</code>ï¼ˆè¿™æ˜¯æ¯ä¸ªå¾®ä¿¡ç”¨æˆ·çš„å”¯ä¸€ç­¾åï¼‰ï¼Œå¹¶è°ƒç”¨ <code>wx.setStorageSync</code> å°†å…¶ç¼“å­˜</li>\n<li>è°ƒç”¨ <code>db.collection().where().get()</code> ï¼Œåˆ¤æ–­è¿”å›çš„æ•°æ®æ˜¯å¦æ˜¯ç©ºæ•°ç»„ï¼Œå¦‚æœä¸æ˜¯è¯´æ˜è¯¥ç”¨æˆ·å·²ç»å½•å…¥ï¼ˆæ³¨æ„ <code>where()</code> ä¸­çš„ç­›é€‰æ¡ä»¶ï¼‰ï¼Œå¦‚æœæ˜¯è¯´æ˜è¯¥ç”¨æˆ·æ˜¯æ–°ç”¨æˆ·ï¼Œç»§ç»­ 5</li>\n<li>æç¤ºæ–°ç”¨æˆ·å½•å…¥ä¸­ï¼ŒåŒæ—¶è°ƒç”¨ <code>db.collection().add()</code> æ¥æ·»åŠ ç”¨æˆ·ä¿¡æ¯ï¼Œæœ€åé€šè¿‡å›è°ƒåˆ¤æ–­æ˜¯å¦å½•å…¥æˆåŠŸï¼Œå¹¶æç¤ºç”¨æˆ·</li>\n</ol>\n<p>ä¸çŸ¥ä¸è§‰æˆ‘ä»¬å°±ä½¿ç”¨äº†äº‘å¼€å‘ä¸­çš„ äº‘æ•°æ®åº“ åŠŸèƒ½ï¼Œç´§æ¥ç€æˆ‘ä»¬å°±è¦å¼€å§‹ä½¿ç”¨ äº‘å­˜å‚¨ å’Œ äº‘å‡½æ•°äº†ï¼</p>\n<h4>3.4 addPoster ä¸ äº‘å­˜å‚¨</h4>\n<p>å‘é€æ–°çš„è¿·ä½ å¾®åšï¼Œéœ€è¦ä¸€ä¸ªç¼–è¾‘æ–°è¿·ä½ å¾®åšçš„ç•Œé¢ï¼Œè·¯å¾„æˆ‘å®šä¸º <code>pages/circle/add-poster/add-poster</code>ï¼š</p>\n<pre class=\"prettyprint language-html\"><code>&lt;view class=&quot;app-poster-container&quot;&gt;\n  &lt;view class=&quot;body&quot;&gt;\n    &lt;view class=&quot;text-area-wrapper&quot;&gt;\n      &lt;textarea bindinput=&quot;bindTextInput&quot; placeholder=&quot;åœ¨æ­¤å¡«å†™&quot; value=&quot;{{text}}&quot; auto-focus=&quot;true&quot; &#x2F;&gt;\n      &lt;view class=&quot;text-area-footer&quot;&gt;\n        &lt;text&gt;{{remainLen}}&#x2F;140&lt;&#x2F;text&gt;\n      &lt;&#x2F;view&gt;\n    &lt;&#x2F;view&gt;\n    &lt;view bindtap=&quot;onImageTap&quot; class=&quot;image-area&quot;&gt;\n      &lt;view class=&quot;image-outer&quot;&gt;\n        &lt;image-wrapper is=&quot;image-wrapper&quot; src=&quot;{{imageSrc}}&quot; placeholder=&quot;é€‰æ‹©å›¾ç‰‡ä¸Šä¼ &quot; &#x2F;&gt;\n      &lt;&#x2F;view&gt;\n    &lt;&#x2F;view&gt;\n  &lt;&#x2F;view&gt;\n  &lt;view class=&quot;footer&quot;&gt;\n    &lt;button class=&quot;footer-btn&quot; bindtap=&quot;onSendTap&quot;&gt;å‘é€&lt;&#x2F;button&gt;\n  &lt;&#x2F;view&gt;\n&lt;&#x2F;view&gt;\n</code></pre><p>wxml çš„ä»£ç å¾ˆå¥½ç†è§£ï¼š<code>textarea</code> æ˜¾ç¤ºç¼–è¾‘æ–‡æœ¬ï¼Œ<code>image-wrapper</code> æ˜¾ç¤ºéœ€è¦ä¸Šä¼ çš„å›¾ç‰‡ï¼Œæœ€ä¸‹é¢æ˜¯ä¸€ä¸ªå‘é€çš„ <code>button</code>ã€‚å…¶ä¸­ï¼Œå›¾ç‰‡ç¼–è¾‘åŒºåŸŸçš„ <code>bindtap</code> äº‹ä»¶å®ç°ï¼š</p>\n<pre class=\"prettyprint language-js\"><code>onImageTap: function() {\n  let that = this\n  wx.chooseImage({\n    count: 1,\n    success: function(res) {\n      const tempFilePaths = res.tempFilePaths\n      that.setData({\n        imageSrc: tempFilePaths[0]\n      })\n    }\n  })\n}\n</code></pre><p>ç›´æ¥é€šè¿‡ <code>wx.chooseImage</code> å®˜æ–¹ API è·å–æœ¬åœ°å›¾ç‰‡çš„ä¸´æ—¶è·¯å¾„å³å¯ã€‚è€Œå½“å‘é€æŒ‰é’®ç‚¹å‡»åï¼Œä¼šæœ‰å¦‚ä¸‹ä»£ç è¢«æ‰§è¡Œï¼š</p>\n<pre class=\"prettyprint language-js\"><code>onSendTap: function() {\n  if (this.data.text === &quot;&quot; &amp;&amp; this.data.imageSrc === &quot;&quot;) {\n    wx.showModal({\n      title: &quot;é”™è¯¯&quot;,\n      content: &quot;ä¸èƒ½å‘é€ç©ºå†…å®¹&quot;,\n      showCancel: false,\n      confirmText: &quot;å¥½çš„&quot;\n    })\n    return\n  }\n  const that = this\n  wx.showLoading({\n    title: &quot;å‘é€ä¸­&quot;,\n    mask: true\n  })\n  const imageSrc = this.data.imageSrc\n  if (imageSrc !== &quot;&quot;) {\n    const finalPath = imageSrc.replace(&quot;&#x2F;&#x2F;&quot;, &quot;&#x2F;&quot;).replace(&quot;:&quot;, &quot;&quot;)\n    wx.cloud\n      .uploadFile({\n        cloudPath: finalPath,\n        filePath: imageSrc &#x2F;&#x2F; æ–‡ä»¶è·¯å¾„\n      })\n      .then(res =&gt; {\n        that.sendToDb(res.fileID)\n      })\n      .catch(error =&gt; {\n        that.onSendFail()\n      })\n  } else {\n    that.sendToDb()\n  }\n},\nsendToDb: function(fileId = &quot;&quot;) {\n  const that = this\n  const posterData = {\n    authorId: that.data.userId,\n    msg: that.data.text,\n    photoId: fileId,\n    date: db.serverDate()\n  }\n  db.collection(&quot;poster&quot;)\n    .add({\n      data: {\n        ...posterData\n      }\n    })\n    .then(res =&gt; {\n      wx.showToast({\n        title: &quot;å‘é€æˆåŠŸ&quot;\n      })\n      wx.navigateBack({\n        delta: 1\n      })\n    })\n    .catch(error =&gt; {\n      that.onSendFail()\n    })\n    .finally(wx.hideLoading())\n}\n</code></pre><ol>\n<li>é¦–å…ˆåˆ¤æ–­æ–‡æœ¬å’Œå›¾ç‰‡å†…å®¹æ˜¯å¦éƒ½ä¸ºç©ºï¼Œå¦‚æœæ˜¯åˆ™ä¸æ‰§è¡Œå‘é€ï¼Œå¦‚æœä¸æ˜¯ç»§ç»­ 2</li>\n<li>æç¤ºå‘é€ä¸­ï¼Œä¸Šä¼ å›¾ç‰‡åˆ°äº‘å­˜å‚¨ï¼Œæ³¨æ„éœ€è¦å°†å›¾ç‰‡ä¸­çš„ä¸´æ—¶ url çš„ä¸€äº›ç‰¹æ®Šå­—ç¬¦ç»„åˆæ›¿æ¢ä¸€ä¸‹ï¼ŒåŸå› è§ <a href=\"https://developers.weixin.qq.com/miniprogram/dev/wxcloud/guide/storage/naming.html\">æ–‡ä»¶åå‘½åé™åˆ¶</a></li>\n<li>ä¸Šä¼ æˆåŠŸåï¼Œè°ƒç”¨ <code>db.collection().add()</code>ï¼Œå‘é€æˆåŠŸåé€€å›ä¸Šä¸€é¡µï¼ˆå³é¦–é¡µï¼‰ï¼Œå¦‚æœå¤±è´¥åˆ™æ‰§è¡Œ <code>onSendFail</code> å‡½æ•°ï¼Œåè€…è§æºç ï¼Œé€»è¾‘è¾ƒç®€å•è¿™é‡Œä¸èµ˜è¿°</li>\n</ol>\n<p>äºæ˜¯ï¼Œæˆ‘ä»¬å°±è¿™æ ·åˆ›å»ºäº†ç¬¬ä¸€æ¡è¿·ä½ å¾®åšã€‚æ¥ä¸‹æ¥å°±è®©å®ƒåœ¨ Feed æµä¸­æ˜¾ç¤ºå§ï¼</p>\n<h4>3.5 äº‘å‡½æ•° getMainPageData</h4>\n<p>è¿™ä¸ªå‡½æ•°çš„ä¸»è¦ä½œç”¨å¦‚å‰æ‰€è¿°ï¼Œå°±æ˜¯é€šè¿‡å¤„ç†äº‘æ•°æ®åº“ä¸­çš„æ•°æ®ï¼Œå°†æœ€ç»ˆæ•°æ®è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œåè€…å°†æ•°æ®å¯è§†åŒ–ç»™ç”¨æˆ·ã€‚æˆ‘ä»¬å…ˆåšä¸€ä¸ªåˆæ­¥ç‰ˆæœ¬ï¼Œå› ä¸ºç°åœ¨ <code>poster_users</code> ä¸­åªæœ‰ä¸€æ¡æ•°æ®ï¼Œæ‰€ä»¥ä»…å…ˆå±•ç¤ºè‡ªå·±çš„è¿·ä½ å¾®åšã€‚<code>getMainPageData</code> äº‘å‡½æ•°ä»£ç å¦‚ä¸‹ï¼š</p>\n<pre class=\"prettyprint language-js\"><code>&#x2F;&#x2F; äº‘å‡½æ•°å…¥å£æ–‡ä»¶\nconst cloud = require(&quot;wx-server-sdk&quot;)\ncloud.init()\nconst db = cloud.database()\n\n&#x2F;&#x2F; äº‘å‡½æ•°å…¥å£å‡½æ•°\nexports.main = async (event, context, cb) =&gt; {\n  &#x2F;&#x2F; é€šè¿‡ event è·å–å…¥å‚\n  const userId = event.userId\n  let followingResult\n  let users\n  &#x2F;&#x2F; idNameMap è´Ÿè´£å­˜å‚¨ userId å’Œ name çš„æ˜ å°„å…³ç³»\n  let idNameMap = {}\n  let followingIds = []\n  &#x2F;&#x2F; è·å–ç”¨æˆ·ä¿¡æ¯\n  followingResult = await db\n      .collection(&quot;poster_users&quot;)\n      .where({\n        userId: userId\n      })\n      .get()\n    users = followingResult.data\n    followingIds = users.map(u =&gt; {\n      return u.userId\n    })\n  users.map(u =&gt; {\n    idNameMap[u.userId] = u.name\n  })\n  &#x2F;&#x2F; è·å–åŠ¨æ€\n  const postResult = await db\n    .collection(&quot;poster&quot;)\n    .orderBy(&quot;date&quot;, &quot;desc&quot;)\n    .where({\n      &#x2F;&#x2F; é€šè¿‡é«˜çº§ç­›é€‰åŠŸèƒ½ç­›é€‰å‡ºç¬¦åˆæ¡ä»¶çš„ userId\n      authorId: db.command.in(followingIds)\n    })\n    .get()\n  const postData = postResult.data\n  &#x2F;&#x2F; å‘è¿”å›çš„æ•°æ®æ·»åŠ  å­˜å‚¨ç”¨æˆ·æ˜µç§°çš„ author å±æ€§ã€å­˜å‚¨æ ¼å¼åŒ–åçš„æ—¶é—´çš„ formatDate å±æ€§\n  postData.map(p =&gt; {\n    p.author = idNameMap[p.authorId]\n    p.formatDate = new Date(p.date).toLocaleDateString(&quot;zh-Hans&quot;, options)\n  })\n  return postData\n}\n</code></pre><p>æœ€ååœ¨ <code>pages/circle/circle.js</code> é‡Œè¡¥å……äº‘è°ƒç”¨ï¼š</p>\n<pre class=\"prettyprint language-js\"><code>getMainPageData: function(userId) {\n  const that = this\n  wx.cloud\n    .callFunction({\n      name: &quot;getMainPageData&quot;,\n      data: {\n        userId: userId,\n        isEveryOne: that.data.groupArrayIndex === 0 ? false : true\n      }\n    })\n    .then(res =&gt; {\n      that.setData({\n        pageMainData: res.result,\n        pageMainLoaded: true\n      })\n    })\n    .catch(err =&gt; {\n      wx.showToast({\n        title: &quot;è·å–åŠ¨æ€å¤±è´¥&quot;,\n        image: &quot;&#x2F;images&#x2F;error.png&quot;\n      })\n      wx.hideLoading()\n    })\n}\n</code></pre><p>å³å¯å±•ç¤º Feed æµæ•°æ®ç»™ç”¨æˆ·ã€‚</p>\n<p>ä¹‹åï¼Œ<code>getMainPageData</code> è¿˜ä¼šæ ¹æ®ä½¿ç”¨åœºæ™¯çš„ä¸åŒï¼Œæ–°å¢äº†æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·åŠ¨æ€ã€æŸ¥è¯¢å…³æ³¨ç”¨æˆ·åŠ¨æ€çš„åŠŸèƒ½ï¼Œä½†æ˜¯åŸç†æ˜¯ä¸€æ ·çš„ï¼Œçœ‹æºç å¯ä»¥è½»æ˜“ç†è§£ï¼Œåç»­å°±ä¸å†è¯´æ˜ã€‚</p>\n<h3>4. å…³æ³¨ç³»ç»Ÿ</h3>\n<p>ä¸Šä¸€èŠ‚ä¸­æˆ‘ä»¬ä¸€å£æ°”æŠŠäº‘å¼€å‘ä¸­çš„å¤§éƒ¨åˆ†ä¸»è¦åŠŸèƒ½ï¼šäº‘æ•°æ®åº“ã€äº‘å­˜å‚¨ã€äº‘å‡½æ•°ã€äº‘è°ƒç”¨éƒ½ç”¨äº†ä¸€éï¼Œæ¥ä¸‹æ¥å…¶ä»–åŠŸèƒ½çš„å®ç°ä¹ŸåŸºæœ¬éƒ½ä¾èµ–å®ƒä»¬ã€‚</p>\n<h4>4.1 poster_user_follows</h4>\n<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦å»ºä¸€ä¸ªæ–°çš„ collection <code>poster_user_follows</code>ï¼Œå…¶ä¸­çš„æ¯ä¸€é¡¹æ•°æ®çš„æ•°æ®ç»“æ„å¦‚ä¸‹ï¼š</p>\n<pre class=\"prettyprint language-json\"><code>{\n  &quot;followerId&quot;: &quot;xxx&quot;,\n  &quot;followingId&quot;: &quot;xxx&quot;\n}\n</code></pre><p>å¾ˆç®€å•ï¼Œ<code>followerId</code> è¡¨ç¤ºå…³æ³¨äººï¼Œ<code>followingId</code> è¡¨ç¤ºè¢«å…³æ³¨äººã€‚</p>\n<h4>4.2 user-data é¡µé¢</h4>\n<p>å…³æ³¨æˆ–è€…å–æ¶ˆå…³æ³¨éœ€è¦è¿›å…¥ä»–äººçš„ä¸ªäººä¸»é¡µæ“ä½œï¼Œæˆ‘ä»¬åœ¨ <code>pages/circle/user-data/user-data.wxml</code> ä¸­æ”¾ä¸€ä¸ª <code>user-info</code> çš„è‡ªå®šä¹‰ç»„ä»¶ï¼Œç„¶åæ–°å»ºè¯¥ç»„ä»¶ç¼–è¾‘ï¼š</p>\n<pre class=\"prettyprint language-html\"><code>&lt;view class=&quot;user-info&quot;&gt;\n  &lt;view class=&quot;info-item&quot; hover-class=&quot;info-item-hover&quot;&gt;ç”¨æˆ·å: {{userName}}&lt;&#x2F;view&gt;\n  &lt;view class=&quot;info-item&quot; hover-class=&quot;info-item-hover&quot; bindtap=&quot;onPosterCountTap&quot;&gt;åŠ¨æ€æ•°: {{posterCount}}&lt;&#x2F;view&gt;\n  &lt;view class=&quot;info-item&quot; hover-class=&quot;info-item-hover&quot; bindtap=&quot;onFollowingCountTap&quot;&gt;å…³æ³¨æ•°: {{followingCount}}&lt;&#x2F;view&gt;\n  &lt;view class=&quot;info-item&quot; hover-class=&quot;info-item-hover&quot; bindtap=&quot;onFollowerCountTap&quot;&gt;ç²‰ä¸æ•°: {{followerCount}}&lt;&#x2F;view&gt;\n  &lt;view class=&quot;info-item&quot; hover-class=&quot;info-item-hover&quot; wx:if=&quot;{{originId &amp;&amp; originId !== &#x27;&#x27; &amp;&amp; originId !== userId}}&quot;&gt;&lt;button bindtap=&quot;onFollowTap&quot;&gt;{{followText}}&lt;&#x2F;button&gt;&lt;&#x2F;view&gt;\n&lt;&#x2F;view&gt;\n</code></pre><p>è¿™é‡Œæ³¨æ„æ¡ä»¶æ¸²æŸ“çš„ <code>button</code>ï¼šå¦‚æœå½“å‰è®¿é—®ä¸ªäººä¸»é¡µçš„ç”¨æˆ· id ï¼ˆoriginIdï¼‰ å’Œ è¢«è®¿é—®çš„ç”¨æˆ· id ï¼ˆuserIdï¼‰çš„å€¼æ˜¯ç›¸ç­‰çš„è¯ï¼Œè¿™ä¸ªæŒ‰é’®å°±ä¸ä¼šè¢«æ¸²æŸ“ï¼ˆè‡ªå·±ä¸èƒ½å…³æ³¨/å–æ¶ˆå…³æ³¨è‡ªå·±ï¼‰ã€‚</p>\n<p>æˆ‘ä»¬é‡ç‚¹çœ‹ä¸‹ <code>onFollowTap</code> çš„å®ç°ï¼š</p>\n<pre class=\"prettyprint language-js\"><code>onFollowTap: function() {\n  const that = this\n  &#x2F;&#x2F; åˆ¤æ–­å½“å‰å…³æ³¨çŠ¶æ€\n  if (this.data.isFollow) {\n    wx.showLoading({\n      title: &quot;æ“ä½œä¸­&quot;,\n      mask: true\n    })\n    wx.cloud\n      .callFunction({\n        name: &quot;cancelFollowing&quot;,\n        data: {\n          followerId: this.properties.originId,\n          followingId: this.properties.userId\n        }\n      })\n      .then(res =&gt; {\n        wx.showToast({\n          title: &quot;å–æ¶ˆå…³æ³¨æˆåŠŸ&quot;\n        })\n        that.setData({\n          isFollow: false,\n          followText: &quot;å…³æ³¨&quot;\n        })\n      })\n      .catch(error =&gt; {\n        wx.showToast({\n          title: &quot;å–æ¶ˆå…³æ³¨å¤±è´¥&quot;,\n          image: &quot;&#x2F;images&#x2F;error.png&quot;\n        })\n      })\n      .finally(wx.hideLoading())\n  } else if (this.data.isFollow !== undefined) {\n    wx.showLoading({\n      title: &quot;æ“ä½œä¸­&quot;,\n      mask: true\n    })\n    const data = {\n      followerId: this.properties.originId,\n      followingId: this.properties.userId\n    }\n    db.collection(&quot;poster_user_follows&quot;)\n      .add({\n        data: {\n          ...data\n        }\n      })\n      .then(res =&gt; {\n        wx.showToast({\n          title: &quot;å…³æ³¨æˆåŠŸ&quot;\n        })\n        that.setData({\n          isFollow: true,\n          followText: &quot;å–æ¶ˆå…³æ³¨&quot;\n        })\n      })\n      .catch(error =&gt; {\n        wx.showToast({\n          title: &quot;å…³æ³¨å¤±è´¥&quot;,\n          image: &quot;&#x2F;images&#x2F;error.png&quot;\n        })\n      })\n      .finally(wx.hideLoading())\n    }\n  }\n}\n</code></pre><p>è¿™é‡Œè¯»è€…å¯èƒ½ä¼šæœ‰ç–‘é—®ï¼šä¸ºä»€ä¹ˆå…³æ³¨çš„æ—¶å€™ç›´æ¥è°ƒç”¨ <code>db.collection().add()</code> å³å¯ï¼Œè€Œå–æ¶ˆå…³æ³¨å´è¦è°ƒç”¨äº‘å‡½æ•°å‘¢ï¼Ÿè¿™é‡Œæ¶‰åŠåˆ°äº‘æ•°æ®åº“çš„è®¾è®¡é—®é¢˜ï¼šåˆ é™¤å¤šä¸ªæ•°æ®çš„æ“ä½œï¼Œæˆ–è€…è¯´åˆ é™¤ä½¿ç”¨ <code>where</code> ç­›é€‰çš„æ•°æ®ï¼Œåªèƒ½åœ¨æœåŠ¡ç«¯æ‰§è¡Œã€‚å¦‚æœç¡®å®æƒ³åœ¨å®¢æˆ·ç«¯åˆ é™¤ï¼Œåˆ™åœ¨æŸ¥è¯¢ç”¨æˆ·å…³ç³»æ—¶ï¼Œå°†å”¯ä¸€æ ‡è¯†æ•°æ®çš„ <code>_id</code> ç”¨ <code>setData</code> å­˜ä¸‹æ¥ï¼Œä¹‹åå†ä½¿ç”¨ <code>db.collection().doc(_id).delete()</code> åˆ é™¤å³å¯ã€‚è¿™ä¸¤ç§å®ç°æ–¹å¼è¯»è€…å¯è‡ªè¡Œé€‰æ‹©ã€‚å½“ç„¶ï¼Œè¿˜æœ‰ä¸€ç§å®ç°æ˜¯ä¸å®é™…åˆ é™¤æ•°æ®ï¼Œåªæ˜¯åŠ ä¸ª <code>isDelete</code> å­—æ®µæ ‡è®°ä¸€ä¸‹ã€‚</p>\n<p>æŸ¥è¯¢ç”¨æˆ·å…³ç³»çš„å®ç°å¾ˆç®€å•ï¼Œäº‘å‡½æ•°çš„å®ç°æ–¹å¼å¦‚ä¸‹ï¼š</p>\n<pre class=\"prettyprint language-js\"><code>&#x2F;&#x2F; äº‘å‡½æ•°å…¥å£æ–‡ä»¶\nconst cloud = require(&#x27;wx-server-sdk&#x27;)\ncloud.init()\nconst db = cloud.database()\n\n&#x2F;&#x2F; äº‘å‡½æ•°å…¥å£å‡½æ•°\nexports.main = async(event, context) =&gt; {\n  const followingResult = await db.collection(&quot;poster_user_follows&quot;)\n    .where({\n      followingId: event.followingId,\n      followerId: event.followerId\n    }).get()\n  return followingResult\n}\n</code></pre><p>å®¢æˆ·ç«¯åªè¦æ£€æŸ¥è¿”å›çš„æ•°æ®é•¿åº¦æ˜¯å¦å¤§äº 0 å³å¯ã€‚</p>\n<p>å¦å¤–é™„ä¸Š <code>user-data</code> é¡µé¢å…¶ä»–æ•°æ®çš„è·å–äº‘å‡½æ•°å®ç°ï¼š</p>\n<pre class=\"prettyprint language-js\"><code>&#x2F;&#x2F; äº‘å‡½æ•°å…¥å£æ–‡ä»¶\nconst cloud = require(&quot;wx-server-sdk&quot;)\ncloud.init()\nconst db = cloud.database()\n\nasync function getPosterCount(userId) {\n  return {\n    value: (await db.collection(&quot;poster&quot;).where({\n      authorId: userId\n    }).count()).total,\n    key: &quot;posterCount&quot;\n  }\n}\n\nasync function getFollowingCount(userId) {\n  return {\n    value: (await db.collection(&quot;poster_user_follows&quot;).where({\n      followerId: userId\n    }).count()).total,\n    key: &quot;followingCount&quot;\n  }\n}\n\nasync function getFollowerCount(userId) {\n  return {\n    value: (await db.collection(&quot;poster_user_follows&quot;).where({\n      followingId: userId\n    }).count()).total,\n    key: &quot;followerCount&quot;\n  }\n}\n\n\nasync function getUserName(userId) {\n  return {\n    value: (await db.collection(&quot;poster_users&quot;).where({\n      userId: userId\n    }).get()).data[0].name,\n    key: &quot;userName&quot;\n  }\n}\n\n&#x2F;&#x2F; äº‘å‡½æ•°å…¥å£å‡½æ•°\nexports.main = async (event, context) =&gt; {\n  const userId = event.userId\n  const tasks = []\n  tasks.push(getPosterCount(userId))\n  tasks.push(getFollowerCount(userId))\n  tasks.push(getFollowingCount(userId))\n  tasks.push(getUserName(userId))\n  const allData = await Promise.all(tasks)\n  const finalData = {}\n  allData.map(d =&gt; {\n    finalData[d.key] = d.value\n  })\n  return finalData\n}\n</code></pre><p>å¾ˆå¥½ç†è§£ï¼Œå®¢æˆ·ç«¯è·å–è¿”å›åç›´æ¥ä½¿ç”¨å³å¯ã€‚</p>\n<h3>5. æœç´¢é¡µé¢</h3>\n<p>è¿™éƒ¨åˆ†å…¶å®å¾ˆå¥½å®ç°ã€‚å…³é”®çš„æœç´¢å‡½æ•°å®ç°å¦‚ä¸‹ï¼š</p>\n<pre class=\"prettyprint language-js\"><code>&#x2F;&#x2F; äº‘å‡½æ•°å…¥å£æ–‡ä»¶\nconst cloud = require(&#x27;wx-server-sdk&#x27;)\ncloud.init()\nconst db = cloud.database()\n\nconst MAX_LIMIT = 100\nasync function getDbData(dbName, whereObj) {\n  const totalCountsData = await db.collection(dbName).where(whereObj).count()\n  const total = totalCountsData.total\n  const batch = Math.ceil(total &#x2F; 100)\n  const tasks = []\n  for (let i = 0; i &lt; batch; i++) {\n    const promise = db\n      .collection(dbName)\n      .where(whereObj)\n      .skip(i * MAX_LIMIT)\n      .limit(MAX_LIMIT)\n      .get()\n    tasks.push(promise)\n  }\n  const rrr = await Promise.all(tasks)\n  if (rrr.length !== 0) {\n    return rrr.reduce((acc, cur) =&gt; {\n      return {\n        data: acc.data.concat(cur.data),\n        errMsg: acc.errMsg\n      }\n    })\n  } else {\n    return {\n      data: [],\n      errMsg: &quot;empty&quot;\n    }\n  }\n}\n\n&#x2F;&#x2F; äº‘å‡½æ•°å…¥å£å‡½æ•°\nexports.main = async (event, context) =&gt; {\n  const text = event.text\n  const data = await getDbData(&quot;poster_users&quot;, {\n    name: {\n      $regex: text\n    }\n  })\n  return data\n}\n</code></pre><p>è¿™é‡Œå‚è€ƒäº†å®˜ç½‘æ‰€æ¨èçš„åˆ†é¡µæ£€ç´¢æ•°æ®åº“æ•°æ®çš„å®ç°ï¼ˆå› ä¸ºæœç´¢ç»“æœå¯èƒ½æœ‰å¾ˆå¤šï¼‰ï¼Œç­›é€‰æ¡ä»¶åˆ™æ˜¯æ­£åˆ™æ¨¡ç³ŠåŒ¹é…å…³é”®å­—ã€‚</p>\n<p>æœç´¢é¡µé¢çš„æºç è·¯å¾„æ˜¯ <code>pages/circle/search-user/search-user</code>ï¼Œå®ç°äº†ç‚¹å‡»æœç´¢ç»“æœé¡¹è·³è½¬åˆ°å¯¹åº”é¡¹çš„ç”¨æˆ·çš„ <code>user-data</code> é¡µé¢ï¼Œå»ºè®®ç›´æ¥é˜…è¯»æºç ç†è§£ã€‚</p>\n<h3>6. å…¶ä»–æ‰©å±•</h3>\n<h4>6.1 poster_likes ä¸ ç‚¹èµ</h4>\n<p>ç”±äºè½¬å‘ã€è¯„è®ºã€ç‚¹èµçš„åŸç†åŸºæœ¬ç›¸åŒï¼Œæ‰€ä»¥è¿™é‡Œåªä»‹ç»ç‚¹èµåŠŸèƒ½å¦‚ä½•ç¼–å†™ï¼Œå¦å¤–ä¸¤ä¸ªåŠŸèƒ½è¯»è€…å¯ä»¥è‡ªè¡Œå®ç°ã€‚</p>\n<p>æ¯«æ— ç–‘é—®æˆ‘ä»¬éœ€è¦æ–°å»ºä¸€ä¸ª collection <code>poster_likes</code>ï¼Œå…¶ä¸­æ¯ä¸€é¡¹çš„æ•°æ®ç»“æ„å¦‚ä¸‹ï¼š</p>\n<pre class=\"prettyprint language-json\"><code>{\n  &quot;posterId&quot;: &quot;xxx&quot;,\n  &quot;likeId&quot;: &quot;xxx&quot;\n}\n</code></pre><p>è¿™é‡Œçš„ <code>posterId</code> å°±æ˜¯ <code>poster</code> collection é‡Œæ¯æ¡è®°å½•çš„ <code>_id</code> å€¼ï¼Œ<code>likeId</code> å°±æ˜¯ <code>poster_users</code> é‡Œçš„ <code>userId</code> äº†ã€‚</p>\n<p>ç„¶åæˆ‘ä»¬æ‰©å±•ä¸€ä¸‹ <code>poster-item</code> çš„å®ç°ï¼š</p>\n<pre class=\"prettyprint language-html\"><code>&lt;view class=&quot;post-item&quot; hover-class=&quot;post-item-hover&quot; bindlongpress=&quot;onItemLongTap&quot; bindtap=&quot;onItemTap&quot;&gt;\n  ...\n  &lt;view class=&quot;interact-area&quot;&gt;\n    &lt;view class=&quot;interact-item&quot;&gt;\n      &lt;button class=&quot;interact-btn&quot; catchtap=&quot;onLikeTap&quot; style=&quot;color:{{liked ? &#x27;#55aaff&#x27; : &#x27;#000&#x27;}}&quot;&gt;èµ {{likeCount}}&lt;&#x2F;button&gt;\n    &lt;&#x2F;view&gt;\n  &lt;&#x2F;view&gt;\n&lt;&#x2F;view&gt;\n</code></pre><p>å³ï¼Œæ–°å¢ä¸€ä¸ª <code>interact-area</code>ï¼Œå…¶ä¸­ <code>onLikeTap</code> å®ç°å¦‚ä¸‹ï¼š</p>\n<pre class=\"prettyprint language-js\"><code>onLikeTap: function() {\n  if (!this.properties.originId) return\n  const that = this\n  if (this.data.liked) {\n    wx.showLoading({\n      title: &quot;æ“ä½œä¸­&quot;,\n      mask: true\n    })\n    wx.cloud\n      .callFunction({\n        name: &quot;cancelLiked&quot;,\n        data: {\n          posterId: this.properties.data._id,\n          likeId: this.properties.originId\n        }\n      })\n      .then(res =&gt; {\n        wx.showToast({\n          title: &quot;å–æ¶ˆæˆåŠŸ&quot;\n        })\n        that.refreshLike()\n        that.triggerEvent(&#x27;likeEvent&#x27;);\n      })\n      .catch(error =&gt; {\n        wx.showToast({\n          title: &quot;å–æ¶ˆå¤±è´¥&quot;,\n          image: &quot;&#x2F;images&#x2F;error.png&quot;\n        })\n      })\n      .finally(wx.hideLoading())\n  } else {\n    wx.showLoading({\n      title: &quot;æ“ä½œä¸­&quot;,\n      mask: true\n    })\n    db.collection(&quot;poster_likes&quot;).add({\n        data: {\n          posterId: this.properties.data._id,\n          likeId: this.properties.originId\n        }\n      }).then(res =&gt; {\n        wx.showToast({\n          title: &quot;å·²èµ&quot;\n        })\n        that.refreshLike()\n        that.triggerEvent(&#x27;likeEvent&#x27;);\n      })\n      .catch(error =&gt; {\n        wx.showToast({\n          title: &quot;èµå¤±è´¥&quot;,\n          image: &quot;&#x2F;images&#x2F;error.png&quot;\n        })\n      })\n      .finally(wx.hideLoading())\n  }\n\n}\n</code></pre><p>ç»†å¿ƒçš„è¯»è€…ä¼šå‘ç°è¿™å’Œå…³æ³¨åŠŸèƒ½åŸç†å‡ ä¹æ˜¯ä¸€æ ·çš„ã€‚</p>\n<h4>6.2 æ•°æ®åˆ·æ–°</h4>\n<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¾ˆå¤šæ–¹å¼è®©ä¸»é¡µé¢åˆ·æ–°æ•°æ®ï¼š</p>\n<pre class=\"prettyprint language-js\"><code>onShow: function() {\n  wx.showLoading({\n    title: &quot;åŠ è½½ä¸­&quot;,\n    mask: true\n  })\n  const that = this\n  function cb(userId) {\n    that.refreshMainPageData(userId)\n    that.refreshMePageData(userId)\n  }\n  this.getUserId(cb)\n}\n</code></pre><p>ç¬¬ä¸€ç§æ˜¯åˆ©ç”¨ <code>onShow</code> æ–¹æ³•ï¼šå®ƒä¼šåœ¨é¡µé¢æ¯æ¬¡ä»åå°è½¬åˆ°å‰å°å±•ç¤ºæ—¶è°ƒç”¨ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±èƒ½åˆ·æ–°é¡µé¢æ•°æ®ï¼ˆåŒ…æ‹¬ Feed æµå’Œä¸ªäººä¿¡æ¯ï¼‰ã€‚ä½†æ˜¯è¿™ä¸ªæ—¶å€™ç”¨æˆ·ä¿¡æ¯å¯èƒ½ä¼šä¸¢å¤±ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨ <code>getUserId</code> é‡Œåˆ¤æ–­ï¼Œå¹¶å°†åˆ·æ–°æ•°æ®çš„å‡½æ•°ä»¬æ•´åˆèµ·æ¥ï¼Œä½œä¸ºå›è°ƒå‡½æ•°ã€‚</p>\n<p>ç¬¬äºŒç§æ˜¯è®©ç”¨æˆ·æ‰‹åŠ¨åˆ·æ–°ï¼š</p>\n<pre class=\"prettyprint language-js\"><code>onPageMainTap: function() {\n  if (this.data.currentPage === &quot;main&quot;) {\n    this.refreshMainPageData()\n  }\n  this.setData({\n    currentPage: &quot;main&quot;\n  })\n}\n</code></pre><p>å¦‚å›¾æ‰€ç¤ºï¼Œå½“ç›®å‰é¡µé¢æ˜¯ Feed æµæ—¶ï¼Œå¦‚æœå†æ¬¡ç‚¹å‡» é¦–é¡µ Tabï¼Œå°±ä¼šå¼ºåˆ¶åˆ·æ–°æ•°æ®ã€‚</p>\n<p>ç¬¬ä¸‰ç§æ˜¯å…³è”æ•°æ®å˜æ›´è§¦å‘åˆ·æ–°ï¼Œæ¯”å¦‚åŠ¨æ€ç±»å‹é€‰æ‹©ã€åˆ é™¤äº†ä¸€æ¡åŠ¨æ€ä»¥åè§¦å‘æ•°æ®çš„åˆ·æ–°ã€‚è¿™ç§å¯ä»¥ç›´æ¥çœ‹æºç å­¦ä¹ ã€‚</p>\n<h4>6.3 é¦–æ¬¡åŠ è½½ç­‰å¾…</h4>\n<p>å½“ç”¨æˆ·ç¬¬ä¸€æ¬¡è¿›å…¥ä¸»é¡µé¢æ—¶ï¼Œæˆ‘ä»¬å¦‚æœæƒ³åœ¨ Feed æµå’Œä¸ªäººä¿¡æ¯éƒ½åŠ è½½å¥½äº†å†å…è®¸ç”¨æˆ·æ“ä½œï¼Œåº”è¯¥å¦‚ä½•å®ç°ï¼Ÿ</p>\n<p>å¦‚æœæ˜¯ç±»ä¼¼ Vue æˆ–è€… React çš„æ¡†æ¶ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å°±èƒ½æƒ³åˆ°å±æ€§ç›‘æ§ï¼Œå¦‚ <code>watch</code>ã€<code>useEffect</code> ç­‰ç­‰ï¼Œä½†æ˜¯å°ç¨‹åºç›®å‰ <code>Page</code> å¹¶æ²¡æœ‰æä¾›å±æ€§ç›‘æ§åŠŸèƒ½ï¼Œæ€ä¹ˆåŠï¼Ÿ</p>\n<p>é™¤äº†è‡ªå·±å®ç°ï¼Œè¿˜æœ‰ä¸€ä¸ªæ–¹æ³•å°±æ˜¯åˆ©ç”¨ <code>Component</code> çš„ <code>observers</code>ï¼Œå®ƒå’Œä¸Šé¢æåˆ°çš„å±æ€§ç›‘æ§åŠŸèƒ½å·®ä¸å¤šã€‚è™½ç„¶å®˜ç½‘æ–‡æ¡£å¯¹å…¶è¯´æ˜æ¯”è¾ƒå°‘ï¼Œä½†æ‘¸ç´¢äº†ä¸€ç•ªè¿˜æ˜¯èƒ½ç”¨æ¥ç›‘æ§çš„ã€‚</p>\n<p>é¦–å…ˆæˆ‘ä»¬æ¥æ–°å»ºä¸€ä¸ª <code>Component</code> å« <code>abstract-load</code>ï¼Œå…·ä½“å®ç°å¦‚ä¸‹ï¼š</p>\n<pre class=\"prettyprint language-js\"><code>&#x2F;&#x2F; pages&#x2F;circle&#x2F;component&#x2F;abstract-load.js\nComponent({\n  properties: {\n    pageMainLoaded: {\n      type: Boolean,\n      value: false\n    },\n    pageMeLoaded: {\n      type: Boolean,\n      value: false\n    }\n  },\n  observers: {\n    &quot;pageMainLoaded, pageMeLoaded&quot;: function (pageMainLoaded, pageMeLoaded) {\n      if (pageMainLoaded &amp;&amp; pageMeLoaded) {\n        this.triggerEvent(&quot;allLoadEvent&quot;)\n      }\n    }\n  }\n})\n</code></pre><p>ç„¶ååœ¨ <code>pages/circle/circle.wxml</code> ä¸­æ·»åŠ ä¸€è¡Œï¼š</p>\n<pre class=\"prettyprint language-html\"><code>&lt;abstract-load is=&quot;abstract-load&quot; pageMainLoaded=&quot;{{pageMainLoaded}}&quot; pageMeLoaded=&quot;{{pageMeLoaded}}&quot; bind:allLoadEvent=&quot;onAllLoad&quot; &#x2F;&gt;\n</code></pre><p>æœ€åå®ç° <code>onAllLoad</code> å‡½æ•°å³å¯ã€‚</p>\n<p>å¦å¤–ï¼Œåƒè¿™ç§æ²¡æœ‰å®é™…å±•ç¤ºæ•°æ®çš„ <code>Component</code>ï¼Œå»ºè®®åœ¨é¡¹ç›®ä¸­éƒ½ç”¨ <code>abstract</code> å¼€å¤´æ¥å‘½åã€‚</p>\n<h4>6.4 scroll-view åœ¨ iOS çš„ bug</h4>\n<p>å¦‚æœè¯»è€…ä½¿ç”¨ iOS ç³»ç»Ÿè°ƒè¯•è¿™ä¸ªå°ç¨‹åºï¼Œå¯èƒ½ä¼šå‘ç° Feed æµæ¯”è¾ƒçŸ­çš„æ—¶å€™ï¼Œæ»šåŠ¨ <code>scroll-view</code> header å’Œ <code>button</code> ä¼šæœ‰é¬¼ç•œçš„ä¸Šä¸‹æŠ–åŠ¨ç°è±¡ï¼Œè¿™æ˜¯å› ä¸º iOS è‡ªå·±å®ç°çš„ WebView å¯¹äºæ»šåŠ¨è§†å›¾æœ‰å›å¼¹çš„æ•ˆæœï¼Œè€Œè¯¥æ•ˆæœä¹Ÿä¼šè§¦å‘æ»šåŠ¨äº‹ä»¶ã€‚</p>\n<p>å¯¹äºè¿™ä¸ª bugï¼Œ<a href=\"https://developers.weixin.qq.com/community/develop/doc/00064a122e01782f0d583fc0151c00\">å®˜æ–¹äººå‘˜ä¹Ÿè¡¨ç¤ºæš‚æ—¶æ— æ³•ä¿®å¤</a>ï¼Œåªèƒ½å…ˆå¿ä¸€å¿äº†ã€‚</p>\n<h4>6.5 å…³äºæ¶ˆæ¯ Tab</h4>\n<p>è¯»è€…å¯èƒ½ä¼šç–‘æƒ‘æˆ‘ä¸ºä»€ä¹ˆæ²¡æœ‰è®²è§£æ¶ˆæ¯ Tab ä»¥åŠæ¶ˆæ¯æé†’çš„å®ç°ã€‚é¦–å…ˆæ˜¯å› ä¸ºæºç æ²¡æœ‰è¿™ä¸ªå®ç°ï¼Œå…¶æ¬¡æ˜¯æˆ‘è§‰å¾—ç›®å‰äº‘å¼€å‘æ‰€æä¾›çš„èƒ½åŠ›å®ç°ä¸»åŠ¨æé†’æ¯”è¾ƒéº»çƒ¦ï¼ˆé™¤äº†è½®è¯¢æƒ³ä¸åˆ°å…¶ä»–åŠæ³•ï¼‰ã€‚</p>\n<p>å¸Œæœ›æœªæ¥äº‘å¼€å‘å¯ä»¥æä¾› <strong><em>æ•°æ®åº“é•¿è¿æ¥ç›‘æ§</em></strong> çš„åŠŸèƒ½ï¼Œè¿™æ ·é€šè¿‡è®¢é˜…è€…æ¨¡å¼å¯ä»¥å¾ˆè½»æ¾åœ°è·å–åˆ°æ•°æ®æ›´æ–°çš„çŠ¶æ€ï¼Œä¸»åŠ¨æé†’ä¹Ÿå°±æ›´å®¹æ˜“å®ç°äº†ã€‚åˆ°é‚£æ—¶æˆ‘å¯èƒ½ä¼šå†æ›´æ–°ç›¸å…³æºç ã€‚</p>\n<h4>6.6 å…³äºäº‘å‡½æ•°è€—æ—¶</h4>\n<p>è¯»è€…å¯èƒ½ä¼šå‘ç°æˆ‘æœ‰ä¸€ä¸ªå« <code>benchmark</code> çš„äº‘å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°åªæ˜¯åšäº†ä¸ªæŸ¥è¯¢æ•°æ®åº“çš„æ“ä½œï¼Œç›®çš„åœ¨äºè®¡ç®—æŸ¥è¯¢è€—æ—¶ã€‚</p>\n<p>è¯¡å¼‚çš„æ˜¯ï¼Œæˆ‘å‰å¤©åœ¨è°ƒè¯•çš„æ—¶å€™ï¼Œå‘ç°æŸ¥è¯¢ä¸€æ¬¡éœ€è¦1ç§’é’Ÿï¼Œè€Œå†™è¿™ç¯‡æ–‡ç« æ—¶å´ä¸åˆ°100msã€‚å»ºè®®åœ¨ä¸€äº›éœ€è¦å¤šæ¬¡æ“ä½œæ•°æ®åº“çš„å‡½æ•°é…ç½®é‡Œï¼ŒæŠŠè¶…æ—¶æ—¶é—´è®¾ç½®é•¿ä¸€ç‚¹å§ã€‚ç›®å‰äº‘å‡½æ•°çš„æ€§èƒ½ä¸å¤ªç¨³å®šã€‚</p>\n<h3>7. ç»“è¯­</h3>\n<p>é‚£ä¹ˆå…³äºè¿·ä½ ç‰ˆå¾®åšå¼€å‘å®æˆ˜ä»‹ç»å°±åˆ°æ­¤ä¸ºæ­¢äº†ï¼Œæ›´å¤šèµ„æ–™å¯ä»¥ç›´æ¥ä¸‹è½½æºç æŸ¥çœ‹å“¦ã€‚</p>\n<h1>æºç é“¾æ¥</h1>\n<p><a href=\"https://github.com/TencentCloudBase/Good-practice-tutorial-recommended\">https://github.com/TencentCloudBase/Good-practice-tutorial-recommended</a></p>\n<p><img src=\"//static.cnodejs.org/Fl6cvNxYzm89pOVSALRl35RBZE6f#pic_center\" alt=\"WechatIMG76.png\"></p>\n<p>å¦‚æœä½ æœ‰å…³äºä½¿ç”¨äº‘å¼€å‘CloudBaseç›¸å…³çš„æŠ€æœ¯æ•…äº‹/æŠ€æœ¯å®æˆ˜ç»éªŒæƒ³è¦è·Ÿå¤§å®¶åˆ†äº«ï¼Œæ¬¢è¿ç•™è¨€è”ç³»æˆ‘ä»¬å“¦~æ¯”å¿ƒï¼</p>\n</div>",
      "title": "å°ç¨‹åºÂ·äº‘å¼€å‘å®æˆ˜ - è¿·ä½ å¾®åš",
      "last_reply_at": "2019-07-24T03:25:39.792Z",
      "good": false,
      "top": false,
      "reply_count": 0,
      "visit_count": 388,
      "create_at": "2019-07-24T03:25:39.792Z",
      "author": {
        "loginname": "TencentTCB",
        "avatar_url": "https://avatars0.githubusercontent.com/u/51230659?v=4&s=120"
      }
    },
    {
      "id": "5d36ff6effed731686461dbd",
      "author_id": "5d3410819969a529571d5ded",
      "tab": "ask",
      "content": "<div class=\"markdown-text\"><p>è¿™æ˜¯åœ¨è®ºå›æ‹›è˜é‡Œï¼Œæˆ‘æŠŠæ‰€æœ‰è¦æ±‚å¯¹æ¯”æ€»ç»“å‡ºæ¥çš„</p>\n<p>Express,KOA2\nES6,callback,promise, async/await ç­‰å¼‚æ­¥æ§åˆ¶æ–¹æ³•,å¹¶çŸ¥æ™“å…¶åŸç†Webscoket\nMysql,Nosql,Redis\näº†è§£nodejsæœåŠ¡æ—¥å¸¸è¿ç»´å„ç¯èŠ‚,ç†Ÿæ‚‰è¿›ç¨‹ç®¡ç†,æ—¥å¿—ç®¡ç†çš„å„ç§å·¥å…·\nå…·æœ‰æ‰å®çš„ç¼–ç¨‹åŠŸåº•å’Œå»ºæ¨¡èƒ½åŠ›ï¼Œç²¾é€šå¸¸ç”¨çš„æ•°æ®ç»“æ„ã€ç®—æ³•ã€è®¾è®¡æ¨¡å¼ï¼›\nDevOps è‡ªåŠ¨åŒ–è¿ç»´ï¼Œç†Ÿç»ƒä½¿ç”¨ Docker åŠç›¸å…³æŠ€æœ¯æ ˆï¼›\näº†è§£å…¬æœ‰äº‘å’Œç§æœ‰äº‘çš„åŒºåˆ«ï¼Œè‹¥æœ‰å…¬æœ‰äº‘çš„ä½¿ç”¨ç»éªŒä¸ºæ›´ä½³ï¼Œä¾‹å¦‚ AWSã€é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ã€Google Cloud ç­‰ï¼ˆç†Ÿæ‚‰ AWS è€…ä¼˜å…ˆè€ƒè™‘ï¼‰ï¼›</p>\n<p>æœ¬äººåˆšæ¯•ä¸šæ²¡å¤šä¹…ï¼Œè¿˜æ²¡æ¥è§¦è¿‡èŒåœºï¼Œå¸Œæœ›å¤§ä½¬ä»¬èƒ½æŒ‡ç‚¹ä¸‹æˆ‘\nä½œä¸ºä¸€ä¸ªæ–°äººï¼ŒèŒåœºé¢è¯•æ±‚èŒï¼Œnodejsåç«¯ï¼Œè¦å‡†å¤‡ä»€ä¹ˆï¼Œè¦å‡†å¤‡åˆ°ä»€ä¹ˆç¨‹åº¦\næå‰è°¢è°¢å¤§ä½¬ä»¬äº†</p>\n</div>",
      "title": "åç«¯é¢è¯• éœ€è¦å­¦ä¹ ä»€ä¹ˆï¼Ÿ",
      "last_reply_at": "2019-07-24T01:51:06.927Z",
      "good": false,
      "top": false,
      "reply_count": 3,
      "visit_count": 606,
      "create_at": "2019-07-23T12:37:02.213Z",
      "author": {
        "loginname": "Josh119891",
        "avatar_url": "https://avatars0.githubusercontent.com/u/18020366?v=4&s=120"
      }
    },
    {
      "id": "5b630389b71aedfe4c1266a2",
      "author_id": "5b62fab258db3ccf66a4516b",
      "tab": "ask",
      "content": "<div class=\"markdown-text\"><p>è¿‘æœŸåœ¨å­¦ä¹ node.jsï¼Œç”±äºè‡ªå·±æ˜¯åˆå­¦è€…ï¼Œçœ‹äº†ã€ŠNode.jså¼€å‘æŒ‡å—ã€‹å’Œ ã€ŠNode.jså¼€å‘å®æˆ˜ã€‹ä¸Šçš„ä¸€äº›åŸºç¡€çš„ä¸œè¥¿ï¼Œã€Šæ·±å…¥æµ…å‡º Node.jsã€‹çœ‹èµ·æ¥æ˜¯å¾ˆåƒåŠ›ï¼Œæœ€è¿‘è¯•ç€ç”¨Expresså¼€å‘è‡ªå·±çš„ä¸€ä¸ª ä¸ªäººåšå®¢ç³»ç»Ÿï¼Œåˆšåˆšå¼€å§‹ï¼Œå°±æ„Ÿè§‰å¾ˆåƒåŠ›ï¼Œæœ€è¿‘å°±åœ¨æƒ³è¯¥æ€ä¹ˆæ¥å­¦ä¹ ï¼Œå¸Œæœ›æ›¾ç»å’Œæˆ‘æœ‰ç›¸åŒé—®é¢˜çš„æœ‹å‹è§£ç­”ä¸‹æˆ‘çš„ç–‘æƒ‘ï¼Œå­¦ä¹ è·¯çº¿å¾ˆè¿·èŒ«å•Šã€‚ã€‚ã€‚</p>\n</div>",
      "title": "node.jsçš„å…¥é—¨ï¼ˆèŒæ–°ï¼‰",
      "last_reply_at": "2019-07-24T01:41:12.864Z",
      "good": false,
      "top": false,
      "reply_count": 46,
      "visit_count": 7359,
      "create_at": "2018-08-02T13:13:45.110Z",
      "author": {
        "loginname": "remembergf",
        "avatar_url": "https://avatars1.githubusercontent.com/u/34055216?v=4&s=120"
      }
    },
    {
      "id": "5c2190c176c4964062a1d641",
      "author_id": "58d140302c8bf2a836456213",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><p><strong>æ‘˜è¦ï¼š</strong> å¯¹JSeræ¥è¯´ï¼Œè¿™æ˜¯å¾ˆæœ‰æ„æ€çš„1å¹´ã€‚</p>\n<p>æœ¬æ–‡çµæ„Ÿæ¥è‡ª<a href=\"https://javascriptweekly.com/\">JavaScript Weekly</a>å‘¨æŠ¥ï¼Œæ¬¢è¿å¤§å®¶è®¢é˜…ã€‚</p>\n<h3>The State of JavaScript 2018</h3>\n<p><a href=\"https://2018.stateofjs.com/\">The State of JavaScript</a>è°ƒç ”å·²ç»è¿ç»­åšäº†3å¹´(<a href=\"http://2016.stateofjs.com/\">2016</a>, <a href=\"https://2017.stateofjs.com/\">2017</a>, <a href=\"https://2018.stateofjs.com\">2018</a>)ï¼Œ<a href=\"https://2018.stateofjs.com/\">ä»Šå¹´</a>ä¸€å…±è°ƒç ”äº†2ä¸‡å¤šä¸ªJSå¼€å‘è€…ã€‚æœ‰è¿™æ ·ä¸€äº›æœ‰æ„æ€çš„å‘ç°ï¼š</p>\n<ul>\n<li>ç»å¤§å¤šæ•°å¼€å‘è€…éƒ½ç”¨è¿‡ES6ï¼ŒåŒæ—¶TypeScriptä¹Ÿè¶Šæ¥è¶Šæµè¡Œäº†ï¼›</li>\n<li>Reactä¾ç„¶æœ€æµè¡Œçš„å‰ç«¯æ¡†æ¶ï¼ŒåŒæ—¶Vueä¹Ÿè¶Šæ¥è¶Šå—æ¬¢è¿äº†ï¼›</li>\n<li>Expressä¾ç„¶æ˜¯æœ€æµè¡Œçš„Node.jsæ¡†æ¶(Node 8å·²ç»æ”¯æŒasyncå‡½æ•°äº†ï¼ŒKoaçš„ä»·å€¼åº”è¯¥å°‘äº†å¾ˆå¤š)ï¼›</li>\n<li>Visual Studio codeè¿œè¿œè¶…è¶ŠSublimeï¼Œæˆä¸ºæœ€æµè¡Œçš„JSç¼–è¾‘å™¨ï¼›</li>\n</ul>\n<p>ä½œä¸ºä¸€ä¸ªåç«¯ç”¨Expressæ¡†æ¶ï¼Œå°½é‡ä½¿ç”¨æœ€æ–°çš„ECMAScriptè¯­æ³•ï¼Œè€Œå‰ç«¯ç”¨ç€TypeScriptï¼Œä¸è¿‡æ¡†æ¶è¿˜æ˜¯AngularJS 1(è¿™äº‹è¦æ€ªç‰ˆæœ¬å¸Angularä¸å‘åå…¼å®¹)ï¼ŒæŠ›å¼ƒä»·å€¼70åˆ€çš„Sublimeï¼Œä»Šå¹´åŠ å…¥VS codeé˜µè¥çš„JSerï¼Œæˆ‘ä¹Ÿæ˜¯ç®—æ˜¯å¤Ÿä¸»æµäº†å§ï¼é‚£ä½ å‘¢ï¼Ÿ</p>\n<h3>ECMAScript 2018</h3>\n<p>TC39(ECMAScriptæ ‡å‡†å§”å‘˜ä¼š)è¿™äº›å¹´è¶Šæ¥è¶Šå‹¤å¿«äº†ï¼Œä»2015å¹´(ES6)å¼€å§‹ï¼Œæ¯å¹´å‘å¸ƒä¸€ä¸ªæ–°çš„ECMASciptæ ‡å‡†ã€‚ä»Šå¹´å¤§ä½¬ä»¬ç»§ç»­å¿™äºå¤„ç†å„ç§<a href=\"https://github.com/tc39/proposals\">proposal</a>ã€‚<a href=\"https://www.ecma-international.org/publications/standards/Ecma-262.htm\">ECMAScript 2018</a>ï¼Œå³ES9ï¼Œåˆ™åœ¨6æœˆå¦‚æœŸå‘å¸ƒäº†ï¼Œå…¶æ–°å¢çš„ç‰¹æ€§å¹¶ä¸å¤šï¼š</p>\n<p><strong>ä¸»è¦æ–°ç‰¹æ€§:</strong></p>\n<ul>\n<li><a href=\"http://2ality.com/2016/10/asynchronous-iteration.html\">Asynchronous Iteration</a></li>\n<li><a href=\"http://2ality.com/2016/10/rest-spread-properties.html\">Rest/Spread Properties</a></li>\n</ul>\n<p><strong>æ–°çš„æ­£åˆ™è¡¨è¾¾å¼ç‰¹æ€§</strong>:</p>\n<ul>\n<li><a href=\"http://2ality.com/2017/05/regexp-named-capture-groups.html\">RegExp named capture groups</a></li>\n<li><a href=\"http://2ality.com/2017/07/regexp-unicode-property-escapes.html\">RegExp Unicode Property Escapes</a></li>\n<li><a href=\"http://2ality.com/2017/05/regexp-lookbehind-assertions.html\">RegExp Lookbehind Assertions</a></li>\n<li><a href=\"http://2ality.com/2017/07/regexp-dotall-flag.html\"><code>s</code> (<code>dotAll</code>) flag for regular expressions</a></li>\n</ul>\n<p><strong>å…¶ä»–æ–°ç‰¹æ€§</strong>:</p>\n<ul>\n<li><a href=\"http://2ality.com/2017/07/promise-prototype-finally.html\"><code>Promise.prototype.finally()</code></a></li>\n<li><a href=\"http://2ality.com/2016/09/template-literal-revision.html\">Template Literal Revision</a></li>\n</ul>\n<p>å¦‚æœæƒ³äº†è§£ES9çš„ç»†èŠ‚ï¼Œé˜”ä»¥çœ‹çœ‹<a href=\"http://dr-axel.de/\">Axel Rauschmayer</a>åšå£«å†™çš„<a href=\"http://exploringjs.com/es2018-es2019/toc.html\">Exploring ES2018 and ES2019</a>ã€‚</p>\n<h3>Node 10</h3>\n<p>Node 10åœ¨4æœˆ<a href=\"https://nodejs.org/en/blog/release/v10.0.0/\">å‘å¸ƒ</a>å¹¶ä¸”åœ¨10æœˆæˆä¸º<a href=\"https://medium.com/@nodejs/october-brings-node-js-10-x-to-lts-and-node-js-11-to-current-ae19f8f12b51\">LTS</a>ï¼Œå³é•¿æœŸæ”¯æŒç‰ˆæœ¬ã€‚</p>\n<p>Node 10ä½¿ç”¨äº†æ–°çš„<a href=\"https://v8.dev/\">V8å¼•æ“</a>6.8ï¼Œå› æ­¤æ€§èƒ½æå‡äº†å¾ˆå¤šï¼Œæ¯”å¦‚<a href=\"https://v8.dev/blog/fast-async\">Promiseä¸Asyncå‡½æ•°çš„æ€§èƒ½æå‡å°±éå¸¸æ˜æ˜¾</a>ï¼Œå› æ­¤å»ºè®®å¤§å®¶å‡çº§ã€‚</p>\n<p>Nodeæ–°ç‰ˆæœ¬çš„<a href=\"https://github.com/nodejs/release\">å‘å¸ƒæ—¥æœŸ</a>ä¸€ç›´éå¸¸ç¨³å®šï¼Œåšåˆ°è¿™ä¸€ç‚¹ä¹Ÿæ˜¯ä¸å®¹æ˜“å•Šï¼</p>\n<p><img src=\"https://image.fundebug.com/2018-12-24-node.png\" alt></p>\n<h3>Vue 3.0</h3>\n<p>åœ¨<a href=\"https://vuetoronto.com/\">Vue.js Conference Toronto 2018</a>ä¸Šï¼Œå°¤é›¨æºªå‘è¡¨äº†ä¸»é¢˜æ¼”è®²<a href=\"https://docs.google.com/presentation/d/1yhPGyhQrJcpJI2ZFvBme3pGKaGNiLi709c37svivv0o/edit#slide=id.p\">Vue 3.0 Updates</a>ï¼Œæ–°ç‰ˆæœ¬å°†ä¼šæœ‰è¿™äº›å˜åŒ–ï¼š</p>\n<ul>\n<li>æ›´å¿«</li>\n<li>æ›´å°</li>\n<li>æ›´æ˜“äºç»´æŠ¤</li>\n<li>æ›´å¤šçš„åŸç”Ÿæ”¯æŒ</li>\n<li><a href=\"https://www.zhihu.com/question/46397274/answer/101193678\">æ”¾å¼ƒFlowï¼Œä½¿ç”¨TypeScript</a></li>\n</ul>\n<p>Vue 3.0<a href=\"https://medium.com/the-vue-point/plans-for-the-next-iteration-of-vue-js-777ffea6fabf\">é¢„è®¡å°†åœ¨2019å‘å¸ƒ</a>ï¼Œå¤§å®¶æœŸå¾…å§ï¼</p>\n<h3>Babel 7</h3>\n<p>2å¹´å¤šæ—¶é—´commitäº†4000å¤šæ¬¡ï¼Œ<a href=\"https://babeljs.io/blog/2018/08/27/7.0.0\">Babel 7ç»ˆäºå‘å¸ƒäº†</a>ï¼Œæ–°å¢äº†ä¸‹é¢è¿™äº›ç‰¹æ€§ï¼š</p>\n<ul>\n<li><a href=\"https://www.npmjs.com/package/babel-upgrade\">babel-upgrade</a>: å‡çº§Babelçš„å·¥å…·ï¼›</li>\n<li><a href=\"https://babeljs.io/docs/en/next/config-files#project-wide-configuration\">babel.config.js</a>ï¼šå­¦ä¹ ESLintä¸Webpackï¼Œä½¿ç”¨JSæ–‡ä»¶é…ç½®ï¼›</li>\n<li><a href=\"https://babeljs.io/docs/en/options#overrides\">overrides</a>ï¼šå…è®¸åŒä¸€ä¸ªé¡¹ç›®ä½¿ç”¨ä¸åŒçš„Babelé…ç½®ï¼Œä¾‹å¦‚å‰ç«¯ä»£ç çš„targetsä¸ºChrome 60ï¼Œè€Œåç«¯ä»£ç çš„targetsä¸ºNode 8ï¼›</li>\n<li>â€¦</li>\n</ul>\n<p><img src=\"https://image.fundebug.com/2018-12-24-babel.png\" alt></p>\n<p>ä¸»æµæµè§ˆå™¨å¯¹æ–°çš„ECMAScriptç‰¹æ€§å·²ç»æ”¯æŒå¾—ä¸é”™äº†ï¼Œä¸è¿‡è¿˜æ˜¯å­˜åœ¨å¹¶ä¸”æ°¸è¿œå­˜åœ¨å¾ˆå¤šéä¸»æµæµè§ˆå™¨ï¼Œäºæ˜¯æˆ‘ä»¬è¿˜æ˜¯ç¦»ä¸å¼€ç¥å¥‡çš„Babelã€‚</p>\n<h3>jQuery 3.3.0</h3>\n<p>æ›¾ç»é£é¡ä¸€æ—¶çš„<a href=\"http://blog.jquery.com/2018/01/19/jquery-3-3-0-a-fragrant-bouquet-of-deprecations-and-is-that-a-new-feature/\">jQueryå‘å¸ƒäº†3.3.0</a>ï¼Œè¿™ä¸ªç‰ˆæœ¬æ”¾å¼ƒäº†(deprecated)ä¸€ç³»åˆ—æ–¹æ³•ï¼š</p>\n<ul>\n<li>jQuery.now</li>\n<li>jQuery.isWindow</li>\n<li>jQuery.camelCase</li>\n<li>jQuery.proxy</li>\n<li>jQuery.type</li>\n<li>jQuery.isNumeric</li>\n<li>jQuery.isFunction</li>\n<li>Event aliases</li>\n</ul>\n<p>è¿™äº›æ–¹æ³•å¤§å¤šä¼šåœ¨jQuery 4.0ä¸­è¢«åˆ é™¤ï¼Œå› æ­¤jQueryå®˜æ–¹é¼“åŠ±å¤§å®¶ä½¿ç”¨æ›¿ä»£çš„æ–¹æ³•ã€‚</p>\n<p>ä»è¿™ä¸ªæ›´æ–°ä¹Ÿèƒ½çœ‹å‡ºç«¯å€ªï¼ŒjQueryæ—¶ä»£å·²ç»é€æ¸è¿‡å»äº†ï¼Œ<a href=\"https://githubengineering.com/removing-jquery-from-github-frontend/\">GitHubçš„æå®¢ä»¬å¹²è„†å®Œå…¨æŠ›å¼ƒäº†jQuery</a>ã€‚</p>\n<h3>V8å¼•æ“10å‘¨å¹´</h3>\n<p>å¼ºå¤§çš„<a href=\"https://v8.dev/blog/10-years\">V8å¼•æ“å·²ç»å‘å¸ƒ10å‘¨å¹´äº†</a>ï¼Œå®ƒçš„å‘½åçµæ„Ÿæ¥è‡ªè¶…çº§æ€§èƒ½è½¦çš„V8å¼•æ“ï¼Œæœç„¶åå‰¯å…¶å®ï¼å…¶æ€§èƒ½ä¸€ç›´ç¨³æ­¥æé«˜ï¼š</p>\n<p><img src=\"https://image.fundebug.com/2018-12-24-v8.png\" alt></p>\n<p>V8å¼•æ“å½“åˆæ˜¯ä¸ºChromeæµè§ˆå™¨å¼€å‘çš„ï¼Œä½†æ˜¯æ—©å·²æˆä¸ºä¸€ä¸ªç‹¬ç«‹çš„é¡¹ç›®ã€‚å›½å†…çš„ä¼—å¤šæµè§ˆå™¨ï¼ŒåŒ…æ‹¬æœç‹—ã€360ã€çŒè±¹ã€QQã€ç™¾åº¦ã€UCéƒ½æ˜¯åŸºäº<a href=\"https://zh.wikipedia.org/wiki/Chromium\">Chromium</a>æµè§ˆå™¨å¼€å‘ï¼Œè€ŒChromiumç›¸å½“äºå¼€æºç‰ˆæœ¬çš„Chromeï¼Œè‡ªç„¶ä¹Ÿæ˜¯åŸºäºV8å¼•æ“çš„ã€‚å› æ­¤ï¼Œä¼—å¤š&quot;å›½äº§&quot;æµè§ˆå™¨å®é™…ä¸Šéƒ½æ˜¯åŸºäºV8çš„ã€‚èèµ„äº†2.5äº¿å…ƒçº¢èŠ¯æµè§ˆå™¨ä¹Ÿä¸ä¾‹å¤–ï¼Œ<a href=\"https://www.pingwest.com/a/176061\">ä»–ä»¬å¹²è„†æ‰“åŒ…äº†Chromeæµè§ˆå™¨çš„å®‰è£…åŒ…</a>ï¼Œæœç„¶æœ‰é’±ä»»æ€§ï¼è¿˜æœ‰ï¼Œå°±è¿æµè§ˆå™¨ç•Œçš„ä¸€æœµå¥‡è‘©<a href=\"https://www.ifanr.com/1138933\">Microsoftä¹ŸæŠ•é äº†Chromiumé˜µè¥</a>ã€‚</p>\n<p>å¦å¤–ï¼ŒNode.jsä¹Ÿæ˜¯åŸºäºV8å¼•æ“çš„ã€‚</p>\n<h3>NPMæ¨¡å—<a href=\"https://github.com/dominictarr/event-stream\">event-stream</a>è¢«é»‘å®¢æ”»å‡»</h3>\n<p>è¿™ä»¶äº‹é—¹å¾—æ²¸æ²¸æ‰¬æ‰¬ï¼Œä¸è¿‡åªæ˜¯æœ‰å¾ˆå¤šå™±å¤´ï¼Œå¦‚æœ<a href=\"https://blog.fundebug.com/2018/12/03/how-does-javascript-hacker-steal-bitcoin/\">è®¤çœŸåˆ†æé»‘å®¢å¹²äº†ä»€ä¹ˆ</a>ï¼Œå…¶çœŸå®å½±å“æ²¡é‚£ä¹ˆå¤§ï¼Œè‡³å°‘Vueå¼€å‘è€…æ²¡å•¥å¥½æ‹…å¿ƒçš„ï¼š</p>\n<ul>\n<li>æ¯”ç‰¹å¸é’±åŒ…<a href=\"https://github.com/bitpay/copay\">copay</a>ä¾èµ–<a href=\"https://github.com/dominictarr/event-stream\">event-stream</a>æ¨¡å—ï¼›</li>\n<li>é»‘å®¢ä»éª—å–äº†<a href=\"https://github.com/dominictarr/event-stream\">event-stream</a>æ¨¡å—çš„npmå‘å¸ƒæƒé™ï¼›</li>\n<li>é»‘å®¢ä¸º<a href=\"https://github.com/dominictarr/event-stream\">event-stream</a>æ¨¡å—æ·»åŠ äº†ä¾èµ–<a href=\"https://www.npmjs.com/package/flatmap-stream\">flatmap-stream</a>ï¼›</li>\n<li><a href=\"https://www.npmjs.com/package/flatmap-stream\">flatmap-stream</a>å«æœ‰é»‘å®¢ä»£ç ï¼Œä»…ä¼šåœ¨<a href=\"https://github.com/bitpay/copay\">copay</a>é¡¹ç›®ä¸­æ­£ç¡®æ‰§è¡Œï¼Œçªƒå–ç”¨æˆ·çš„å¯†ç ã€ç§é’¥ç­‰ä¿¡æ¯ï¼Œä»è€Œç›—å–æ¯”ç‰¹å¸ï¼›</li>\n<li>æœ‰äººè¯´ä»€ä¹ˆVueå¯èƒ½é­å—æ”»å‡»ï¼Œå…¶å®æ²¡æœ‰è¿™å›äº‹ï¼Œå› ä¸ºé»‘å®¢ä»£ç åªä¼šåœ¨<a href=\"https://github.com/bitpay/copay\">copay</a>é¡¹ç›®ä¸­æ­£ç¡®æ‰§è¡Œã€‚åªæœ‰<a href=\"https://github.com/bitpay/copay\">copay</a>é¡¹ç›®çš„<a href=\"https://github.com/bitpay/copay/blob/cd3f2b380588e6bc90e6c498bf9ae075bcc59e34/package.json\">package.json</a>ä¸­çš„<a href=\"https://github.com/bitpay/copay/blob/cd3f2b380588e6bc90e6c498bf9ae075bcc59e34/package.json#L3\">description</a>å­—ç¬¦ä¸²&quot;A Secure Bitcoin Wallet&quot;èƒ½å¤Ÿè§£å¯†é»‘å®¢ä»£ç ï¼›è€Œä¸”ï¼Œé»‘å®¢çš„ä»£ç æ˜¯ä¸º<a href=\"https://github.com/bitpay/copay\">copay</a>é‡èº«å®šåšçš„ï¼Œå¯¹å…¶ä»–é¡¹ç›®æ²¡æœ‰ä½œç”¨ï¼›å†è¯´ï¼Œé»‘å®¢æ˜¯æ¥çªƒå–çš„æ¯”ç‰¹å¸çš„ï¼Œåˆä¸æ˜¯æŒ–çŸ¿ï¼Œä½ çš„é¡¹ç›®æœ‰æ¯”ç‰¹å¸ç»™äººå®¶å·å—?</li>\n</ul>\n<p>åŒå­¦ä»¬ï¼Œä¸è¦è¢«æ ‡é¢˜å…šç»™éª—äº†å•Šï¼</p>\n<h3>ã€ŠRefactoringã€‹ç¬¬2ç‰ˆæ”¹ç”¨JavaScript</h3>\n<p><a href=\"https://book.douban.com/subject/1229923/\">ã€Šé‡æ„ï¼šæ”¹å–„æ—¢æœ‰ä»£ç çš„è®¾è®¡ã€‹</a>å¤§å¤šæ•°äººéƒ½æ²¡çœ‹è¿‡ï¼Œä½†æ˜¯è‡³å°‘åº”è¯¥éƒ½å¬è¿‡ã€‚è¿™æœ¬ä¹¦åˆšå‡ºäº†<a href=\"https://www.amazon.com/gp/product/0134757599\">ç¬¬äºŒç‰ˆ</a>ï¼Œæ‰€æœ‰ç¤ºä¾‹ä»£ç ç”±Javaæ”¹æˆäº†JavaScriptã€‚</p>\n<p>æ ¹æ®ä½œè€…<a href=\"https://martinfowler.com/articles/refactoring-2nd-ed.html\">Martin Fowler</a>çš„<a href=\"https://martinfowler.com/articles/refactoring-2nd-ed.html\">è§£é‡Š</a>ï¼Œ**ã€Šé‡æ„ã€‹è¿™æœ¬ä¹¦é‡ç‚¹åœ¨äºæ€æƒ³ï¼Œé€‚ç”¨äºå„ç§ç¼–ç¨‹è¯­è¨€ï¼Œæ‰€ä»¥é€‰æ‹©ä»€ä¹ˆè¯­è¨€å¹¶ä¸é‡è¦ã€‚**è€Œä»–é€‰æ‹©JavaScriptçš„åŸå› å¾ˆç®€å•ï¼Œå› ä¸ºJSæ—¢æ”¯æŒé¢å‘è¿‡ç¨‹ç¼–ç¨‹ï¼Œåˆæ”¯æŒé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œè¿™æ ·æ–¹ä¾¿å†™éOOPä»£ç é‡æ„çš„ç¤ºä¾‹ã€‚</p>\n<p>è¿™é‡Œä¸å¦¨å¼•ç”¨<a href=\"https://www.zhihu.com/question/46397274/answer/101193678\">å°¤é›¨æºª</a>çš„ä¸€å¥è¯ï¼š</p>\n<blockquote>\n<p>è‡³äºé‡æ„ã€è®¾è®¡ä»€ä¹ˆçš„ï¼Œæˆ‘åªæƒ³è¯´ï¼Œçœ‹çš„æ˜¯ä½¿ç”¨çš„äººçš„æ°´å¹³ï¼Œè·Ÿç”¨ä»€ä¹ˆè¯­è¨€æ²¡é‚£ä¹ˆå¤§å…³ç³»ã€‚æ°´å¹³çƒ‚çš„äººç”¨ TS ä¸€æ ·å†™çš„æ˜¯ç¿”ä¸€æ ·çš„ä»£ç ï¼Œçœ‹çœ‹ java å°±çŸ¥é“äº†ã€‚</p>\n</blockquote>\n<p>ã€ŠRefactoringã€‹çš„ç¤ºä¾‹ä»£ç ç”¨ä»€ä¹ˆè¯­è¨€å†™æ ¹æœ¬ä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯èƒŒåçš„ç¼–ç¨‹æ€æƒ³ã€‚é¡ºä¾¿æ¨èä¸€ä¸‹ã€ŠClean Codeã€‹ã€‚</p>\n<p><img src=\"https://image.fundebug.com/2018-12-24-refactoring.jpg\" alt></p>\n<p>è¿™æœ¬ä¹¦åŸä»·54.66åˆ€ï¼Œçš„ç¡®æœ‰ç‚¹è´µï¼Œä¸è¿‡ç®—æ˜¯å¿…è¯»ä¹¦ï¼Œå¤§å®¶çœ‹ç€åŠâ€¦</p>\n<h3>GitHubæŠ›å¼ƒjQuery</h3>\n<p>ä¸€ç›´ä»¥æ¥ï¼ŒGitHubæœ€æµè¡Œçš„ç¼–ç¨‹è¯­è¨€éƒ½æ˜¯JavaScriptï¼Œå¯ä»¥è¯´GitHubæ˜¯å…¨çƒæœ€å¤§çš„JSå¼€å‘è€…ç¤¾äº¤å¹³å°äº†ï¼›åŒæ—¶ï¼Œå› ä¸ºè¢«IEçš„å…¼å®¹é—®é¢˜æŠ˜ç£¨äº†å¤šå¹´ï¼Œå‰ç«¯ç—›æ¨Microsoftï¼ä½†æ˜¯ï¼Œæœ‰é’±ä»»æ€§çš„Microsoftä»¥75äº¿ç¾å…ƒæ”¶è´­äº†GitHubï¼</p>\n<p>å¦å¤–ï¼Œ<a href=\"https://githubengineering.com/removing-jquery-from-github-frontend/\">GitHubçš„æŠ€æœ¯æå®¢ä»¬èŠ±äº†æ•°å¹´æ—¶é—´ï¼Œä»¥éå¸¸è§„èŒƒçš„æµç¨‹å®Œå…¨ç§»é™¤GitHubç½‘ç«™äº†jQuery</a>ï¼š</p>\n<ul>\n<li>å®ç°äº†ä¸€ä¸ªESlintæ’ä»¶<a href=\"https://github.com/dgraham/eslint-plugin-jquery\">eslint-plugin-jquery</a>ï¼Œç¦æ­¢åœ¨ä»£ç ä¸­ä½¿ç”¨å·²ç»å¼ƒç”¨çš„jQueryæ–¹æ³•ã€‚è¿™æ ·å¯ä»¥é˜²æ­¢åŒäº‹ä½¿ç”¨jQueryæ–¹æ³•ã€‚</li>\n<li>ä½¿ç”¨åŸç”Ÿä»£ç é‡å†™äº†2ä¸ªä¾èµ–äºjQueryçš„æ¨¡å—<a href=\"https://github.com/defunkt/jquery-pjax\">jquery-pjax</a>å’Œ<a href=\"https://github.com/defunkt/facebox\">facebox</a>ã€‚</li>\n<li>å¼€å‘ä¸€ä¸ªå®šåˆ¶çš„jQueryç‰ˆæœ¬ï¼Œä¸€æ—¦å®Œå…¨ç§»é™¤æŸä¸ªjQueryæ–¹æ³•ï¼Œå°±åˆ é™¤jQueryä¸­çš„å¯¹åº”ä»£ç ã€‚è¿™æ ·æ—¢å¯ä»¥å‡å°‘jQueryå¤§å°ï¼Œä¹Ÿå¯ä»¥é˜²æ­¢åŒäº‹ä½¿ç”¨å·²ç»ç§»é™¤çš„jQueryæ–¹æ³•ã€‚</li>\n<li>æ ¹æ®ç”¨æˆ·ç»Ÿè®¡æ•°æ®ï¼Œæ¥é€æ­¥æ”¾å¼ƒæ”¯æŒä½ç‰ˆæœ¬çš„IEæµè§ˆå™¨ï¼Œè¿™æ ·çš„è¯å¯ä»¥æ— éœ€ä¾èµ–jQueryæ¥ä¿è¯å…¼å®¹æ€§ã€‚</li>\n<li>â€¦</li>\n</ul>\n<p>æ˜¯å¦ä½¿ç”¨jQueryå„æœ‰å„çš„æƒ³æ³•å’Œéœ€æ±‚ï¼Œä½†æ˜¯<strong>GitHubå¼ƒç”¨jQueryçš„æµç¨‹éå¸¸ä¸“ä¸šï¼Œå¯ä»¥ä½œä¸ºå¤„ç†æŠ€æœ¯å€ºçš„æ ‡å‡†è§„èŒƒ</strong>ã€‚</p>\n<h3>Microsoftçˆ±ä¸ŠJavaScript</h3>\n<p>åœŸè±ªMicrosoftä¼¼ä¹çˆ±ä¸Šäº†JavaScriptï¼Œå®ƒå®¶çš„<a href=\"https://www.reddit.com/r/programming/comments/8qqhlz/comment/e0ll1dt/\">Office 365, MicroSoft Teamsä»¥åŠSkypeéƒ½å¼€å§‹ä½¿ç”¨JavaScripté‡å†™äº†</a>ã€‚åŸå› æ— ç–‘æ˜¯JSçš„è·¨å¹³å°ç‰¹æ€§ã€‚åŒä¸€å¥—ä»£ç å¤šå¤„è¿è¡Œï¼Œè™½ç„¶ç°åœ¨è¿˜æœ‰å¾ˆå¤šé—®é¢˜ï¼Œä½†æ˜¯è¿™æ ·çš„æœªæ¥ä¸æ˜¯æŒºå¥½ä¹ˆï¼Ÿ</p>\n<p>æ­¤å¤„åº”è¯¥å†æ¥æ„Ÿå—ä¸€ä¸‹å¤§åé¼é¼çš„<a href=\"https://blog.codinghorror.com/the-principle-of-least-power/\">Atwoodâ€™s Law</a>ï¼š</p>\n<blockquote>\n<p>Any application that can be written in JavaScript, will eventually be written in JavaScript</p>\n</blockquote>\n<p>åœ¨æµè§ˆå™¨å¸‚åœºä¸Šï¼ŒMicrosoftæ›¾ç»é€šè¿‡æ†ç»‘Windowsæ‰“è´¥äº†ç½‘æ™¯ï¼Œä¸è¿‡è¿™äº›å¹´åœ¨Chromeé¢å‰ä¸€è´¥æ¶‚åœ°ï¼Œç°åœ¨ç»ˆäº&quot;è®¤è¾“&quot;ï¼Œé€‰æ‹©<a href=\"https://www.ifanr.com/1138933\">åŸºäºChromiumé‡å†™æµè§ˆå™¨</a>ã€‚å¯¹äºJSeræ¥è¯´ï¼Œè‡³å°‘æ„å‘³ç€æµè§ˆå™¨å…¼å®¹é—®é¢˜å¯ä»¥ç¼“è§£å¾ˆå¤šã€‚</p>\n<p>æ ¹æ®<a href=\"https://2018.stateofjs.com/other-tools/\">The State of JavaScript 2018</a>ï¼ŒMicrosoftå¼€å‘çš„<a href=\"https://code.visualstudio.com/\">Visual Studio code</a>ä¿¨ç„¶å·²ç»æˆä¸ºæœ€å—JSeræ¬¢è¿çš„ä»£ç ç¼–è¾‘å™¨ï¼Œä¸€äº›æµè¡Œæ’ä»¶ä¸‹è½½é‡é«˜è¾¾ä¸Šåƒä¸‡ï¼š</p>\n<p><img src=\"https://image.fundebug.com/2018-12-24-vscode.png\" alt></p>\n<p>å¸‚å€¼è¶…è¿‡Appleï¼Œé‡å›å…¨çƒå¸‚å€¼æœ€é«˜å…¬å¸çš„Microsoftæœ‰é’±ä»»æ€§ï¼Œä¹°ä¸‹äº†JSå¼€å‘è€…æœ€å¤šçš„GitHubã€‚</p>\n<p>ITç•Œçš„ç½—é©¬å¸å›½(å‡ºå¤„ï¼šå´å†›ã€Šæµªæ½®ä¹‹å·…ã€‹)Microsoftåˆé‡æ–°å´›èµ·äº†ï¼Œè¿™æ˜¯ä¸€ä»¶å¾ˆäº†ä¸èµ·çš„äº‹æƒ…ã€‚</p>\n<h3>Oracleå®£ç¤ºJavaScriptä¸»æƒ</h3>\n<p><a href=\"https://mp.weixin.qq.com/s/gRtOaTXdLYVrIPnejVytMw\">Oracleæ˜å¹´å°±è¦å¼€å§‹ç»™Javaæ”¶è´¹</a>ï¼Œè™½ç„¶åªæ˜¯JDK 8çš„u192ä¹‹åçš„æ›´æ–°è¦æ”¶è´¹ï¼Œè¿™ä¸ªè¡Œä¸ºå¤§æ¦‚ä¼šè®©å¾ˆå¤šJavaå¼€å‘è€…ä¸çˆ½â€¦</p>\n<p>å¦å¤–ï¼Œ<a href=\"https://mp.weixin.qq.com/s/Q5bK8qHgLRzTsrA3NdC9wQ?\">Oracleè¿˜è¦æ±‚ä¸€ä¸ªiOSå¼€å‘è€…å°†ä¸€æ¬¾å«åšâ€HTML5, CSS, JavaScript, HTML, Snippet Editorâ€œçš„Appä»App Storeä¸‹æ¶</a>ï¼Œå› ä¸ºAppåå­—ä¸­åŒ…å«â€œJavaScriptâ€å­—çœ¼ï¼Œè€ŒOracleæ‹¥æœ‰JavaScriptåœ¨ç¾å›½çš„å•†æ ‡æƒã€‚</p>\n<p>Oracleè¿™ä½å¤§çˆ·æƒ¹ä¸èµ·ï¼Œå› æ­¤å¤§å®¶æ­£åœ¨ä¸€æœ¬æ­£ç»åœ°<a href=\"https://www.techrepublic.com/article/why-its-finally-time-to-give-up-on-the-name-javascript/\">å»ºè®®ç»™JavaScriptæ”¹å</a>ã€‚å½“ç„¶è¿™åŸºæœ¬ä¸Šæ˜¯ä¸å¯èƒ½çš„ï¼Œè¿™è¾ˆå­éƒ½ä¸å¯èƒ½ã€‚ã€‚ã€‚</p>\n<h3>å‚è€ƒ</h3>\n<ul>\n<li><a href=\"https://blog.fundebug.com/2018/12/03/how-does-javascript-hacker-steal-bitcoin/\">JavaScripté»‘å®¢æ˜¯è¿™æ ·çªƒå–æ¯”ç‰¹å¸çš„ï¼ŒVueå¼€å‘è€…ä¸ç”¨æ‹…å¿ƒï¼</a></li>\n<li><a href=\"https://blog.fundebug.com/2018/11/28/10-english-technolody-newsletter/\">å¼ºçƒˆæ¨è10ä¸ªå€¼å¾—è®¢é˜…çš„å›½å¤–æŠ€æœ¯å‘¨æŠ¥</a></li>\n<li><a href=\"https://blog.fundebug.com/2018/08/10/ecmascript-2018/\">ECMAScript 2018ç‰¹æ€§ç¡®å®šäº†</a></li>\n</ul>\n<h3>å…³äºFundebug</h3>\n<p><a href=\"https://www.fundebug.com/\">Fundebug</a>ä¸“æ³¨äºJavaScriptã€å¾®ä¿¡å°ç¨‹åºã€å¾®ä¿¡å°æ¸¸æˆã€æ”¯ä»˜å®å°ç¨‹åºã€React Nativeã€Node.jså’ŒJavaå®æ—¶BUGç›‘æ§ã€‚ è‡ªä»2016å¹´åŒåä¸€æ­£å¼ä¸Šçº¿ï¼ŒFundebugç´¯è®¡å¤„ç†äº†9äº¿+é”™è¯¯äº‹ä»¶ï¼Œå¾—åˆ°äº†Googleã€360ã€é‡‘å±±è½¯ä»¶ã€ç™¾å§“ç½‘ç­‰ä¼—å¤šçŸ¥åç”¨æˆ·çš„è®¤å¯ã€‚æ¬¢è¿å…è´¹è¯•ç”¨ï¼</p>\n<p><img src=\"https://static.fundebug.cn/wechat_slogan.png\" alt></p>\n<h3>ç‰ˆæƒå£°æ˜</h3>\n<p>è½¬è½½æ—¶è¯·æ³¨æ˜ä½œè€…<a href=\"https://www.fundebug.com/\">Fundebug</a>ä»¥åŠæœ¬æ–‡åœ°å€ï¼š\n<a href=\"https://blog.fundebug.com/2018/12/25/what-happens-in-2018-for-javascript/\">https://blog.fundebug.com/2018/12/25/what-happens-in-2018-for-javascript/</a></p>\n</div>",
      "title": "2018å¹´ï¼ŒJavaScriptéƒ½ç»å†äº†ä»€ä¹ˆï¼Ÿ",
      "last_reply_at": "2019-07-24T01:29:50.691Z",
      "good": true,
      "top": false,
      "reply_count": 16,
      "visit_count": 4821,
      "create_at": "2018-12-25T02:06:57.767Z",
      "author": {
        "loginname": "Fundebug",
        "avatar_url": "https://avatars2.githubusercontent.com/u/26496557?v=4&s=120"
      }
    }
  ]
}